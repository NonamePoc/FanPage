ö

uC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\ViewModels\User\UserInfoViewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 

ViewModels  
.  !
User! %
{ 
public 

class 
UserInfoViewModel "
{ 
public 
bool 
IsBanned 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTimeOffset 
? 
BanExpirationDate 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
string 
? 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
public

 
string

 
?

 
PhoneNumber

 "
{

# $
get

% (
;

( )
set

* -
;

- .
}

/ 0
public 
string 
? 
Role 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} Ê
tC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\ViewModels\User\StickerViewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 

ViewModels  
.  !
User! %
;% &
public 
class 
StickerViewModel 
{ 
public 

int 
	StickerId 
{ 
get 
; 
set  #
;# $
}% &
public 

byte 
[ 
] 
StickerImage 
{  
get! $
;$ %
set& )
;) *
}+ ,
} Ù
rC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\ViewModels\User\LogInViewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 

ViewModels  
.  !
User! %
{ 
public 

class 
LogInViewModel 
{ 
public 
string 
? 
Id 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
? 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
string		 
?		 
Token		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
public 
string 
? 
Name 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
? 
Role 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
? 
WhoBan 
{ 
get  #
;# $
set% (
;( )
}* +
public 
byte 
[ 
] 
? 

UserAvatar !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 
LifeTimeToken %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} Ý
~C:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\ViewModels\User\CustomUserSettingViewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 

ViewModels  
.  !
User! %
;% &
public 
class &
CustomUserSettingViewModel '
{ 
public 

int #
CustomizationSettingsId &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 

byte 
[ 
] 
? 
BannerImage 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

ICollection 
< 
StickerViewModel '
>' (
CustomStickers) 7
{8 9
get: =
;= >
set? B
;B C
}D E
}		 ›
rC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\ViewModels\Fanfic\TagViewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 

ViewModels  
.  !
Fanfic! '
;' (
public 
class 
TagViewModel 
{ 
public 

int 
TagId 
{ 
get 
; 
set 
;  
}! "
public 

string 
Name 
{ 
get 
; 
set !
;! "
}# $
public		 

bool		 

IsApproved		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
public 

ICollection 
< 
FanficTagViewModel )
>) *

FanficTags+ 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
} ž

uC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\ViewModels\Fanfic\ReviewViewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 

ViewModels  
.  !
Fanfic! '
;' (
public 
class 
ReviewViewModel 
{ 
public 

int 
ReviewId 
{ 
get 
; 
set "
;" #
}$ %
public 

string 
UserName 
{ 
get  
;  !
set" %
;% &
}' (
public		 

string		 
Text		 
{		 
get		 
;		 
set		 !
;		! "
}		# $
public 

double 
Rating 
{ 
get 
; 
set  #
;# $
}% &
public 

DateTimeOffset 
CreationDate &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 

int 
FanficId 
{ 
get 
; 
set "
;" #
}$ %
} ý
uC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\ViewModels\Fanfic\FanficViewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 

ViewModels  
.  !
Fanfic! '
;' (
public 
class 
FanficViewModel 
{ 
public 

string 
? 
Id 
{ 
get 
; 
set  
;  !
}" #
public		 

string		 
?		 
Title		 
{		 
get		 
;		 
set		  #
;		# $
}		% &
public 

string 
? 
Description 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

byte 
[ 
] 
? 
Image 
{ 
get 
; 
set  #
;# $
}% &
public 

string 
? 

AuthorName 
{ 
get  #
;# $
set% (
;( )
}* +
public 

bool 
? 
OriginFandom 
{ 
get  #
;# $
set% (
;( )
}* +
public 

string 
? 
Stage 
{ 
get 
; 
set  #
;# $
}% &
public 

string 
? 
Language 
{ 
get !
;! "
set# &
;& '
}( )
public 

List 
< 
CategoryDto 
> 

Categories '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 

List 
< 
TagDto 
> 
Tags 
{ 
get "
;" #
set$ '
;' (
}) *
} ­
xC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\ViewModels\Fanfic\FanficTagViewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 

ViewModels  
.  !
Fanfic! '
;' (
public 
class 
FanficTagViewModel 
{ 
public 

int 
TagId 
{ 
get 
; 
set 
;  
}! "
public 

string 
TagName 
{ 
get 
;  
set! $
;$ %
}& '
} ý
vC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\ViewModels\Fanfic\ChapterViewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 

ViewModels  
.  !
Fanfic! '
;' (
public 
class 
ChapterViewModel 
{ 
public 

int 
	ChapterId 
{ 
get 
; 
set  #
;# $
}% &
public 

int 
FanficId 
{ 
get 
; 
set "
;" #
}$ %
public		 

string		 
?		 
Title		 
{		 
get		 
;		 
set		  #
;		# $
}		% &
public 

string 
? 
Content 
{ 
get  
;  !
set" %
;% &
}' (
} ï
iC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Swagger\SwaggerConfig.cs
	namespace 	
FanPage
 
. 
Api 
. 
Swagger 
{ 
public 

class 
SwaggerConfig 
{ 
public 
bool 

UseSwagger 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} µ
wC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\ViewModels\Fanfic\CategoryViewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 

ViewModels  
.  !
Fanfic! '
;' (
public 
class 
CategoryViewModel 
{ 
public 

int 

CategoryId 
{ 
get 
;  
set! $
;$ %
}& '
public 

string 
CategoryName 
{  
get! $
;$ %
set& )
;) *
}+ ,
} ¯!
qC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Swagger\EnumDescriptionFilter.cs
	namespace 	
FanPage
 
. 
Api 
. 
Swagger 
{ 
public 

class !
EnumDescriptionFilter &
:' (
IDocumentFilter) 8
{		 
public

 
void

 
Apply

 
(

 
OpenApiDocument

 )

swaggerDoc

* 4
,

4 5!
DocumentFilterContext

6 K
context

L S
)

S T
{ 	
if 
( 
context 
== 
null 
)  
throw 
new !
ArgumentNullException /
(/ 0
nameof0 6
(6 7
context7 >
)> ?
)? @
;@ A
foreach 
( 
var 
openApiSchema &
in' )
context* 1
.1 2
SchemaRepository2 B
.B C
SchemasC J
)J K
{ 
foreach 
( 
var 
property %
in& (
openApiSchema) 6
.6 7
Value7 <
.< =

Properties= G
)G H
{ 
if 
( 
property  
.  !
Value! &
.& '
Enum' +
!=, .
null/ 3
)3 4
{ 
ModifyEnums #
(# $
property$ ,
., -
Value- 2
)2 3
;3 4
} 
} 
if 
( 
openApiSchema !
.! "
Value" '
.' (
Enum( ,
!=- /
null0 4
)4 5
{ 
ModifyEnums 
(  
openApiSchema  -
.- .
Value. 3
)3 4
;4 5
} 
} 
} 	
private   
static   
void   
ModifyEnums   '
(  ' (
OpenApiSchema  ( 5
schema  6 <
)  < =
{!! 	
var"" 
values"" 
="" 
schema"" 
.""  
Enum""  $
.""$ %
Select""% +
(""+ ,
en"", .
=>""/ 1
{## 
var$$ 
enType$$ 
=$$ 
en$$ 
.$$  
GetType$$  '
($$' (
)$$( )
;$$) *
if%% 
(%% 
!%% 
enType%% 
.%% 
IsEnum%% "
)%%" #
return&& 
string&& !
.&&! "
Empty&&" '
;&&' (
var(( 
enu(( 
=(( 
((( 
Enum(( 
)((  
en((  "
;((" #
return)) 
string)) 
.)) 
Concat)) $
())$ %
$"** 
{** 
Convert** 
.** 

ChangeType** )
(**) *
enu*** -
,**- .
enu**/ 2
.**2 3
GetTypeCode**3 >
(**> ?
)**? @
,**@ A
CultureInfo**B M
.**M N
CurrentCulture**N \
)**\ ]
}**] ^
"**^ _
,**_ `
$"++ 
$str++ 
{++ 
Enum++ 
.++ 
GetName++ &
(++& '
enType++' -
,++- .
en++/ 1
)++1 2
}++2 3
"++3 4
)++4 5
;++5 6
},, 
),, 
;,, 
var.. 
sb.. 
=.. 
new.. 
StringBuilder.. &
(..& '
)..' (
;..( )
foreach// 
(// 
var// 
value// 
in// !
values//" (
)//( )
{00 
sb11 
.11 

AppendLine11 
(11 
value11 #
)11# $
;11$ %
}22 
schema44 
.44 
Description44 
=44  
sb44! #
.44# $
ToString44$ ,
(44, -
)44- .
;44. /
}55 	
}66 
}77 Û
oC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Swagger\AuthOperationFilter.cs
	namespace 	
FanPage
 
. 
Api 
. 
Swagger 
{ 
public 

class 
AuthOperationFilter $
:% &
IOperationFilter' 7
{ 
public		 
void		 
Apply		 
(		 
OpenApiOperation		 *
	operation		+ 4
,		4 5"
OperationFilterContext		6 L
context		M T
)		T U
{

 	
if 
( 
context 
!= 
null 
)  
{ 
var 
authAttributes "
=# $
context% ,
., -

MethodInfo- 7
. 
GetCustomAttributes (
(( )
true) -
)- .
. 
OfType 
< 
AuthorizeAttribute .
>. /
(/ 0
)0 1
. 
Distinct 
( 
) 
;  
if 
( 
! 
authAttributes #
.# $
Any$ '
(' (
)( )
)) *
return 
; 
} 
if 
( 
	operation 
== 
null !
)! "
return# )
;) *
	operation 
. 
	Responses 
.  
TryAdd  &
(& '
$str' ,
,, -
new. 1
OpenApiResponse2 A
{B C
DescriptionD O
=P Q
$strR `
}a b
)b c
;c d
var 
bearerScheme 
= 
new "!
OpenApiSecurityScheme# 8
{ 
	Reference 
= 
new 
OpenApiReference  0
{1 2
Type3 7
=8 9
ReferenceType: G
.G H
SecuritySchemeH V
,V W
IdX Z
=[ \
$str] e
}f g
} 
; 
	operation 
. 
Security 
=  
new! $
List% )
<) *&
OpenApiSecurityRequirement* D
>D E
{ 
new   &
OpenApiSecurityRequirement   .
{!! 
["" 
bearerScheme"" !
]""! "
=""# $
Array""% *
.""* +
Empty""+ 0
<""0 1
string""1 7
>""7 8
(""8 9
)""9 :
}## 
}$$ 
;$$ 
}%% 	
}&& 
}'' ô
hC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Swagger\AssemblyInfo.cs
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] ï
xC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Swagger\ApplicationBuilderExtensions.cs
	namespace 	
FanPage
 
. 
Api 
. 
Swagger 
; 
public 
static 
class (
ApplicationBuilderExtensions 0
{ 
private 
const 
string 
SwaggerPath $
=% &
$str' A
;A B
public 

static 
void  
UseConfiguredSwagger +
(+ ,
this, 0
IApplicationBuilder1 D
appE H
)H I
{ 
app 
. 

UseSwagger 
( 
c 
=> 
{ 	
c 
. 
PreSerializeFilters !
.! "
Add" %
(% &
(& '
swagger' .
,. /
httpReq0 7
)7 8
=>9 ;
{ 
swagger 
. 
Servers 
=  !
new" %
List& *
<* +
OpenApiServer+ 8
>8 9
{ 
new 
OpenApiServer '
{( )
Url* -
=. /
$"0 2
{2 3
httpReq3 :
.: ;
Scheme; A
}A B
$strB E
{E F
httpReqF M
.M N
HostN R
.R S
ValueS X
}X Y
"Y Z
}[ \
}] ^
;^ _
} 
) 
; 
c 
. 
RouteTemplate 
= 
$str C
;C D
} 	
)	 

;
 
app 
. 
UseSwaggerUI 
( 
c 
=> 
{ 
c  !
.! "
SwaggerEndpoint" 1
(1 2
SwaggerPath2 =
,= >
$str? O
)O P
;P Q
}R S
)S T
;T U
} 
} ¡9
[C:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder		 
.		 
Services		 
.		 
AddControllers		 
(		  
)		  !
;		! "
builder

 
.

 
Services

 
.

 #
AddEndpointsApiExplorer

 (
(

( )
)

) *
;

* +
var 
swaggerInfo 
= 
new 
OpenApiInfo !
{ 
Title 	
=
 
$str 
, 
Version 
= 
$str 
} 
; 
builder 
. 
Services 
. 
ConfigureSwagger !
(! "
builder" )
.) *
Configuration* 7
,7 8
swaggerInfo9 D
)D E
;E F
builder 
. 
Services 
. 
AddAutoMapper 
( 
typeof %
(% &%
OutputModelsMapperProfile& ?
)? @
)@ A
;A B
builder 
. 
Services 
. 
DataBase 
( 
builder !
.! "
Configuration" /
)/ 0
;0 1
builder 
. 
Services 
. 
Logger 
( 
builder 
.  
Configuration  -
)- .
;. /
builder 
. 
Services 
. #
ConfigureAuthentication (
(( )
builder) 0
.0 1
Configuration1 >
)> ?
;? @
builder 
. 
Services 
. 
ConfigureSmtp 
( 
builder &
.& '
Configuration' 4
)4 5
;5 6
builder 
. 
Services 
.  
ConfigureApplication %
(% &
builder& -
.- .
Configuration. ;
); <
;< =
builder 
. 
Services 
. %
ConfigureBusinessServices *
(* +
)+ ,
;, -
builder 
. 
Services 
. 
ConfigureMapper  
(  !
)! "
;" #
builder 
. 
Services 
. 
ConfigureRepository $
($ %
)% &
;& '
builder 
. 
Services 
. #
AddControllersWithViews (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddCors 
( 
options  
=>! #
{ 
options 
. 
	AddPolicy 
( 
$str "
," #
corsPolicyBuilder   
=>   
corsPolicyBuilder   .
.!! 
WithOrigins!! 
(!! 
$str!! 0
)!!0 1
."" 
AllowAnyMethod"" 
("" 
)"" 
.## 
SetIsOriginAllowed## 
(##  
(##  !
host##! %
)##% &
=>##' )
true##* .
)##. /
.$$ 
AllowAnyHeader$$ 
($$ 
)$$ 
.%% 
AllowCredentials%% 
(%% 
)%% 
)%%  
;%%  !
}&& 
)&& 
;&& 
builder(( 
.(( 
Services(( 
.(( 

AddSignalR(( 
((( 
)(( 
;(( 
var++ 
app++ 
=++ 	
builder++
 
.++ 
Build++ 
(++ 
)++ 
;++ 
if.. 
(.. 
app.. 
... 
Environment.. 
... 
IsDevelopment.. !
(..! "
).." #
)..# $
{// 
app00 
.00 

UseSwagger00 
(00 
)00 
;00 
app11 
.11 
UseSwaggerUI11 
(11 
x11 
=>11 
{11 
x11 
.11 
SwaggerEndpoint11 -
(11- .
$str11. H
,11H I
$str11J f
)11f g
;11g h
}11i j
)11j k
;11k l
}22 
app44 
.44 
UseCors44 
(44 
x44 
=>44 
x44 
.55 
AllowAnyMethod55 
(55 
)55 
.66 
AllowAnyHeader66 
(66 
)66 
.77 
SetIsOriginAllowed77 
(77 
origin77 
=>77 !
true77" &
)77& '
.88 
AllowCredentials88 
(88 
)88 
)88 
;88 
app:: 
.:: 
UseStaticFiles:: 
(:: 
new:: 
StaticFileOptions:: (
{;; 
OnPrepareResponse<< 
=<< 
ctx<< 
=><< 
{== 
ctx?? 
.?? 
Context?? 
.?? 
Response?? 
.?? 
Headers?? $
.??$ %
Append??% +
(??+ ,
$str??, ;
,??; <
$str??= W
)??W X
;??X Y
}@@ 
}AA 
)AA 
;AA 
appBB 
.BB 
UseMiddlewareBB 
<BB %
GlobalExceptionMiddlewareBB +
>BB+ ,
(BB, -
)BB- .
;BB. /
appCC 
.CC 
UseMiddlewareCC 
<CC 
CorsMiddlewareCC  
>CC  !
(CC! "
)CC" #
;CC# $
appEE 
.EE 
UseApiLoggingEE 
(EE 
)EE 
;EE 
appGG 
.GG 

UseRoutingGG 
(GG 
)GG 
;GG 
appHH 
.HH 
UseAuthenticationHH 
(HH 
)HH 
;HH 
appII 
.II 
UseAuthorizationII 
(II 
)II 
;II 
appKK 
.KK 
UseEndpointsKK 
(KK 
	endpointsKK 
=>KK 
{LL 
	endpointsMM 
.MM 
MapHubMM 
<MM 

CommentHubMM 
>MM  
(MM  !
$strMM! .
)MM. /
;MM/ 0
	endpointsNN 
.NN 
MapHubNN 
<NN 
ChatHubNN 
>NN 
(NN 
$strNN (
)NN( )
;NN) *
}OO 
)OO 
;OO 
appQQ 
.QQ 
MapControllersQQ 
(QQ 
)QQ 
;QQ 
appSS 
.SS 
SeedIdentitySS 
(SS 
)SS 
;SS 
appUU 
.UU 
RunUU 
(UU 
)UU 	
;UU	 
æ	
mC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Fanfic\UpdateModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Fanfic #
{ 
public 

class 
UpdateModel 
{ 
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
? 
Description "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
bool 
? 
OriginFandom !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
? 
Stage 
{ 
get "
;" #
set$ '
;' (
}) *
public

 
List

 
<

 
FanficPhotoModel

 $
>

$ %
Photo

& +
{

, -
get

. 1
;

1 2
set

3 6
;

6 7
}

8 9
} 
} ø
jC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Fanfic\TagModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Fanfic #
;# $
public 
class 
TagModel 
{ 
public 

string 
Name 
{ 
get 
; 
set !
;! "
}# $
} ˜
mC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Fanfic\ReviewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Fanfic #
;# $
public 
class 
ReviewModel 
{ 
public 

string 
Text 
{ 
get 
; 
set !
;! "
}# $
public 

double 
Rating 
{ 
get 
; 
set  #
;# $
}% &
} ¥
rC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Fanfic\FanficPhotoModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Fanfic #
;# $
public 
class 
FanficPhotoModel 
{ 
public 

byte 
[ 
] 
Image 
{ 
get 
; 
set "
;" #
}$ %
} Â
uC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Fanfic\FanficCategoryModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Fanfic #
{ 
public 

class 
FanficCategoryModel $
{ 
public 
int 

CategoryId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
CategoryName "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} §
mC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Fanfic\CreateModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Fanfic #
{ 
public 

class 
CreateModel 
{ 
public 
byte 
[ 
] 
? 
Image 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
Title 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
Description "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
bool 
? 
OriginFandom !
{" #
get$ '
;' (
set) ,
;, -
}. /
public		 
string		 
?		 
Language		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
public

 
string

 
?

 
Stage

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 
List 
< 
string 
> 

Categories &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
List 
< 
string 
> 
Tags  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} Ñ
nC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Fanfic\CommentModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Fanfic #
;# $
public 
class 
CommentModel 
{ 
public 

string 
Content 
{ 
get 
;  
set! $
;$ %
}& '
public 

byte 
[ 
] 
Image 
{ 
get 
; 
set "
;" #
}$ %
public		 

int		 
FanficId		 
{		 
get		 
;		 
set		 "
;		" #
}		$ %
}

 µ
nC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Fanfic\ChapterModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Fanfic #
;# $
public 
class 
ChapterModel 
{ 
public 

string 
Title 
{ 
get 
; 
set "
;" #
}$ %
public 

string 
Content 
{ 
get 
;  
set! $
;$ %
}& '
public 

int 
FanficId 
{ 
get 
; 
set "
;" #
}$ %
} ÿ
lC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Chat\MessageModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Chat !
;! "
public 
class 
MessageModel 
{ 
public 

string 
Content 
{ 
get 
;  
set! $
;$ %
}& '
} ­
iC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Chat\ChatModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Chat !
;! "
public 
class 
	ChatModel 
{ 
public 

string 
Name 
{ 
get 
; 
set !
;! "
}# $
public 

string 
Description 
{ 
get  #
;# $
set% (
;( )
}* +
public		 

string		 
Type		 
{		 
get		 
;		 
set		 !
;		! "
}		# $
}

 ¯
uC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Auth\RefreshTokenViewModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Auth !
{ 
public 

class !
RefreshTokenViewModel &
{ 
public 
string 
? 
Token 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} Â
iC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Auth\AuthModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Auth !
{ 
public 

class 
	AuthModel 
{ 
public 
string 
? 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
Password 
{  !
get" %
;% &
set' *
;* +
}, -
} 
}		 Ì
pC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Admin\ChangeRoleModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Admin "
{ 
public 

class 
ChangeRoleModel  
{ 
public 
string 
? 
Id 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
? 
NewRole 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ¸
iC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Admin\BanModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Admin "
{ 
public 

class 
BanModel 
{ 
public 
string 
? 
Id 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
? 
days 
{ 
get 
; 
set  #
;# $
}% &
} 
} Û
wC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Account\RestorePasswordModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Account $
{ 
public 

class  
RestorePasswordModel %
{ 
public 
string 
? 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
Token 
{ 
get "
;" #
set$ '
;' (
}) *
} 
}		 ½
|C:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Account\RequestToRestorePassModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Account $
{ 
public 

class %
RequestToRestorePassModel *
{ 
public 
string 
? 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} À
|C:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Account\RequestToChangeEmailModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Account $
{ 
public 

class %
RequestToChangeEmailModel *
{ 
public 
string 
? 
NewEmail 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} µ
tC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Account\RegistrationModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Account $
{ 
public 

class 
RegistrationModel "
{ 
public 
string 
? 
UserName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
? 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
string		 
?		 
Password		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
public 
string 
? 
ConfirmPassword &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} ”
vC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Account\PasswordChangeModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Account $
{ 
public 

class 
PasswordChangeModel $
{ 
public 
string 
? 
Password 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
? 
ConfirmPassword &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public		 
string		 
?		 
NewPassword		 "
{		# $
get		% (
;		( )
set		* -
;		- .
}		/ 0
}

 
} Õ
tC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Account\ConfirmEmailModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Account $
{ 
public 

class 
ConfirmEmailModel "
{ 
public 
string 
? 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
Token 
{ 
get "
;" #
set$ '
;' (
}) *
} 
}		 þ
sC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Models\Account\ChangeEmailModel.cs
	namespace 	
FanPage
 
. 
Api 
. 
Models 
. 
Account $
{ 
public 

class 
ChangeEmailModel !
{ 
public 
string 
? 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
NewEmail 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
string		 
?		 
Token		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
}

 
} ˜
vC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Middleware\JwtValidationMiddleware.cs
	namespace 	
FanPage
 
. 
Api 
. 

Middleware  
{ 
public 

class #
JwtValidationMiddleware (
:) *
IMiddleware+ 6
{ 
private 
readonly 
IJwtTokenManager )
_jwtTokenManager* :
;: ;
public

 #
JwtValidationMiddleware

 &
(

& '
IJwtTokenManager

' 7
jwtTokenManager

8 G
)

G H
{ 	
_jwtTokenManager 
= 
jwtTokenManager .
;. /
} 	
public 
async 
Task 
InvokeAsync %
(% &
HttpContext& 1
context2 9
,9 :
RequestDelegate; J
nextK O
)O P
{ 	
if 
( 
! 
await 
_jwtTokenManager '
.' (
IsTokenExists( 5
(5 6
context6 =
.= >
Request> E
)E F
)F G
{ 
await 
next 
( 
context "
)" #
;# $
return 
; 
} 
context 
. 
Response 
. 

StatusCode '
=( )
(* +
int+ .
). /
HttpStatusCode/ =
.= >
Unauthorized> J
;J K
} 	
} 
} 
xC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Middleware\GlobalExceptionMiddleware.cs
	namespace 	
FanPage
 
. 
Api 
. 

Middleware  
{ 
public 

sealed 
class %
GlobalExceptionMiddleware 1
{ 
private 
readonly 
RequestDelegate (
_next) .
;. /
private		 
readonly		 "
JsonSerializerSettings		 /
_serializerSettings		0 C
;		C D
public %
GlobalExceptionMiddleware (
(( )
RequestDelegate) 8
next9 =
)= >
{ 	
_next 
= 
next 
; 
_serializerSettings 
=  !
new" %"
JsonSerializerSettings& <
{ 
NullValueHandling !
=" #
NullValueHandling$ 5
.5 6
Ignore6 <
} 
; 
} 	
public 
async 
Task 
InvokeAsync %
(% &
HttpContext& 1
context2 9
)9 :
{ 	
try 
{ 
await 
_next 
( 
context #
)# $
;$ %
} 
catch 
( 
	Exception 
ex 
)  
{ 
await  
HandleExceptionAsync *
(* +
context+ 2
,2 3
ex4 6
)6 7
;7 8
} 
} 	
private   
Task    
HandleExceptionAsync   )
(  ) *
HttpContext  * 5
context  6 =
,  = >
	Exception  ? H
	exception  I R
)  R S
{!! 	
context"" 
."" 
Response"" 
."" 
ContentType"" (
="") *
$str""+ =
;""= >
context## 
.## 
Response## 
.## 

StatusCode## '
=##( )
(##* +
int##+ .
)##. /
HttpStatusCode##/ =
.##= >

BadRequest##> H
;##H I
var&& !
jsonResponseContainer&& %
=&&& '
new&&( +
{'' 
Errors(( 
=(( 
new(( 
[(( 
](( 
{)) 
new** 
{++ 
Title,, 
=,, 
HttpStatusCode,,  .
.,,. /

BadRequest,,/ 9
.,,9 :
ToString,,: B
(,,B C
$str,,C F
),,F G
,,,G H
Detail-- 
=--  
	exception--! *
.--* +
Message--+ 2
}.. 
}// 
}00 
;00 
var22 
json22 
=22 
JsonConvert22 "
.22" #
SerializeObject22# 2
(222 3!
jsonResponseContainer223 H
,22H I
_serializerSettings22J ]
)22] ^
;22^ _
return33 
context33 
.33 
Response33 #
.33# $

WriteAsync33$ .
(33. /
json33/ 3
)333 4
;334 5
}44 	
}55 
}66 ¬
mC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Middleware\CorsMiddleware.cs
	namespace 	
FanPage
 
. 
Api 
. 

Middleware  
;  !
public 
class 
CorsMiddleware 
{ 
private 
readonly 
RequestDelegate $
_next% *
;* +
public 

CorsMiddleware 
( 
RequestDelegate )
next* .
). /
{ 
_next		 
=		 
next		 
;		 
}

 
public 

async 
Task 
Invoke 
( 
HttpContext (
context) 0
)0 1
{ 
var 
headers 
= 
context 
. 
Request %
.% &
Headers& -
;- .
foreach 
( 
var 
header 
in 
headers &
)& '
{ 	
Console 
. 
	WriteLine 
( 
$"  
{  !
header! '
.' (
Key( +
}+ ,
$str, .
{. /
header/ 5
.5 6
Value6 ;
}; <
"< =
)= >
;> ?
} 	
await 
_next 
( 
context 
) 
; 
} 
} ü¦
tC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Mapper\OutputModelsMapperProfile.cs
	namespace 	
FanPage
 
. 
Api 
. 
Mapper 
{ 
public 

class %
OutputModelsMapperProfile *
:+ ,
Profile- 4
{ 
public %
OutputModelsMapperProfile (
(( )
)) *
{ 	
RegisterAuthMaps 
( 
) 
; 
	AdminMaps 
( 
) 
; 
FanficAuthMaps 
( 
) 
; 
ProfileMaps 
( 
) 
; 
} 	
private 
void 
RegisterAuthMaps %
(% &
)& '
{ 	
	CreateMap 
< 
LogInResponseDto &
,& '
LogInViewModel( 6
>6 7
(7 8
)8 9
;9 :
	CreateMap   
<   
RefreshTokenDto   %
,  % &!
RefreshTokenViewModel  ' <
>  < =
(  = >
)  > ?
;  ? @
	CreateMap!! 
<!! 
RegistrationModel!! '
,!!' (
RegistrationDto!!) 8
>!!8 9
(!!9 :
)!!: ;
;!!; <
	CreateMap"" 
<"" 
ConfirmEmailModel"" '
,""' (
ConfirmEmailDto"") 8
>""8 9
(""9 :
)"": ;
;""; <
	CreateMap## 
<## 
	AuthModel## 
,##  
AuthDto##! (
>##( )
(##) *
)##* +
;##+ ,
	CreateMap$$ 
<$$  
RestorePasswordModel$$ *
,$$* +
RestorePasswordDto$$, >
>$$> ?
($$? @
)$$@ A
;$$A B
	CreateMap%% 
<%% %
RequestToRestorePassModel%% /
,%%/ 0%
RequestRestorePasswordDto%%1 J
>%%J K
(%%K L
)%%L M
;%%M N
	CreateMap&& 
<&& 
PasswordChangeModel&& )
,&&) *
ChangePasswordDto&&+ <
>&&< =
(&&= >
)&&> ?
;&&? @
}'' 	
private)) 
void)) 
	AdminMaps)) 
()) 
)))  
{** 	
	CreateMap++ 
<++ 
BanModel++ 
,++ 
BanDto++  &
>++& '
(++' (
)++( )
;++) *
	CreateMap,, 
<,, 
ChangeRoleModel,, %
,,,% &
ChangeRoleDto,,' 4
>,,4 5
(,,5 6
),,6 7
;,,7 8
	CreateMap-- 
<-- 
UserInfoResponseDto-- )
,--) *
UserInfoViewModel--+ <
>--< =
(--= >
)--> ?
;--? @
}.. 	
private00 
void00 
ProfileMaps00  
(00  !
)00! "
{11 	
	CreateMap22 
<22 

Friendship22  
,22  !
	FriendDto22" +
>22+ ,
(22, -
)22- .
;22. /
	CreateMap33 
<33 
FriendRequest33 #
,33# $
FriendRequestDto33% 5
>335 6
(336 7
)337 8
;338 9
	CreateMap44 
<44 
Follower44 
,44 
FollowerDto44  +
>44+ ,
(44, -
)44- .
;44. /
	CreateMap55 
<55 
Bookmark55 
,55 
BookmarkDto55  +
>55+ ,
(55, -
)55- .
;55. /
}66 	
private99 
void99 
FanficAuthMaps99 #
(99# $
)99$ %
{:: 	
	CreateMap<< 
<<< 
CreateModel<< !
,<<! "
	CreateDto<<# ,
><<, -
(<<- .
)<<. /
;<</ 0
	CreateMap== 
<== 
	FanficDto== 
,==  
FanficViewModel==! 0
>==0 1
(==1 2
)==2 3
;==3 4
	CreateMap>> 
<>> 
	UpdateDto>> 
,>>  
Fanfic>>! '
>>>' (
(>>( )
)>>) *
;>>* +
	CreateMap?? 
<?? 
UpdateModel?? !
,??! "
	UpdateDto??# ,
>??, -
(??- .
)??. /
;??/ 0
	CreateMapBB 
<BB 
FanficPhotoDtoBB $
,BB$ %
FanficPhotoBB& 1
>BB1 2
(BB2 3
)BB3 4
;BB4 5
	CreateMapCC 
<CC 
FanficPhotoModelCC &
,CC& '
FanficPhotoDtoCC( 6
>CC6 7
(CC7 8
)CC8 9
;CC9 :
	CreateMapFF 
<FF 
ChapterModelFF "
,FF" #

ChapterDtoFF$ .
>FF. /
(FF/ 0
)FF0 1
;FF1 2
	CreateMapGG 
<GG 

ChapterDtoGG  
,GG  !
ChapterGG" )
>GG) *
(GG* +
)GG+ ,
;GG, -
	CreateMapHH 
<HH 

ChapterDtoHH  
,HH  !
ChapterViewModelHH" 2
>HH2 3
(HH3 4
)HH4 5
;HH5 6
	CreateMapKK 
<KK 
ReviewModelKK !
,KK! "

ReviewsDtoKK# -
>KK- .
(KK. /
)KK/ 0
;KK0 1
	CreateMapLL 
<LL 

ReviewsDtoLL  
,LL  !
ReviewsLL" )
>LL) *
(LL* +
)LL+ ,
;LL, -
	CreateMapMM 
<MM 
ReviewsMM 
,MM 

ReviewsDtoMM )
>MM) *
(MM* +
)MM+ ,
;MM, -
	CreateMapNN 
<NN 

ReviewsDtoNN  
,NN  !
ReviewViewModelNN" 1
>NN1 2
(NN2 3
)NN3 4
;NN4 5
	CreateMapQQ 
<QQ 
CategoryDtoQQ !
,QQ! "
CategoryViewModelQQ# 4
>QQ4 5
(QQ5 6
)QQ6 7
;QQ7 8
	CreateMapRR 
<RR 
CategoryRR 
,RR 
CategoryDtoRR  +
>RR+ ,
(RR, -
)RR- .
;RR. /
	CreateMapSS 
<SS 
FanficCategorySS $
,SS$ %
CategoryDtoSS& 1
>SS1 2
(SS2 3
)SS3 4
;SS4 5
	CreateMapTT 
<TT 
FanficCategoryModelTT )
,TT) *
FanficCategoryDtoTT+ <
>TT< =
(TT= >
)TT> ?
;TT? @
	CreateMapVV 
<VV 
TagDtoVV 
,VV 
TagVV !
>VV! "
(VV" #
)VV# $
;VV$ %
	CreateMapWW 
<WW 
TagModelWW 
,WW 
TagDtoWW  &
>WW& '
(WW' (
)WW( )
;WW) *
	CreateMapXX 
<XX 
TagDtoXX 
,XX 
TagViewModelXX *
>XX* +
(XX+ ,
)XX, -
;XX- .
	CreateMapYY 
<YY 
TagYY 
,YY 
TagDtoYY !
>YY! "
(YY" #
)YY# $
;YY$ %
	CreateMapZZ 
<ZZ 
	FanficTagZZ 
,ZZ  
TagDtoZZ! '
>ZZ' (
(ZZ( )
)ZZ) *
;ZZ* +
	CreateMap\\ 
<\\ 
Category\\ 
,\\ 
CategoryDto\\  +
>\\+ ,
(\\, -
)\\- .
;\\. /
	CreateMap]] 
<]] 
Tag]] 
,]] 
TagDto]] !
>]]! "
(]]" #
)]]# $
;]]$ %
	CreateMap^^ 
<^^ 
CreateModel^^ !
,^^! "
	CreateDto^^# ,
>^^, -
(^^- .
)^^. /
.__ 
	ForMember__ 
(__ 
dest__ 
=>__  "
dest__# '
.__' (

Categories__( 2
,__2 3
opt__4 7
=>__8 :
opt__; >
.__> ?
MapFrom__? F
(__F G
src__G J
=>__K M
src__N Q
.__Q R

Categories__R \
)__\ ]
)__] ^
.`` 
	ForMember`` 
(`` 
dest`` 
=>``  "
dest``# '
.``' (
Tags``( ,
,``, -
opt``. 1
=>``2 4
opt``5 8
.``8 9
MapFrom``9 @
(``@ A
src``A D
=>``E G
src``H K
.``K L
Tags``L P
)``P Q
)``Q R
;``R S
	CreateMapcc 
<cc 
Listcc 
<cc 
Tagcc 
>cc 
,cc  
Listcc! %
<cc% &
TagDtocc& ,
>cc, -
>cc- .
(cc. /
)cc/ 0
.dd 
ConvertUsingdd 
(dd 
tagsdd "
=>dd# %
tagsdd& *
.dd* +
Selectdd+ 1
(dd1 2
tagdd2 5
=>dd6 8
newdd9 <
TagDtodd= C
{ee 
TagIdff 
=ff 
tagff 
.ff  
TagIdff  %
,ff% &
Namegg 
=gg 
taggg 
.gg 
Namegg #
,gg# $

IsApprovedhh 
=hh  
taghh! $
.hh$ %

IsApprovedhh% /
}ii 
)ii 
.ii 
ToListii 
(ii 
)ii 
)ii 
;ii 
	CreateMapkk 
<kk 
Reviewskk 
,kk 

ReviewsDtokk )
>kk) *
(kk* +
)kk+ ,
.ll 
	ForMemberll 
(ll 
destll 
=>ll  "
destll# '
.ll' (
FanficIdll( 0
,ll0 1
optll2 5
=>ll6 8
optll9 <
.ll< =
MapFromll= D
(llD E
srcllE H
=>llI K
srcllL O
.llO P
FanficIdllP X
)llX Y
)llY Z
.mm 
	ForMembermm 
(mm 
destmm 
=>mm  "
destmm# '
.mm' (
ReviewIdmm( 0
,mm0 1
optmm2 5
=>mm6 8
optmm9 <
.mm< =
MapFrommm= D
(mmD E
srcmmE H
=>mmI K
srcmmL O
.mmO P
ReviewIdmmP X
)mmX Y
)mmY Z
.nn 
	ForMembernn 
(nn 
destnn 
=>nn  "
destnn# '
.nn' (
Textnn( ,
,nn, -
optnn. 1
=>nn2 4
optnn5 8
.nn8 9
MapFromnn9 @
(nn@ A
srcnnA D
=>nnE G
srcnnH K
.nnK L
TextnnL P
)nnP Q
)nnQ R
.oo 
	ForMemberoo 
(oo 
destoo 
=>oo  "
destoo# '
.oo' (
CreationDateoo( 4
,oo4 5
optoo6 9
=>oo: <
optoo= @
.oo@ A
MapFromooA H
(ooH I
srcooI L
=>ooM O
srcooP S
.ooS T
CreationDateooT `
)oo` a
)ooa b
.pp 
	ForMemberpp 
(pp 
destpp 
=>pp  "
destpp# '
.pp' (
UserNamepp( 0
,pp0 1
optpp2 5
=>pp6 8
optpp9 <
.pp< =
MapFrompp= D
(ppD E
srcppE H
=>ppI K
srcppL O
.ppO P
UserNameppP X
)ppX Y
)ppY Z
.qq 
	ForMemberqq 
(qq 
destqq 
=>qq  "
destqq# '
.qq' (
Ratingqq( .
,qq. /
optqq0 3
=>qq4 6
optqq7 :
.qq: ;
MapFromqq; B
(qqB C
srcqqC F
=>qqG I
srcqqJ M
.qqM N
RatingqqN T
)qqT U
)qqU V
;qqV W
	CreateMapss 
<ss 
FanficCategoryss $
,ss$ %
FanficCategoryDtoss& 7
>ss7 8
(ss8 9
)ss9 :
.tt 
	ForMembertt 
(tt 
desttt 
=>tt  "
desttt# '
.tt' (

CategoryIdtt( 2
,tt2 3
opttt4 7
=>tt8 :
opttt; >
.tt> ?
MapFromtt? F
(ttF G
srcttG J
=>ttK M
srcttN Q
.ttQ R

CategoryIdttR \
)tt\ ]
)tt] ^
.uu 
	ForMemberuu 
(uu 
destuu 
=>uu  "
destuu# '
.uu' (
CategoryNameuu( 4
,uu4 5
optuu6 9
=>uu: <
optuu= @
.uu@ A
MapFromuuA H
(uuH I
srcuuI L
=>uuM O
srcuuP S
.uuS T
CategoryuuT \
.uu\ ]
Nameuu] a
)uua b
)uub c
;uuc d
	CreateMapvv 
<vv 
	FanficTagvv 
,vv  
TagDtovv! '
>vv' (
(vv( )
)vv) *
.ww 
	ForMemberww 
(ww 
destww 
=>ww  "
destww# '
.ww' (
Nameww( ,
,ww, -
optww. 1
=>ww2 4
optww5 8
.ww8 9
MapFromww9 @
(ww@ A
srcwwA D
=>wwE G
srcwwH K
.wwK L
TagwwL O
.wwO P
NamewwP T
)wwT U
)wwU V
.xx 
	ForMemberxx 
(xx 
destxx 
=>xx  "
destxx# '
.xx' (
TagIdxx( -
,xx- .
optxx/ 2
=>xx3 5
optxx6 9
.xx9 :
MapFromxx: A
(xxA B
srcxxB E
=>xxF H
srcxxI L
.xxL M
TagIdxxM R
)xxR S
)xxS T
.yy 
	ForMemberyy 
(yy 
destyy 
=>yy  "
destyy# '
.yy' (

IsApprovedyy( 2
,yy2 3
optyy4 7
=>yy8 :
optyy; >
.yy> ?
MapFromyy? F
(yyF G
srcyyG J
=>yyK M
srcyyN Q
.yyQ R
TagyyR U
.yyU V

IsApprovedyyV `
)yy` a
)yya b
;yyb c
	CreateMap{{ 
<{{ 
Chapter{{ 
,{{ 

ChapterDto{{ )
>{{) *
({{* +
){{+ ,
.|| 
	ForMember|| 
(|| 
dest|| 
=>||  "
dest||# '
.||' (
Title||( -
,||- .
opt||/ 2
=>||3 5
opt||6 9
.||9 :
MapFrom||: A
(||A B
src||B E
=>||F H
src||I L
.||L M
Title||M R
)||R S
)||S T
.}} 
	ForMember}} 
(}} 
dest}} 
=>}}  "
dest}}# '
.}}' (
Content}}( /
,}}/ 0
opt}}1 4
=>}}5 7
opt}}8 ;
.}}; <
MapFrom}}< C
(}}C D
src}}D G
=>}}H J
src}}K N
.}}N O
Content}}O V
)}}V W
)}}W X
;}}X Y
	CreateMap
€€ 
<
€€ 
	CreateDto
€€ 
,
€€  
Fanfic
€€! '
>
€€' (
(
€€( )
)
€€) *
.
 
	ForMember
 
(
 
dest
 
=>
  "
dest
# '
.
' (

AuthorName
( 2
,
2 3
opt
4 7
=>
8 :
opt
; >
.
> ?
MapFrom
? F
(
F G
src
G J
=>
K M
src
N Q
.
Q R

AuthorName
R \
)
\ ]
)
] ^
.
‚‚ 
	ForMember
‚‚ 
(
‚‚ 
dest
‚‚ 
=>
‚‚  "
dest
‚‚# '
.
‚‚' (
Description
‚‚( 3
,
‚‚3 4
opt
‚‚5 8
=>
‚‚9 ;
opt
‚‚< ?
.
‚‚? @
MapFrom
‚‚@ G
(
‚‚G H
src
‚‚H K
=>
‚‚L N
src
‚‚O R
.
‚‚R S
Description
‚‚S ^
)
‚‚^ _
)
‚‚_ `
.
ƒƒ 
	ForMember
ƒƒ 
(
ƒƒ 
dest
ƒƒ 
=>
ƒƒ  "
dest
ƒƒ# '
.
ƒƒ' (
OriginFandom
ƒƒ( 4
,
ƒƒ4 5
opt
ƒƒ6 9
=>
ƒƒ: <
opt
ƒƒ= @
.
ƒƒ@ A
MapFrom
ƒƒA H
(
ƒƒH I
src
ƒƒI L
=>
ƒƒM O
src
ƒƒP S
.
ƒƒS T
OriginFandom
ƒƒT `
)
ƒƒ` a
)
ƒƒa b
.
„„ 
	ForMember
„„ 
(
„„ 
dest
„„ 
=>
„„  "
dest
„„# '
.
„„' (
Language
„„( 0
,
„„0 1
opt
„„2 5
=>
„„6 8
opt
„„9 <
.
„„< =
MapFrom
„„= D
(
„„D E
src
„„E H
=>
„„I K
src
„„L O
.
„„O P
Language
„„P X
)
„„X Y
)
„„Y Z
.
…… 
	ForMember
…… 
(
…… 
dest
…… 
=>
……  "
dest
……# '
.
……' (
Stage
……( -
,
……- .
opt
……/ 2
=>
……3 5
opt
……6 9
.
……9 :
MapFrom
……: A
(
……A B
src
……B E
=>
……F H
src
……I L
.
……L M
Stage
……M R
)
……R S
)
……S T
;
……T U
	CreateMap
†† 
<
†† 
Fanfic
†† 
,
†† 
	FanficDto
†† '
>
††' (
(
††( )
)
††) *
.
‡‡ 
	ForMember
‡‡ 
(
‡‡ 
dest
‡‡ 
=>
‡‡  "
dest
‡‡# '
.
‡‡' (
Id
‡‡( *
,
‡‡* +
opt
‡‡, /
=>
‡‡0 2
opt
‡‡3 6
.
‡‡6 7
MapFrom
‡‡7 >
(
‡‡> ?
src
‡‡? B
=>
‡‡C E
src
‡‡F I
.
‡‡I J
FanficId
‡‡J R
)
‡‡R S
)
‡‡S T
.
ˆˆ 
	ForMember
ˆˆ 
(
ˆˆ 
dest
ˆˆ 
=>
ˆˆ  "
dest
ˆˆ# '
.
ˆˆ' (

AuthorName
ˆˆ( 2
,
ˆˆ2 3
opt
ˆˆ4 7
=>
ˆˆ8 :
opt
ˆˆ; >
.
ˆˆ> ?
MapFrom
ˆˆ? F
(
ˆˆF G
src
ˆˆG J
=>
ˆˆK M
src
ˆˆN Q
.
ˆˆQ R

AuthorName
ˆˆR \
)
ˆˆ\ ]
)
ˆˆ] ^
.
‰‰ 
	ForMember
‰‰ 
(
‰‰ 
dest
‰‰ 
=>
‰‰  "
dest
‰‰# '
.
‰‰' (
Title
‰‰( -
,
‰‰- .
opt
‰‰/ 2
=>
‰‰3 5
opt
‰‰6 9
.
‰‰9 :
MapFrom
‰‰: A
(
‰‰A B
src
‰‰B E
=>
‰‰F H
src
‰‰I L
.
‰‰L M
Title
‰‰M R
)
‰‰R S
)
‰‰S T
.
ŠŠ 
	ForMember
ŠŠ 
(
ŠŠ 
dest
ŠŠ 
=>
ŠŠ  "
dest
ŠŠ# '
.
ŠŠ' (
Description
ŠŠ( 3
,
ŠŠ3 4
opt
ŠŠ5 8
=>
ŠŠ9 ;
opt
ŠŠ< ?
.
ŠŠ? @
MapFrom
ŠŠ@ G
(
ŠŠG H
src
ŠŠH K
=>
ŠŠL N
src
ŠŠO R
.
ŠŠR S
Description
ŠŠS ^
)
ŠŠ^ _
)
ŠŠ_ `
.
‹‹ 
	ForMember
‹‹ 
(
‹‹ 
dest
‹‹ 
=>
‹‹  "
dest
‹‹# '
.
‹‹' (
OriginFandom
‹‹( 4
,
‹‹4 5
opt
‹‹6 9
=>
‹‹: <
opt
‹‹= @
.
‹‹@ A
MapFrom
‹‹A H
(
‹‹H I
src
‹‹I L
=>
‹‹M O
src
‹‹P S
.
‹‹S T
OriginFandom
‹‹T `
)
‹‹` a
)
‹‹a b
.
ŒŒ 
	ForMember
ŒŒ 
(
ŒŒ 
dest
ŒŒ 
=>
ŒŒ  "
dest
ŒŒ# '
.
ŒŒ' (
CreationDate
ŒŒ( 4
,
ŒŒ4 5
opt
ŒŒ6 9
=>
ŒŒ: <
opt
ŒŒ= @
.
ŒŒ@ A
MapFrom
ŒŒA H
(
ŒŒH I
src
ŒŒI L
=>
ŒŒM O
src
ŒŒP S
.
ŒŒS T
CreationDate
ŒŒT `
)
ŒŒ` a
)
ŒŒa b
.
 
	ForMember
 
(
 
dest
 
=>
  "
dest
# '
.
' (

Categories
( 2
,
2 3
opt
4 7
=>
8 :
opt
; >
.
> ?
MapFrom
? F
(
F G
src
G J
=>
K M
src
N Q
.
Q R
FanficCategories
R b
)
b c
)
c d
.
ŽŽ 
	ForMember
ŽŽ 
(
ŽŽ 
dest
ŽŽ 
=>
ŽŽ  "
dest
ŽŽ# '
.
ŽŽ' (
Tags
ŽŽ( ,
,
ŽŽ, -
opt
ŽŽ. 1
=>
ŽŽ2 4
opt
ŽŽ5 8
.
ŽŽ8 9
MapFrom
ŽŽ9 @
(
ŽŽ@ A
src
ŽŽA D
=>
ŽŽE G
src
ŽŽH K
.
ŽŽK L

FanficTags
ŽŽL V
)
ŽŽV W
)
ŽŽW X
.
 
	ForMember
 
(
 
dest
 
=>
  "
dest
# '
.
' (
Chapters
( 0
,
0 1
opt
2 5
=>
6 8
opt
9 <
.
< =
MapFrom
= D
(
D E
src
E H
=>
I K
src
L O
.
O P
Chapters
P X
)
X Y
)
Y Z
;
Z [
}
 	
}
‘‘ 
}’’ ˜
rC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\JsonResponse\JsonResponseError.cs
	namespace 	
FanPage
 
. 
Api 
. 
JsonResponse "
{ 
public 

class 
JsonResponseError "
{ 
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Detail 
{ 
get "
;" #
set$ '
;' (
}) *
} 
}		 ¨
vC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\JsonResponse\JsonResponseContainer.cs
	namespace 	
FanPage
 
. 
Api 
. 
JsonResponse "
{ 
public 

class !
JsonResponseContainer &
<& '
T' (
>( )
{ 
public 
T 
Data 
{ 
get 
; 
set  
;  !
}" #
public 
IReadOnlyCollection "
<" #
JsonResponseError# 4
>4 5
Errors6 <
{= >
get? B
;B C
setD G
;G H
}I J
=K L
ArrayM R
.R S
EmptyS X
<X Y
JsonResponseErrorY j
>j k
(k l
)l m
;m n
public 
bool 
Success 
=> 
!  
Errors  &
.& '
Any' *
(* +
)+ ,
;, -
}		 
public 

class !
JsonResponseContainer &
{ 
public 
object 
Data 
{ 
get  
;  !
set" %
;% &
}' (
=) *
new+ .
object/ 5
(5 6
)6 7
;7 8
public 
IReadOnlyCollection "
<" #
JsonResponseError# 4
>4 5
Errors6 <
{= >
get? B
;B C
setD G
;G H
}I J
=K L
ArrayM R
.R S
EmptyS X
<X Y
JsonResponseErrorY j
>j k
(k l
)l m
;m n
public 
bool 
Success 
=> 
!  
Errors  &
.& '
Any' *
(* +
)+ ,
;, -
} 
} †5
cC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Hubs\CommentHub.cs
	namespace 	
FanPage
 
. 
Api 
. 
Hubs 
; 
[

 
	Authorize

 

(


 !
AuthenticationSchemes

  
=

! "
$str

# +
)

+ ,
]

, -
public 
class 

CommentHub 
: 
Hub 
{ 
private 
readonly 
IComment 
_comment &
;& '
private 
readonly 
IHubContext  
<  !

CommentHub! +
>+ ,
_hubContext- 8
;8 9
private 
readonly 
IMapper 
_mapper $
;$ %
public 


CommentHub 
( 
IComment 
comment &
,& '
IHubContext( 3
<3 4

CommentHub4 >
>> ?

hubContext@ J
,J K
IMapperL S
mapperT Z
)Z [
{ 
_comment 
= 
comment 
; 
_hubContext 
= 

hubContext  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 

AddComment  
(  !
CommentModel! -
comment. 5
)5 6
{ 
var 
request 
= 
Context 
. 
GetHttpContext ,
(, -
)- .
.. /
Request/ 6
;6 7
var 
dt 
= 
_mapper 
. 
Map 
< 

CommentDto '
>' (
(( )
comment) 0
)0 1
;1 2
var 
result 
= 
await 
_comment #
.# $
AddCommentAsync$ 3
(3 4
dt4 6
,6 7
request8 ?
)? @
;@ A
await   
Clients   
.   
All   
.   
	SendAsync   #
(  # $
$str  $ 0
,  0 1
result  2 8
)  8 9
;  9 :
}!! 
public## 

async## 
Task## 
UpdateComment## #
(### $
CommentModel##$ 0
comment##1 8
)##8 9
{$$ 
var%% 
request%% 
=%% 
Context%% 
.%% 
GetHttpContext%% ,
(%%, -
)%%- .
.%%. /
Request%%/ 6
;%%6 7
var&& 
dt&& 
=&& 
_mapper&& 
.&& 
Map&& 
<&& 

CommentDto&& '
>&&' (
(&&( )
comment&&) 0
)&&0 1
;&&1 2
var'' 
result'' 
='' 
await'' 
_comment'' #
.''# $
UpdateCommentAsync''$ 6
(''6 7
dt''7 9
,''9 :
request''; B
)''B C
;''C D
await(( 
Clients(( 
.(( 
All(( 
.(( 
	SendAsync(( #
(((# $
$str(($ 3
,((3 4
result((5 ;
)((; <
;((< =
})) 
public++ 

async++ 
Task++ 
DeleteComment++ #
(++# $
int++$ '
id++( *
)++* +
{,, 
var-- 
request-- 
=-- 
Context-- 
.-- 
GetHttpContext-- ,
(--, -
)--- .
.--. /
Request--/ 6
;--6 7
await.. 
_comment.. 
... 
DeleteCommentAsync.. )
(..) *
id..* ,
,.., -
request... 5
)..5 6
;..6 7
await// 
Clients// 
.// 
All// 
.// 
	SendAsync// #
(//# $
$str//$ 3
,//3 4
id//5 7
)//7 8
;//8 9
}00 
public22 

async22 
Task22  
GetCommentByFanficId22 *
(22* +
int22+ .
id22/ 1
)221 2
{33 
var44 
request44 
=44 
Context44 
.44 
GetHttpContext44 ,
(44, -
)44- .
.44. /
Request44/ 6
;446 7
var66 
result66 
=66 
await66 
_comment66 #
.66# $%
GetCommentByFanficIdAsync66$ =
(66= >
id66> @
,66@ A
request66B I
)66I J
;66J K
await77 
Clients77 
.77 
All77 
.77 
	SendAsync77 #
(77# $
$str77$ :
,77: ;
result77< B
)77B C
;77C D
}88 
public:: 

async:: 
Task:: !
GetCommentsByFanficId:: +
(::+ ,
int::, /
fanficId::0 8
)::8 9
{;; 
var<< 
request<< 
=<< 
Context<< 
.<< 
GetHttpContext<< ,
(<<, -
)<<- .
.<<. /
Request<</ 6
;<<6 7
var== 
result== 
=== 
await== 
_comment== #
.==# $&
GetCommentsByFanficIdAsync==$ >
(==> ?
fanficId==? G
,==G H
request==I P
)==P Q
;==Q R
await>> 
Clients>> 
.>> 
All>> 
.>> 
	SendAsync>> #
(>># $
$str>>$ ;
,>>; <
result>>= C
)>>C D
;>>D E
}?? 
publicAA 

asyncAA 
TaskAA 
ReplyCommentAA "
(AA" #

CommentDtoAA# -

commentDtoAA. 8
)AA8 9
{BB 
varCC 
requestCC 
=CC 
ContextCC 
.CC 
GetHttpContextCC ,
(CC, -
)CC- .
.CC. /
RequestCC/ 6
;CC6 7
varDD 
resultDD 
=DD 
awaitDD 
_commentDD #
.DD# $
ReplyCommentAsyncDD$ 5
(DD5 6

commentDtoDD6 @
,DD@ A
requestDDB I
)DDI J
;DDJ K
awaitEE 
ClientsEE 
.EE 
AllEE 
.EE 
	SendAsyncEE #
(EE# $
$strEE$ 2
,EE2 3
resultEE4 :
)EE: ;
;EE; <
}FF 
}GG éu
`C:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Hubs\ChatHub.cs
	namespace 	
FanPage
 
. 
Api 
. 
Hubs 
; 
[

 
	Authorize

 

(


 !
AuthenticationSchemes

  
=

! "
$str

# +
)

+ ,
]

, -
public 
class 
ChatHub 
: 
Hub 
{ 
private 
readonly 
IChat 
_chat  
;  !
private 
readonly 
IHubContext  
<  !
ChatHub! (
>( )
_hubContext* 5
;5 6
private 
readonly 
IMapper 
_mapper $
;$ %
public 

ChatHub 
( 
IChat 
chat 
, 
IHubContext *
<* +
ChatHub+ 2
>2 3

hubContext4 >
,> ?
IMapper@ G
mapperH N
)N O
{ 
_chat 
= 
chat 
; 
_hubContext 
= 

hubContext  
;  !
_mapper 
= 
mapper 
; 
} 
public 

async 
Task 
JoinChat 
( 
int "
chatId# )
,) *
string+ 1
type2 6
)6 7
{ 
await 
Groups 
. 
AddToGroupAsync $
($ %
Context% ,
., -
ConnectionId- 9
,9 :
chatId; A
.A B
ToStringB J
(J K
)K L
)L M
;M N
var 
request 
= 
Context 
. 
GetHttpContext ,
(, -
)- .
.. /
Request/ 6
;6 7
var 
result 
= 
await 
_chat  
.  !
GetChatAsync! -
(- .
chatId. 4
,4 5
type6 :
,: ;
request< C
)C D
;D E
await   
Clients   
.   
All   
.   
	SendAsync   #
(  # $
$str  $ .
,  . /
result  0 6
)  6 7
;  7 8
}!! 
public%% 

async%% 
Task%% 
	LeaveChat%% 
(%%  
int%%  #
chatId%%$ *
,%%* +
string%%, 2
type%%3 7
)%%7 8
{&& 
await'' 
Groups'' 
.''  
RemoveFromGroupAsync'' )
('') *
Context''* 1
.''1 2
ConnectionId''2 >
,''> ?
chatId''@ F
.''F G
ToString''G O
(''O P
)''P Q
)''Q R
;''R S
var(( 
request(( 
=(( 
Context(( 
.(( 
GetHttpContext(( ,
(((, -
)((- .
.((. /
Request((/ 6
;((6 7
var)) 
result)) 
=)) 
await)) 
_chat))  
.))  !
GetChatAsync))! -
())- .
chatId)). 4
,))4 5
type))6 :
,)): ;
request))< C
)))C D
;))D E
await** 
Clients** 
.** 
All** 
.** 
	SendAsync** #
(**# $
$str**$ /
,**/ 0
result**1 7
)**7 8
;**8 9
}++ 
public-- 

async-- 
Task-- 
GetChat-- 
(-- 
int-- !
id--" $
,--$ %
string--& ,
type--- 1
)--1 2
{.. 
var// 
request// 
=// 
Context// 
.// 
GetHttpContext// ,
(//, -
)//- .
.//. /
Request/// 6
;//6 7
var00 
result00 
=00 
await00 
_chat00  
.00  !
GetChatAsync00! -
(00- .
id00. 0
,000 1
type002 6
,006 7
request008 ?
)00? @
;00@ A
await11 
Clients11 
.11 
All11 
.11 
	SendAsync11 #
(11# $
$str11$ -
,11- .
result11/ 5
)115 6
;116 7
}22 
public44 

async44 
Task44 
GetChats44 
(44 
string44 %
type44& *
)44* +
{55 
var66 
request66 
=66 
Context66 
.66 
GetHttpContext66 ,
(66, -
)66- .
.66. /
Request66/ 6
;666 7
var77 
result77 
=77 
await77 
_chat77  
.77  !
GetChatsAsync77! .
(77. /
type77/ 3
,773 4
request775 <
)77< =
;77= >
await88 
Clients88 
.88 
All88 
.88 
	SendAsync88 #
(88# $
$str88$ .
,88. /
result880 6
)886 7
;887 8
}99 
public;; 

async;; 
Task;; 
CreateMessage;; #
(;;# $
int;;$ '
chatId;;( .
,;;. /
string;;0 6
type;;7 ;
,;;; <
MessageModel;;= I
message;;J Q
);;Q R
{<< 
var== 
request== 
=== 
Context== 
.== 
GetHttpContext== ,
(==, -
)==- .
.==. /
Request==/ 6
;==6 7
var>> 
dt>> 
=>> 
_mapper>> 
.>> 
Map>> 
<>> 

MessageDto>> '
>>>' (
(>>( )
message>>) 0
)>>0 1
;>>1 2
await?? 
_chat?? 
.?? 
CreateMessageAsync?? &
(??& '
chatId??' -
,??- .
type??/ 3
,??3 4
dt??5 7
,??7 8
request??9 @
)??@ A
;??A B
await@@ 
Clients@@ 
.@@ 
All@@ 
.@@ 
	SendAsync@@ #
(@@# $
$str@@$ 3
,@@3 4
message@@5 <
)@@< =
;@@= >
}AA 
publicCC 

asyncCC 
TaskCC 

CreateChatCC  
(CC  !
	ChatModelCC! *
chatCC+ /
)CC/ 0
{DD 
varEE 
requestEE 
=EE 
ContextEE 
.EE 
GetHttpContextEE ,
(EE, -
)EE- .
.EE. /
RequestEE/ 6
;EE6 7
varFF 
dtFF 
=FF 
_mapperFF 
.FF 
MapFF 
<FF 
ChatDtoFF $
>FF$ %
(FF% &
chatFF& *
)FF* +
;FF+ ,
varGG 
resultGG 
=GG 
awaitGG 
_chatGG  
.GG  !
CreateAsyncGG! ,
(GG, -
dtGG- /
,GG/ 0
requestGG1 8
)GG8 9
;GG9 :
awaitHH 
ClientsHH 
.HH 
AllHH 
.HH 
	SendAsyncHH #
(HH# $
$strHH$ 0
,HH0 1
resultHH2 8
)HH8 9
;HH9 :
}II 
publicKK 

asyncKK 
TaskKK 

UpdateChatKK  
(KK  !
	ChatModelKK! *
chatKK+ /
)KK/ 0
{LL 
varMM 
requestMM 
=MM 
ContextMM 
.MM 
GetHttpContextMM ,
(MM, -
)MM- .
.MM. /
RequestMM/ 6
;MM6 7
varNN 
dtNN 
=NN 
_mapperNN 
.NN 
MapNN 
<NN 
ChatDtoNN $
>NN$ %
(NN% &
chatNN& *
)NN* +
;NN+ ,
varOO 
resultOO 
=OO 
awaitOO 
_chatOO  
.OO  !
UpdateAsyncOO! ,
(OO, -
dtOO- /
,OO/ 0
requestOO1 8
)OO8 9
;OO9 :
awaitPP 
ClientsPP 
.PP 
AllPP 
.PP 
	SendAsyncPP #
(PP# $
$strPP$ 0
,PP0 1
resultPP2 8
)PP8 9
;PP9 :
}QQ 
publicSS 

asyncSS 
TaskSS 

DeleteChatSS  
(SS  !
intSS! $
idSS% '
,SS' (
stringSS) /
typeSS0 4
)SS4 5
{TT 
varUU 
requestUU 
=UU 
ContextUU 
.UU 
GetHttpContextUU ,
(UU, -
)UU- .
.UU. /
RequestUU/ 6
;UU6 7
awaitVV 
_chatVV 
.VV 
DeleteAsyncVV 
(VV  
idVV  "
,VV" #
typeVV$ (
,VV( )
requestVV* 1
)VV1 2
;VV2 3
awaitWW 
ClientsWW 
.WW 
AllWW 
.WW 
	SendAsyncWW #
(WW# $
$strWW$ 0
,WW0 1
idWW2 4
)WW4 5
;WW5 6
}XX 
publicZZ 

asyncZZ 
TaskZZ 
InviteUserToChatZZ &
(ZZ& '
intZZ' *
chatIdZZ+ 1
,ZZ1 2
stringZZ3 9
userIdZZ: @
,ZZ@ A
stringZZB H
userNameZZI Q
)ZZQ R
{[[ 
var\\ 
request\\ 
=\\ 
Context\\ 
.\\ 
GetHttpContext\\ ,
(\\, -
)\\- .
.\\. /
Request\\/ 6
;\\6 7
await]] 
_chat]] 
.]] !
InviteUserToChatAsync]] )
(]]) *
chatId]]* 0
,]]0 1
userId]]2 8
,]]8 9
userName]]: B
,]]B C
request]]D K
)]]K L
;]]L M
await^^ 
Clients^^ 
.^^ 
All^^ 
.^^ 
	SendAsync^^ #
(^^# $
$str^^$ 6
,^^6 7
chatId^^8 >
,^^> ?
userId^^@ F
,^^F G
userName^^H P
)^^P Q
;^^Q R
}__ 
publicaa 

asyncaa 
Taskaa 
AcceptUserToChataa &
(aa& '
intaa' *
chatIdaa+ 1
,aa1 2
stringaa3 9
userIdaa: @
)aa@ A
{bb 
varcc 
requestcc 
=cc 
Contextcc 
.cc 
GetHttpContextcc ,
(cc, -
)cc- .
.cc. /
Requestcc/ 6
;cc6 7
awaitdd 
_chatdd 
.dd !
AcceptUserToChatAsyncdd )
(dd) *
chatIddd* 0
,dd0 1
userIddd2 8
,dd8 9
requestdd: A
)ddA B
;ddB C
awaitee 
Clientsee 
.ee 
Allee 
.ee 
	SendAsyncee #
(ee# $
$stree$ 6
,ee6 7
chatIdee8 >
,ee> ?
userIdee@ F
)eeF G
;eeG H
}ff 
publichh 

asynchh 
Taskhh 
DeclineUserToChathh '
(hh' (
inthh( +
chatIdhh, 2
,hh2 3
stringhh4 :
userIdhh; A
)hhA B
{ii 
varjj 
requestjj 
=jj 
Contextjj 
.jj 
GetHttpContextjj ,
(jj, -
)jj- .
.jj. /
Requestjj/ 6
;jj6 7
awaitkk 
_chatkk 
.kk "
DeclineUserToChatAsynckk *
(kk* +
chatIdkk+ 1
,kk1 2
userIdkk3 9
,kk9 :
requestkk; B
)kkB C
;kkC D
awaitll 
Clientsll 
.ll 
Allll 
.ll 
	SendAsyncll #
(ll# $
$strll$ 7
,ll7 8
chatIdll9 ?
,ll? @
userIdllA G
)llG H
;llH I
}mm 
publicoo 

asyncoo 
Taskoo 
GetUserChatRequestoo (
(oo( )
stringoo) /
userIdoo0 6
)oo6 7
{pp 
varqq 
requestqq 
=qq 
Contextqq 
.qq 
GetHttpContextqq ,
(qq, -
)qq- .
.qq. /
Requestqq/ 6
;qq6 7
varrr 
resultrr 
=rr 
awaitrr 
_chatrr  
.rr  !
GetChatRequestAsyncrr! 4
(rr4 5
userIdrr5 ;
,rr; <
requestrr= D
)rrD E
;rrE F
awaitss 
Clientsss 
.ss 
Allss 
.ss 
	SendAsyncss #
(ss# $
$strss$ 8
,ss8 9
resultss: @
)ss@ A
;ssA B
}tt 
publicvv 

asyncvv 
Taskvv 
RemoveUserFromChatvv (
(vv( )
intvv) ,
chatIdvv- 3
,vv3 4
stringvv5 ;
userIdvv< B
,vvB C
stringvvD J
typevvK O
)vvO P
{ww 
varxx 
requestxx 
=xx 
Contextxx 
.xx 
GetHttpContextxx ,
(xx, -
)xx- .
.xx. /
Requestxx/ 6
;xx6 7
awaityy 
_chatyy 
.yy #
RemoveUserFromChatAsyncyy +
(yy+ ,
chatIdyy, 2
,yy2 3
userIdyy4 :
,yy: ;
typeyy< @
,yy@ A
requestyyB I
)yyI J
;yyJ K
awaitzz 
Clientszz 
.zz 
Allzz 
.zz 
	SendAsynczz #
(zz# $
$strzz$ 8
,zz8 9
chatIdzz: @
,zz@ A
userIdzzB H
)zzH I
;zzI J
}{{ 
public}} 

async}} 
Task}} 

SearchChat}}  
(}}  !
string}}! '
search}}( .
)}}. /
{~~ 
var 
request 
= 
Context 
. 
GetHttpContext ,
(, -
)- .
.. /
Request/ 6
;6 7
var
€€ 
result
€€ 
=
€€ 
await
€€ 
_chat
€€  
.
€€  !
SearchChatAsync
€€! 0
(
€€0 1
search
€€1 7
,
€€7 8
request
€€9 @
)
€€@ A
;
€€A B
await
 
Clients
 
.
 
All
 
.
 
	SendAsync
 #
(
# $
$str
$ 0
,
0 1
result
2 8
)
8 9
;
9 :
}
‚‚ 
}ƒƒ ë3
vC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\User\ProfileController.cs
	namespace 	
FanPage
 
. 
Api 
. 
Controllers !
.! "
User" &
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
Route 
) 
] 
public 

class 
ProfileController "
:# $
BaseController% 3
{ 
private 
const 
string 
Route "
=# $
$str% 1
;1 2
private 
readonly 
IAccount !
_accountService" 1
;1 2
private 
readonly 
IMapper  
_mapper! (
;( )
public 
ProfileController  
(  !
IAccount! )
accountService* 8
,8 9
IMapper: A
mapperB H
)H I
{ 	
_accountService 
= 
accountService ,
;, -
_mapper 
= 
mapper 
; 
} 	
[   	
HttpGet  	 
]   
[!! 	
AllowAnonymous!!	 
]!! 
["" 	
Route""	 
("" 
$str"" 
)"" 
]"" 
[## 	 
ProducesResponseType##	 
(## 
$num## !
)##! "
]##" #
[$$ 	 
ProducesResponseType$$	 
($$ 
typeof$$ $
($$$ %!
JsonResponseContainer$$% :
[$$: ;
]$$; <
)$$< =
,$$= >
$num$$? B
)$$B C
]$$C D
[%% 	 
ProducesResponseType%%	 
(%% 
typeof%% $
(%%$ %!
JsonResponseContainer%%% :
)%%: ;
,%%; <
$num%%= @
)%%@ A
]%%A B
public&& 
async&& 
Task&& 
<&& 
IActionResult&& '
>&&' (
ChangeEmail&&) 4
(&&4 5
[&&5 6
	FromQuery&&6 ?
]&&? @
ChangeEmailModel&&A Q
content&&R Y
)&&Y Z
{'' 	
var(( 
dto(( 
=(( 
_mapper(( 
.(( 
Map(( !
<((! "
ChangeEmailDto((" 0
>((0 1
(((1 2
content((2 9
)((9 :
;((: ;
await)) 
_accountService)) !
.))! "
ChangeEmail))" -
())- .
dto)). 1
)))1 2
;))2 3
return** 
Ok** 
(** 
)** 
;** 
}++ 	
[11 	
HttpPut11	 
]11 
[22 	
	Authorize22	 
(22 !
AuthenticationSchemes22 (
=22) *
$str22+ 3
)223 4
]224 5
[33 	
Route33	 
(33 
$str33 
)33  
]33  !
[44 	 
ProducesResponseType44	 
(44 
$num44 !
)44! "
]44" #
[55 	 
ProducesResponseType55	 
(55 
$num55 !
)55! "
]55" #
[66 	 
ProducesResponseType66	 
(66 
typeof66 $
(66$ %!
JsonResponseContainer66% :
[66: ;
]66; <
)66< =
,66= >
$num66? B
)66B C
]66C D
[77 	 
ProducesResponseType77	 
(77 
typeof77 $
(77$ %!
JsonResponseContainer77% :
)77: ;
,77; <
$num77= @
)77@ A
]77A B
public88 
async88 
Task88 
<88 
IActionResult88 '
>88' (
ChangePassword88) 7
(887 8
[888 9
FromBody889 A
]88A B
PasswordChangeModel88C V
content88W ^
)88^ _
{99 	
var:: 
dto:: 
=:: 
_mapper:: 
.:: 
Map:: !
<::! "
ChangePasswordDto::" 3
>::3 4
(::4 5
content::5 <
)::< =
;::= >
await;; 
_accountService;; !
.;;! "
ChangePassword;;" 0
(;;0 1
dto;;1 4
,;;4 5
HttpContext;;6 A
.;;A B
Request;;B I
);;I J
;;;J K
return<< 
Ok<< 
(<< 
)<< 
;<< 
}== 	
[?? 	
HttpGet??	 
]?? 
[@@ 	
	Authorize@@	 
(@@ !
AuthenticationSchemes@@ (
=@@) *
$str@@+ 3
)@@3 4
]@@4 5
[AA 	
RouteAA	 
(AA 
$strAA 
)AA 
]AA 
[BB 	 
ProducesResponseTypeBB	 
(BB 
typeofBB $
(BB$ %!
JsonResponseContainerBB% :
<BB: ;
LogInViewModelBB; I
>BBI J
)BBJ K
,BBK L
$numBBM P
)BBP Q
]BBQ R
[CC 	 
ProducesResponseTypeCC	 
(CC 
$numCC !
)CC! "
]CC" #
[DD 	 
ProducesResponseTypeDD	 
(DD 
typeofDD $
(DD$ %!
JsonResponseContainerDD% :
[DD: ;
]DD; <
)DD< =
,DD= >
$numDD? B
)DDB C
]DDC D
[EE 	 
ProducesResponseTypeEE	 
(EE 
typeofEE $
(EE$ %!
JsonResponseContainerEE% :
)EE: ;
,EE; <
$numEE= @
)EE@ A
]EEA B
publicFF 
asyncFF 
TaskFF 
<FF 
IActionResultFF '
>FF' (

GetProfileFF) 3
(FF3 4
[FF4 5

FromHeaderFF5 ?
]FF? @
stringFFA G
userNameFFH P
)FFP Q
{GG 	
varHH 
	retrievalHH 
=HH 
awaitHH !
_accountServiceHH" 1
.HH1 2
GetUserInfoHH2 =
(HH= >
userNameHH> F
)HHF G
;HHG H
varII 
responseII 
=II 
_mapperII "
.II" #
MapII# &
<II& '
LogInResponseDtoII' 7
>II7 8
(II8 9
	retrievalII9 B
)IIB C
;IIC D
returnJJ 
OkJJ 
(JJ 
responseJJ 
)JJ 
;JJ  
}KK 	
}MM 
}NN ”U
uC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\User\FriendController.cs
	namespace 	
FanPage
 
. 
Api 
. 
Controllers !
.! "
User" &
{ 
[		 
ApiController		 
]		 
[

 
Route

 

(


 
Route

 
)

 
]

 
public 

class 
FriendController !
:" #
BaseController$ 2
{ 
private 
const 
string 
Route "
=# $
$str% 0
;0 1
private 
readonly 
IFriend  
_friend! (
;( )
public 
FriendController 
(  
IFriend  '
friend( .
). /
{ 	
_friend 
= 
friend 
; 
} 	
[ 	
HttpGet	 
] 
[ 	
Route	 
( 
$str 
) 
] 
[ 	 
ProducesResponseType	 
( 
$num !
)! "
]" #
[ 	 
ProducesResponseType	 
( 
typeof $
($ %!
JsonResponseContainer% :
[: ;
]; <
)< =
,= >
$num? B
)B C
]C D
[ 	 
ProducesResponseType	 
( 
typeof $
($ %!
JsonResponseContainer% :
): ;
,; <
$num= @
)@ A
]A B
[ 	
	Authorize	 
( !
AuthenticationSchemes (
=) *
$str+ 3
)3 4
]4 5
public 
async 
Task 
< 
IActionResult '
>' (
List( ,
(, -
)- .
{   	
var!! 
list!! 
=!! 
await!! 
_friend!! $
.!!$ %
FriendsList!!% 0
(!!0 1
HttpContext!!1 <
.!!< =
Request!!= D
)!!D E
;!!E F
return"" 
Ok"" 
("" 
list"" 
)"" 
;"" 
}## 	
[)) 	
HttpPost))	 
])) 
[** 	
Route**	 
(** 
$str** 
)** 
]** 
[++ 	 
ProducesResponseType++	 
(++ 
$num++ !
)++! "
]++" #
[,, 	 
ProducesResponseType,,	 
(,, 
typeof,, $
(,,$ %!
JsonResponseContainer,,% :
[,,: ;
],,; <
),,< =
,,,= >
$num,,? B
),,B C
],,C D
[-- 	 
ProducesResponseType--	 
(-- 
typeof-- $
(--$ %!
JsonResponseContainer--% :
)--: ;
,--; <
$num--= @
)--@ A
]--A B
[.. 	
	Authorize..	 
(.. !
AuthenticationSchemes.. (
=..) *
$str..+ 3
)..3 4
]..4 5
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
	FriendAdd00) 2
(002 3
string003 9

friendName00: D
)00D E
{11 	
await22 
_friend22 
.22 
	AddFriend22 #
(22# $
HttpContext22$ /
.22/ 0
Request220 7
,227 8

friendName229 C
)22C D
;22D E
return33 
Ok33 
(33 
)33 
;33 
}44 	
[99 	
HttpGet99	 
]99 
[:: 	
Route::	 
(:: 
$str:: 
):: 
]:: 
[;; 	 
ProducesResponseType;;	 
(;; 
$num;; !
);;! "
];;" #
[<< 	 
ProducesResponseType<<	 
(<< 
typeof<< $
(<<$ %!
JsonResponseContainer<<% :
[<<: ;
]<<; <
)<<< =
,<<= >
$num<<? B
)<<B C
]<<C D
[== 	 
ProducesResponseType==	 
(== 
typeof== $
(==$ %!
JsonResponseContainer==% :
)==: ;
,==; <
$num=== @
)==@ A
]==A B
[>> 	
	Authorize>>	 
(>> !
AuthenticationSchemes>> (
=>>) *
$str>>+ 3
)>>3 4
]>>4 5
public?? 
async?? 
Task?? 
<?? 
IActionResult?? '
>??' (
UserSend??) 1
(??1 2
)??2 3
{@@ 	
varAA 
listAA 
=AA 
awaitAA 
_friendAA $
.AA$ %
GetFriendRequestsAA% 6
(AA6 7
HttpContextAA7 B
.AAB C
RequestAAC J
)AAJ K
;AAK L
returnBB 
OkBB 
(BB 
listBB 
)BB 
;BB 
}CC 	
[II 	

HttpDeleteII	 
]II 
[JJ 	
RouteJJ	 
(JJ 
$strJJ 
)JJ 
]JJ 
[KK 	 
ProducesResponseTypeKK	 
(KK 
$numKK !
)KK! "
]KK" #
[LL 	 
ProducesResponseTypeLL	 
(LL 
typeofLL $
(LL$ %!
JsonResponseContainerLL% :
[LL: ;
]LL; <
)LL< =
,LL= >
$numLL? B
)LLB C
]LLC D
[MM 	 
ProducesResponseTypeMM	 
(MM 
typeofMM $
(MM$ %!
JsonResponseContainerMM% :
)MM: ;
,MM; <
$numMM= @
)MM@ A
]MMA B
[NN 	
	AuthorizeNN	 
(NN !
AuthenticationSchemesNN (
=NN) *
$strNN+ 3
)NN3 4
]NN4 5
publicOO 
asyncOO 
TaskOO 
<OO 
IActionResultOO '
>OO' (
CancelOO) /
(OO/ 0
stringOO0 6

friendNameOO7 A
)OOA B
{PP 	
_friendQQ 
.QQ 

CancelSendQQ 
(QQ 
HttpContextQQ *
.QQ* +
RequestQQ+ 2
,QQ2 3

friendNameQQ4 >
)QQ> ?
;QQ? @
returnRR 
OkRR 
(RR 
)RR 
;RR 
}SS 	
[XX 	
HttpGetXX	 
]XX 
[YY 	
RouteYY	 
(YY 
$strYY 
)YY 
]YY 
[ZZ 	 
ProducesResponseTypeZZ	 
(ZZ 
$numZZ !
)ZZ! "
]ZZ" #
[[[ 	 
ProducesResponseType[[	 
([[ 
typeof[[ $
([[$ %!
JsonResponseContainer[[% :
[[[: ;
][[; <
)[[< =
,[[= >
$num[[? B
)[[B C
][[C D
[\\ 	 
ProducesResponseType\\	 
(\\ 
typeof\\ $
(\\$ %!
JsonResponseContainer\\% :
)\\: ;
,\\; <
$num\\= @
)\\@ A
]\\A B
[]] 	
	Authorize]]	 
(]] !
AuthenticationSchemes]] (
=]]) *
$str]]+ 3
)]]3 4
]]]4 5
public^^ 
async^^ 
Task^^ 
<^^ 
IActionResult^^ '
>^^' (

SendToUser^^) 3
(^^3 4
)^^4 5
{__ 	
var`` 
list`` 
=`` 
await`` 
_friend`` $
.``$ %
GetUserRequests``% 4
(``4 5
HttpContext``5 @
.``@ A
Request``A H
)``H I
;``I J
returnaa 
Okaa 
(aa 
listaa 
)aa 
;aa 
}bb 	
[hh 	
HttpPuthh	 
]hh 
[ii 	
Routeii	 
(ii 
$strii 
)ii 
]ii 
[jj 	 
ProducesResponseTypejj	 
(jj 
$numjj !
)jj! "
]jj" #
[kk 	 
ProducesResponseTypekk	 
(kk 
typeofkk $
(kk$ %!
JsonResponseContainerkk% :
[kk: ;
]kk; <
)kk< =
,kk= >
$numkk? B
)kkB C
]kkC D
[ll 	 
ProducesResponseTypell	 
(ll 
typeofll $
(ll$ %!
JsonResponseContainerll% :
)ll: ;
,ll; <
$numll= @
)ll@ A
]llA B
[mm 	
	Authorizemm	 
(mm !
AuthenticationSchemesmm (
=mm) *
$strmm+ 3
)mm3 4
]mm4 5
publicnn 
asyncnn 
Tasknn 
<nn 
IActionResultnn '
>nn' (
Acceptnn) /
(nn/ 0
stringnn0 6

friendNamenn7 A
)nnA B
{oo 	
awaitpp 
_friendpp 
.pp 
AcceptFriendpp &
(pp& '
HttpContextpp' 2
.pp2 3
Requestpp3 :
,pp: ;

friendNamepp< F
)ppF G
;ppG H
returnqq 
Okqq 
(qq 
)qq 
;qq 
}rr 	
[xx 	

HttpDeletexx	 
]xx 
[yy 	
Routeyy	 
(yy 
$stryy 
)yy 
]yy 
[zz 	 
ProducesResponseTypezz	 
(zz 
$numzz !
)zz! "
]zz" #
[{{ 	 
ProducesResponseType{{	 
({{ 
typeof{{ $
({{$ %!
JsonResponseContainer{{% :
[{{: ;
]{{; <
){{< =
,{{= >
$num{{? B
){{B C
]{{C D
[|| 	 
ProducesResponseType||	 
(|| 
typeof|| $
(||$ %!
JsonResponseContainer||% :
)||: ;
,||; <
$num||= @
)||@ A
]||A B
[}} 	
	Authorize}}	 
(}} !
AuthenticationSchemes}} (
=}}) *
$str}}+ 3
)}}3 4
]}}4 5
public~~ 
async~~ 
Task~~ 
<~~ 
IActionResult~~ '
>~~' (
Remove~~) /
(~~/ 0
string~~0 6

friendName~~7 A
)~~A B
{ 	
await
€€ 
_friend
€€ 
.
€€ 
RemoveFriend
€€ &
(
€€& '
HttpContext
€€' 2
.
€€2 3
Request
€€3 :
,
€€: ;

friendName
€€< F
)
€€F G
;
€€G H
return
 
Ok
 
(
 
)
 
;
 
}
‚‚ 	
}
ƒƒ 
}„„ ¤)
wC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\User\FollowerController.cs
	namespace 	
FanPage
 
. 
Api 
. 
Controllers !
.! "
User" &
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
Route		 
)		 
]		 
public

 

class

 
FollowerController

 #
:

$ %
BaseController

& 4
{ 
private 
const 
string 
Route "
=# $
$str% 2
;2 3
private 
readonly 
	IFollower "
	_follower# ,
;, -
public 
FollowerController !
(! "
	IFollower" +
follower, 4
)4 5
{ 	
	_follower 
= 
follower  
;  !
} 	
[ 	
HttpGet	 
] 
[ 	
Route	 
( 
$str 
) 
] 
[ 	 
ProducesResponseType	 
( 
$num !
)! "
]" #
[ 	 
ProducesResponseType	 
( 
typeof $
($ %!
JsonResponseContainer% :
[: ;
]; <
)< =
,= >
$num? B
)B C
]C D
[ 	 
ProducesResponseType	 
( 
typeof $
($ %!
JsonResponseContainer% :
): ;
,; <
$num= @
)@ A
]A B
[ 	
	Authorize	 
( !
AuthenticationSchemes (
=) *
$str+ 3
)3 4
]4 5
public 
async 
Task 
< 
IActionResult '
>' (
FollowerList) 5
(5 6
)6 7
{ 	
var   
list   
=   
await   
	_follower   &
.  & '
FollowerList  ' 3
(  3 4
HttpContext  4 ?
.  ? @
Request  @ G
)  G H
;  H I
return!! 
Ok!! 
(!! 
list!! 
)!! 
;!! 
}"" 	
[)) 	
HttpPut))	 
])) 
[** 	
Route**	 
(** 
$str** 
)** 
]** 
[++ 	 
ProducesResponseType++	 
(++ 
$num++ !
)++! "
]++" #
[,, 	 
ProducesResponseType,,	 
(,, 
typeof,, $
(,,$ %!
JsonResponseContainer,,% :
[,,: ;
],,; <
),,< =
,,,= >
$num,,? B
),,B C
],,C D
[-- 	 
ProducesResponseType--	 
(-- 
typeof-- $
(--$ %!
JsonResponseContainer--% :
)--: ;
,--; <
$num--= @
)--@ A
]--A B
[.. 	
	Authorize..	 
(.. !
AuthenticationSchemes.. (
=..) *
$str..+ 3
)..3 4
]..4 5
public// 
async// 
Task// 
<// 
IActionResult// '
>//' (
	Subscribe//) 2
(//2 3
int//3 6

followerId//7 A
)//A B
{00 	
await11 
	_follower11 
.11 
	Subscribe11 %
(11% &
HttpContext11& 1
.111 2
Request112 9
,119 :

followerId11; E
)11E F
;11F G
return22 
Ok22 
(22 
)22 
;22 
}33 	
[:: 	

HttpDelete::	 
]:: 
[;; 	
Route;;	 
(;; 
$str;; 
);; 
];; 
[<< 	 
ProducesResponseType<<	 
(<< 
$num<< !
)<<! "
]<<" #
[== 	 
ProducesResponseType==	 
(== 
typeof== $
(==$ %!
JsonResponseContainer==% :
[==: ;
]==; <
)==< =
,=== >
$num==? B
)==B C
]==C D
[>> 	 
ProducesResponseType>>	 
(>> 
typeof>> $
(>>$ %!
JsonResponseContainer>>% :
)>>: ;
,>>; <
$num>>= @
)>>@ A
]>>A B
[?? 	
	Authorize??	 
(?? !
AuthenticationSchemes?? (
=??) *
$str??+ 3
)??3 4
]??4 5
public@@ 
async@@ 
Task@@ 
<@@ 
IActionResult@@ '
>@@' (
Unsubscribe@@) 4
(@@4 5
int@@5 8

followerId@@9 C
)@@C D
{AA 	
awaitBB 
	_followerBB 
.BB 
UnsubscribeBB '
(BB' (
HttpContextBB( 3
.BB3 4
RequestBB4 ;
,BB; <

followerIdBB= G
)BBG H
;BBH I
returnCC 
OkCC 
(CC 
)CC 
;CC 
}DD 	
}EE 
}FF ñ)
|C:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\User\CustomizationController.cs
	namespace 	
FanPage
 
. 
Api 
. 
Controllers !
.! "
User" &
;& '
[

 
ApiController

 
]

 
[ 
Route 
( 
Route 
) 
] 
public 
class #
CustomizationController $
:% &
ControllerBase' 5
{ 
private 
const 
string 
Route 
=  
$str! 7
;7 8
private 
readonly "
ICustomizationSettings +
_customization, :
;: ;
private 
readonly 
IMapper 
_mapper $
;$ %
public 
#
CustomizationController "
(" #"
ICustomizationSettings# 9
customization: G
,G H
IMapperI P
mapperQ W
)W X
{ 
_customization 
= 
customization &
;& '
_mapper 
= 
mapper 
; 
} 
[!! 
HttpPut!! 
]!! 
["" 
Route"" 

(""
 
$str"" 
)"" 
]""  
[##  
ProducesResponseType## 
(## 
typeof##  
(##  !!
JsonResponseContainer##! 6
<##6 7&
CustomUserSettingViewModel##7 Q
>##Q R
)##R S
,##S T
$num##U X
)##X Y
]##Y Z
[$$  
ProducesResponseType$$ 
($$ 
typeof$$  
($$  !!
JsonResponseContainer$$! 6
[$$6 7
]$$7 8
)$$8 9
,$$9 :
$num$$; >
)$$> ?
]$$? @
[%%  
ProducesResponseType%% 
(%% 
typeof%%  
(%%  !!
JsonResponseContainer%%! 6
)%%6 7
,%%7 8
$num%%9 <
)%%< =
]%%= >
[&& 
	Authorize&& 
(&& !
AuthenticationSchemes&& $
=&&% &
$str&&' /
)&&/ 0
]&&0 1
public'' 

async'' 
Task'' 
<'' 
IActionResult'' #
>''# $
ChangeBannerImage''% 6
(''6 7
int''7 :#
customizationSettingsId''; R
,''R S
byte''T X
[''X Y
]''Y Z
bannerImage''[ f
)''f g
{(( 
var)) 
	retrieval)) 
=)) 
await** 
_customization**  
.**  !
ChangeBannerImage**! 2
(**2 3#
customizationSettingsId**3 J
,**J K
bannerImage**L W
,**W X
HttpContext**Y d
.**d e
Request**e l
)**l m
;**m n
var++ 
response++ 
=++ 
_mapper++ 
.++ 
Map++ "
<++" #&
CustomUserSettingViewModel++# =
>++= >
(++> ?
	retrieval++? H
)++H I
;++I J
return,, 
Ok,, 
(,, 
response,, 
),, 
;,, 
}-- 
[44 
HttpGet44 
]44 
[55 
Route55 

(55
 
$str55 %
)55% &
]55& '
[66  
ProducesResponseType66 
(66 
typeof66  
(66  !!
JsonResponseContainer66! 6
<666 7&
CustomUserSettingViewModel667 Q
>66Q R
)66R S
,66S T
$num66U X
)66X Y
]66Y Z
[77  
ProducesResponseType77 
(77 
typeof77  
(77  !!
JsonResponseContainer77! 6
[776 7
]777 8
)778 9
,779 :
$num77; >
)77> ?
]77? @
[88  
ProducesResponseType88 
(88 
typeof88  
(88  !!
JsonResponseContainer88! 6
)886 7
,887 8
$num889 <
)88< =
]88= >
[99 
	Authorize99 
(99 !
AuthenticationSchemes99 $
=99% &
$str99' /
)99/ 0
]990 1
public:: 

async:: 
Task:: 
<:: 
IActionResult:: #
>::# $$
GetCustomizationSettings::% =
(::= >
int::> A#
customizationSettingsId::B Y
)::Y Z
{;; 
var<< 
	retrieval<< 
=<< 
await<< 
_customization<< ,
.<<, -$
GetCustomizationSettings<<- E
(<<E F#
customizationSettingsId<<F ]
,<<] ^
HttpContext<<_ j
.<<j k
Request<<k r
)<<r s
;<<s t
var== 
response== 
=== 
_mapper== 
.== 
Map== "
<==" #&
CustomUserSettingViewModel==# =
>=== >
(==> ?
	retrieval==? H
)==H I
;==I J
return>> 
Ok>> 
(>> 
response>> 
)>> 
;>> 
}?? 
}@@ ÿ(
wC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\User\BookmarkController.cs
	namespace 	
FanPage
 
. 
Api 
. 
Controllers !
.! "
User" &
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
Route		 
)		 
]		 
public

 

class

 
BookmarkController

 #
:

$ %
BaseController

& 4
{ 
private 
const 
string 
Route "
=# $
$str% 2
;2 3
private 
readonly 
	IBookmark "
	_bookmark# ,
;, -
public 
BookmarkController !
(! "
	IBookmark" +
bookmark, 4
)4 5
{ 	
	_bookmark 
= 
bookmark  
;  !
} 	
[ 	
HttpPost	 
] 
[ 	
Route	 
( 
$str 
) 
] 
[ 	 
ProducesResponseType	 
( 
$num !
)! "
]" #
[ 	 
ProducesResponseType	 
( 
typeof $
($ %!
JsonResponseContainer% :
[: ;
]; <
)< =
,= >
$num? B
)B C
]C D
[ 	 
ProducesResponseType	 
( 
typeof $
($ %!
JsonResponseContainer% :
): ;
,; <
$num= @
)@ A
]A B
[ 	
	Authorize	 
( !
AuthenticationSchemes (
=) *
$str+ 3
)3 4
]4 5
public 
async 
Task 
< 
IActionResult '
>' (
Add) ,
(, -
int- 0
fanficId1 9
)9 :
{   	
await!! 
	_bookmark!! 
.!! 
Add!! 
(!!  
HttpContext!!  +
.!!+ ,
Request!!, 3
,!!3 4
fanficId!!5 =
)!!= >
;!!> ?
return"" 
Ok"" 
("" 
)"" 
;"" 
}## 	
[** 	

HttpDelete**	 
]** 
[++ 	
Route++	 
(++ 
$str++ 
)++ 
]++ 
[,, 	 
ProducesResponseType,,	 
(,, 
$num,, !
),,! "
],," #
[-- 	 
ProducesResponseType--	 
(-- 
typeof-- $
(--$ %!
JsonResponseContainer--% :
[--: ;
]--; <
)--< =
,--= >
$num--? B
)--B C
]--C D
[.. 	 
ProducesResponseType..	 
(.. 
typeof.. $
(..$ %!
JsonResponseContainer..% :
)..: ;
,..; <
$num..= @
)..@ A
]..A B
[// 	
	Authorize//	 
(// !
AuthenticationSchemes// (
=//) *
$str//+ 3
)//3 4
]//4 5
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
Delete00) /
(00/ 0
int000 3
fanficId004 <
)00< =
{11 	
await22 
	_bookmark22 
.22 
Delete22 "
(22" #
HttpContext22# .
.22. /
Request22/ 6
,226 7
fanficId228 @
)22@ A
;22A B
return33 
Ok33 
(33 
)33 
;33 
}44 	
[:: 	
HttpGet::	 
]:: 
[;; 	
Route;;	 
(;; 
$str;; 
);; 
];; 
[<< 	 
ProducesResponseType<<	 
(<< 
$num<< !
)<<! "
]<<" #
[== 	 
ProducesResponseType==	 
(== 
typeof== $
(==$ %!
JsonResponseContainer==% :
[==: ;
]==; <
)==< =
,=== >
$num==? B
)==B C
]==C D
[>> 	 
ProducesResponseType>>	 
(>> 
typeof>> $
(>>$ %!
JsonResponseContainer>>% :
)>>: ;
,>>; <
$num>>= @
)>>@ A
]>>A B
[?? 	
	Authorize??	 
(?? !
AuthenticationSchemes?? (
=??) *
$str??+ 3
)??3 4
]??4 5
public@@ 
async@@ 
Task@@ 
<@@ 
IActionResult@@ '
>@@' (
List@@) -
(@@- .
)@@. /
{AA 	
varBB 
listBB 
=BB 
awaitBB 
	_bookmarkBB &
.BB& '
BookmarkListBB' 3
(BB3 4
HttpContextBB4 ?
.BB? @
RequestBB@ G
)BBG H
;BBH I
returnCC 
OkCC 
(CC 
listCC 
)CC 
;CC 
}DD 	
}EE 
}FF Á>
sC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\User\AuthController.cs
	namespace

 	
FanPage


 
.

 
Api

 
.

 
Controllers

 !
.

! "
User

" &
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
Route 
) 
] 
public 

sealed 
class 
AuthController &
:' (
ControllerBase) 7
{ 
private 
const 
string 
Route "
=# $
$str% .
;. /
private 
readonly 
IAuth 
_authService +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
public 
AuthController 
( 
IMapper %
mapper& ,
,, -
IAuth. 3
authService4 ?
)? @
{ 	
_mapper 
= 
mapper 
; 
_authService 
= 
authService &
;& '
} 	
[   	
HttpPost  	 
]   
[!! 	
Route!!	 
(!! 
$str!! 
)!! 
]!! 
["" 	 
ProducesResponseType""	 
("" 
typeof"" $
(""$ %!
JsonResponseContainer""% :
<"": ;
LogInViewModel""; I
>""I J
)""J K
,""K L
$num""M P
)""P Q
]""Q R
[## 	 
ProducesResponseType##	 
(## 
typeof## $
(##$ %!
JsonResponseContainer##% :
)##: ;
,##; <
$num##= @
)##@ A
]##A B
[$$ 	 
ProducesResponseType$$	 
($$ 
typeof$$ $
($$$ %!
JsonResponseContainer$$% :
)$$: ;
,$$; <
$num$$= @
)$$@ A
]$$A B
public%% 
async%% 
Task%% 
<%% 
IActionResult%% '
>%%' (
GoogleLogin%%) 4
(%%4 5
string%%5 ;
googleToken%%< G
)%%G H
{&& 	
var'' 
response'' 
='' 
await''  
_authService''! -
.''- .
GoogleLogin''. 9
(''9 :
googleToken'': E
)''E F
;''F G
return(( 
Ok(( 
((( 
response(( 
)(( 
;((  
})) 	
[00 	
HttpPost00	 
]00 
[11 	
AllowAnonymous11	 
]11 
[22 	
Route22	 
(22 
$str22 
)22 
]22 
[33 	 
ProducesResponseType33	 
(33 
typeof33 $
(33$ %!
JsonResponseContainer33% :
<33: ;
LogInViewModel33; I
>33I J
)33J K
,33K L
$num33M P
)33P Q
]33Q R
[44 	 
ProducesResponseType44	 
(44 
typeof44 $
(44$ %!
JsonResponseContainer44% :
)44: ;
,44; <
$num44= @
)44@ A
]44A B
[55 	 
ProducesResponseType55	 
(55 
typeof55 $
(55$ %!
JsonResponseContainer55% :
)55: ;
,55; <
$num55= @
)55@ A
]55A B
public66 
async66 
Task66 
<66 
IActionResult66 '
>66' (
LogIn66) .
(66. /
[66/ 0
FromBody660 8
]668 9
	AuthModel66: C
content66D K
)66K L
{77 	
var88 
dto88 
=88 
_mapper88 
.88 
Map88 !
<88! "
AuthDto88" )
>88) *
(88* +
content88+ 2
)882 3
;883 4
var99 
	retrieval99 
=99 
await99 !
_authService99" .
.99. /
LogIn99/ 4
(994 5
dto995 8
)998 9
;999 :
var:: 
response:: 
=:: 
_mapper:: "
.::" #
Map::# &
<::& '
LogInViewModel::' 5
>::5 6
(::6 7
	retrieval::7 @
)::@ A
;::A B
return;; 
Ok;; 
(;; 
response;; 
);; 
;;;  
}<< 	
[BB 	
HttpPostBB	 
]BB 
[CC 	
	AuthorizeCC	 
(CC !
AuthenticationSchemesCC (
=CC) *
$strCC+ 3
)CC3 4
]CC4 5
[DD 	
RouteDD	 
(DD 
$strDD 
)DD 
]DD 
[EE 	 
ProducesResponseTypeEE	 
(EE 
$numEE !
)EE! "
]EE" #
[FF 	 
ProducesResponseTypeFF	 
(FF 
$numFF !
)FF! "
]FF" #
[GG 	 
ProducesResponseTypeGG	 
(GG 
typeofGG $
(GG$ %!
JsonResponseContainerGG% :
[GG: ;
]GG; <
)GG< =
,GG= >
$numGG? B
)GGB C
]GGC D
[HH 	 
ProducesResponseTypeHH	 
(HH 
typeofHH $
(HH$ %!
JsonResponseContainerHH% :
)HH: ;
,HH; <
$numHH= @
)HH@ A
]HHA B
publicII 
asyncII 
TaskII 
<II 
IActionResultII '
>II' (
LogOutII) /
(II/ 0
)II0 1
{JJ 	
awaitKK 
_authServiceKK 
.KK 
LogOutKK %
(KK% &
HttpContextKK& 1
.KK1 2
RequestKK2 9
)KK9 :
;KK: ;
returnLL 
OkLL 
(LL 
)LL 
;LL 
}MM 	
[TT 	
HttpPostTT	 
]TT 
[UU 	
	AuthorizeUU	 
(UU !
AuthenticationSchemesUU (
=UU) *
$strUU+ 3
)UU3 4
]UU4 5
[VV 	
RouteVV	 
(VV 
$strVV 
)VV 
]VV 
[WW 	 
ProducesResponseTypeWW	 
(WW 
$numWW !
)WW! "
]WW" #
[XX 	 
ProducesResponseTypeXX	 
(XX 
typeofXX $
(XX$ %!
JsonResponseContainerXX% :
<XX: ;!
RefreshTokenViewModelXX; P
>XXP Q
)XXQ R
,XXR S
$numXXT W
)XXW X
]XXX Y
[YY 	 
ProducesResponseTypeYY	 
(YY 
typeofYY $
(YY$ %!
JsonResponseContainerYY% :
[YY: ;
]YY; <
)YY< =
,YY= >
$numYY? B
)YYB C
]YYC D
[ZZ 	 
ProducesResponseTypeZZ	 
(ZZ 
typeofZZ $
(ZZ$ %!
JsonResponseContainerZZ% :
)ZZ: ;
,ZZ; <
$numZZ= @
)ZZ@ A
]ZZA B
public[[ 
async[[ 
Task[[ 
<[[ 
IActionResult[[ '
>[[' (
RefreshToken[[) 5
([[5 6
)[[6 7
{\\ 	
var]] 
retval]] 
=]] 
await]] 
_authService]] +
.]]+ ,
RefreshToken]], 8
(]]8 9
HttpContext]]9 D
.]]D E
Request]]E L
)]]L M
;]]M N
var^^ 
response^^ 
=^^ 
_mapper^^ "
.^^" #
Map^^# &
<^^& '!
RefreshTokenViewModel^^' <
>^^< =
(^^= >
retval^^> D
)^^D E
;^^E F
return__ 
Ok__ 
(__ 
response__ 
)__ 
;__  
}`` 	
}aa 
}bb ã\
tC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\User\AdminController.cs
	namespace 	
FanPage
 
. 
Api 
. 
Controllers !
.! "
User" &
;& '
[ 
ApiController 
] 
[ 
Route 
( 
Route 
) 
] 
public 
class 
AdminController 
: 
ControllerBase -
{ 
private 
const 
string 
Route 
=  
$str! +
;+ ,
private 
readonly 
IAdmin 
_admin "
;" #
private 
readonly 
IMapper 
_mapper $
;$ %
public 

AdminController 
( 
IAdmin !
admin" '
,' (
IMapper) 0
mapper1 7
)7 8
{ 
_admin 
= 
admin 
; 
_mapper 
= 
mapper 
; 
} 
[   

HttpDelete   
]   
[!! 
Route!! 

(!!
 
$str!! 
)!! 
]!! 
[""  
ProducesResponseType"" 
("" 
$num"" 
)"" 
]"" 
[##  
ProducesResponseType## 
(## 
typeof##  
(##  !!
JsonResponseContainer##! 6
[##6 7
]##7 8
)##8 9
,##9 :
$num##; >
)##> ?
]##? @
[$$  
ProducesResponseType$$ 
($$ 
typeof$$  
($$  !!
JsonResponseContainer$$! 6
)$$6 7
,$$7 8
$num$$9 <
)$$< =
]$$= >
[%% 
	Authorize%% 
(%% !
AuthenticationSchemes%% $
=%%% &
$str%%' /
)%%/ 0
]%%0 1
[&& 
	Authorize&& 
(&& 
Roles&& 
=&& 
$str&& 
)&& 
]&&  
public'' 

async'' 
Task'' 
<'' 
IActionResult'' #
>''# $
User''% )
('') *
[''* +

FromHeader''+ 5
]''5 6
string''7 =
id''> @
)''@ A
{(( 
await)) 
_admin)) 
.)) 
Delete)) 
()) 
id)) 
))) 
;))  
return** 
Ok** 
(** 
)** 
;** 
}++ 
[33 
HttpPut33 
]33 
[44 
Route44 

(44
 
$str44 
)44 
]44 
[55  
ProducesResponseType55 
(55 
$num55 
)55 
]55 
[66  
ProducesResponseType66 
(66 
typeof66  
(66  !!
JsonResponseContainer66! 6
[666 7
]667 8
)668 9
,669 :
$num66; >
)66> ?
]66? @
[77  
ProducesResponseType77 
(77 
typeof77  
(77  !!
JsonResponseContainer77! 6
)776 7
,777 8
$num779 <
)77< =
]77= >
[88 
	Authorize88 
(88 !
AuthenticationSchemes88 $
=88% &
$str88' /
)88/ 0
]880 1
[99 
	Authorize99 
(99 
Roles99 
=99 
$str99 )
)99) *
]99* +
public:: 

async:: 
Task:: 
<:: 
IActionResult:: #
>::# $
Ban::% (
(::( )
BanModel::) 1
ban::2 5
)::5 6
{;; 
var<< 
request<< 
=<< 
HttpContext<< !
.<<! "
Request<<" )
;<<) *
var== 
dto== 
=== 
_mapper== 
.== 
Map== 
<== 
BanDto== $
>==$ %
(==% &
ban==& )
)==) *
;==* +
await>> 
_admin>> 
.>> 
Ban>> 
(>> 
dto>> 
,>> 
request>> %
)>>% &
;>>& '
return?? 
Ok?? 
(?? 
)?? 
;?? 
}@@ 
[GG 
HttpPutGG 
]GG 
[HH 
RouteHH 

(HH
 
$strHH 
)HH 
]HH 
[II  
ProducesResponseTypeII 
(II 
$numII 
)II 
]II 
[JJ  
ProducesResponseTypeJJ 
(JJ 
typeofJJ  
(JJ  !!
JsonResponseContainerJJ! 6
[JJ6 7
]JJ7 8
)JJ8 9
,JJ9 :
$numJJ; >
)JJ> ?
]JJ? @
[KK  
ProducesResponseTypeKK 
(KK 
typeofKK  
(KK  !!
JsonResponseContainerKK! 6
)KK6 7
,KK7 8
$numKK9 <
)KK< =
]KK= >
[LL 
	AuthorizeLL 
(LL !
AuthenticationSchemesLL $
=LL% &
$strLL' /
)LL/ 0
]LL0 1
[MM 
	AuthorizeMM 
(MM 
RolesMM 
=MM 
$strMM )
)MM) *
]MM* +
publicNN 

asyncNN 
TaskNN 
<NN 
IActionResultNN #
>NN# $
UnbanNN% *
(NN* +
[NN+ ,
FromBodyNN, 4
]NN4 5
stringNN6 <
idNN= ?
)NN? @
{OO 
awaitPP 
_adminPP 
.PP 
UnbanPP 
(PP 
idPP 
)PP 
;PP 
returnQQ 
OkQQ 
(QQ 
)QQ 
;QQ 
}RR 
[YY 
HttpPutYY 
]YY 
[ZZ 
RouteZZ 

(ZZ
 
$strZZ 
)ZZ 
]ZZ 
[[[  
ProducesResponseType[[ 
([[ 
$num[[ 
)[[ 
][[ 
[\\  
ProducesResponseType\\ 
(\\ 
typeof\\  
(\\  !!
JsonResponseContainer\\! 6
[\\6 7
]\\7 8
)\\8 9
,\\9 :
$num\\; >
)\\> ?
]\\? @
[]]  
ProducesResponseType]] 
(]] 
typeof]]  
(]]  !!
JsonResponseContainer]]! 6
)]]6 7
,]]7 8
$num]]9 <
)]]< =
]]]= >
[^^ 
	Authorize^^ 
(^^ !
AuthenticationSchemes^^ $
=^^% &
$str^^' /
)^^/ 0
]^^0 1
[__ 
	Authorize__ 
(__ 
Roles__ 
=__ 
$str__ 
)__ 
]__  
public`` 

async`` 
Task`` 
<`` 
IActionResult`` #
>``# $

ChangeRole``% /
(``/ 0
[``0 1
FromBody``1 9
]``9 :
ChangeRoleModel``; J

changeRole``K U
)``U V
{aa 
varbb 
dtobb 
=bb 
_mapperbb 
.bb 
Mapbb 
<bb 
ChangeRoleDtobb +
>bb+ ,
(bb, -

changeRolebb- 7
)bb7 8
;bb8 9
awaitcc 
_admincc 
.cc 

ChangeRolecc 
(cc  
dtocc  #
)cc# $
;cc$ %
returndd 
Okdd 
(dd 
)dd 
;dd 
}ee 
[}} 
HttpGet}} 
]}} 
[~~ 
Route~~ 

(~~
 
$str~~ 
)~~ 
]~~ 
[  
ProducesResponseType 
( 
typeof  
(  !!
JsonResponseContainer! 6
<6 7
UserInfoViewModel7 H
>H I
)I J
,J K
$numL O
)O P
]P Q
[
€€ "
ProducesResponseType
€€ 
(
€€ 
typeof
€€  
(
€€  !#
JsonResponseContainer
€€! 6
[
€€6 7
]
€€7 8
)
€€8 9
,
€€9 :
$num
€€; >
)
€€> ?
]
€€? @
[
 "
ProducesResponseType
 
(
 
typeof
  
(
  !#
JsonResponseContainer
! 6
)
6 7
,
7 8
$num
9 <
)
< =
]
= >
public
‚‚ 

async
‚‚ 
Task
‚‚ 
<
‚‚ 
IActionResult
‚‚ #
>
‚‚# $
GetModerator
‚‚% 1
(
‚‚1 2
)
‚‚2 3
{
ƒƒ 
var
„„ 
response
„„ 
=
„„ 
await
„„ 
_admin
„„ #
.
„„# $
GetModeratorAsync
„„$ 5
(
„„5 6
HttpContext
„„6 A
.
„„A B
Request
„„B I
)
„„I J
;
„„J K
return
…… 
Ok
…… 
(
…… 
response
…… 
)
…… 
;
…… 
}
†† 
[
 
HttpPut
 
]
 
[
ŽŽ 
Route
ŽŽ 

(
ŽŽ
 
$str
ŽŽ 
)
ŽŽ 
]
ŽŽ 
[
 "
ProducesResponseType
 
(
 
typeof
  
(
  !#
JsonResponseContainer
! 6
[
6 7
]
7 8
)
8 9
,
9 :
$num
; >
)
> ?
]
? @
[
 "
ProducesResponseType
 
(
 
typeof
  
(
  !#
JsonResponseContainer
! 6
)
6 7
,
7 8
$num
9 <
)
< =
]
= >
public
‘‘ 

async
‘‘ 
Task
‘‘ 
<
‘‘ 
IActionResult
‘‘ #
>
‘‘# $

ApproveTag
‘‘% /
(
‘‘/ 0
[
‘‘0 1
FromBody
‘‘1 9
]
‘‘9 :
int
‘‘; >
tagId
‘‘? D
)
‘‘D E
{
’’ 
await
““ 
_admin
““ 
.
““ 

ApproveTag
““ 
(
““  
tagId
““  %
,
““% &
HttpContext
““' 2
.
““2 3
Request
““3 :
)
““: ;
;
““; <
return
”” 
Ok
”” 
(
”” 
)
”” 
;
”” 
}
•• 
[
—— 
HttpGet
—— 
]
—— 
[
˜˜ 
Route
˜˜ 

(
˜˜
 
$str
˜˜ 
)
˜˜ 
]
˜˜ 
[
™™ "
ProducesResponseType
™™ 
(
™™ 
typeof
™™  
(
™™  !#
JsonResponseContainer
™™! 6
[
™™6 7
]
™™7 8
)
™™8 9
,
™™9 :
$num
™™; >
)
™™> ?
]
™™? @
[
šš "
ProducesResponseType
šš 
(
šš 
typeof
šš  
(
šš  !#
JsonResponseContainer
šš! 6
)
šš6 7
,
šš7 8
$num
šš9 <
)
šš< =
]
šš= >
public
›› 

async
›› 
Task
›› 
<
›› 
IActionResult
›› #
>
››# $ 
GetNotApprovedTags
››% 7
(
››7 8
)
››8 9
{
œœ 
var
 
response
 
=
 
await
 
_admin
 #
.
# $ 
GetNotApprovedTags
$ 6
(
6 7
)
7 8
;
8 9
return
žž 
Ok
žž 
(
žž 
response
žž 
)
žž 
;
žž 
}
ŸŸ 
}   é^
vC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\User\AccountController.cs
	namespace 	
FanPage
 
. 
Api 
. 
Controllers !
.! "
User" &
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
Route 
) 
] 
public 

sealed 
class 
AccountController )
:* +
BaseController, :
{ 
private 
const 
string 
Route "
=# $
$str% 1
;1 2
private 
readonly 
IAccount !
_accountService" 1
;1 2
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly $
ApplicationConfiguration 1
_appConfiguration2 C
;C D
public 
AccountController  
(  !
IAccount! )
accountService* 8
,8 9
IMapper: A
mapperB H
,H I$
ApplicationConfigurationJ b
configurationc p
)p q
{ 	
_accountService 
= 
accountService ,
;, -
_mapper 
= 
mapper 
; 
_appConfiguration 
= 
configuration  -
;- .
} 	
[$$ 	
HttpPost$$	 
]$$ 
[%% 	
AllowAnonymous%%	 
]%% 
[&& 	
Route&&	 
(&& 
$str&& 
)&& 
]&& 
['' 	 
ProducesResponseType''	 
('' 
$num'' !
)''! "
]''" #
[(( 	 
ProducesResponseType((	 
((( 
typeof(( $
((($ %!
JsonResponseContainer((% :
[((: ;
]((; <
)((< =
,((= >
$num((? B
)((B C
]((C D
[)) 	 
ProducesResponseType))	 
()) 
typeof)) $
())$ %!
JsonResponseContainer))% :
))): ;
,)); <
$num))= @
)))@ A
]))A B
public** 
async** 
Task** 
<** 
IActionResult** '
>**' (
Registration**) 5
(**5 6
[**6 7
	FromQuery**7 @
]**@ A
RegistrationModel**B S
content**T [
)**[ \
{++ 	
var,, 
dto,, 
=,, 
_mapper,, 
.,, 
Map,, !
<,,! "
RegistrationDto,," 1
>,,1 2
(,,2 3
content,,3 :
),,: ;
;,,; <
dto-- 
.-- 
ConfirmEmailUrl-- 
=--  !
new.. 
UrlInformationDto.. %
(..% &
_appConfiguration..& 7
...7 8"
BaseApplicationAddress..8 N
,..N O
Route..P U
,..U V
$str..W e
)..e f
;..f g
await// 
_accountService// !
.//! "
Registration//" .
(//. /
dto/// 2
)//2 3
;//3 4
return00 
Ok00 
(00 
)00 
;00 
}11 	
[33 	
HttpPost33	 
]33 
[44 	
AllowAnonymous44	 
]44 
[55 	
Route55	 
(55 
$str55 $
)55$ %
]55% &
[66 	 
ProducesResponseType66	 
(66 
$num66 !
)66! "
]66" #
[77 	 
ProducesResponseType77	 
(77 
typeof77 $
(77$ %!
JsonResponseContainer77% :
[77: ;
]77; <
)77< =
,77= >
$num77? B
)77B C
]77C D
[88 	 
ProducesResponseType88	 
(88 
typeof88 $
(88$ %!
JsonResponseContainer88% :
)88: ;
,88; <
$num88= @
)88@ A
]88A B
public99 
async99 
Task99 
<99 
IActionResult99 '
>99' (
GoogleRegistration99) ;
(99; <
string99< B
googleToken99C N
)99N O
{:: 	
await;; 
_accountService;; !
.;;! "
GoogleRegistration;;" 4
(;;4 5
googleToken;;5 @
);;@ A
;;;A B
return<< 
Ok<< 
(<< 
)<< 
;<< 
}== 	
[DD 	
HttpGetDD	 
]DD 
[EE 	
AllowAnonymousEE	 
]EE 
[FF 	
RouteFF	 
(FF 
$strFF 
)FF 
]FF 
[GG 	 
ProducesResponseTypeGG	 
(GG 
$numGG !
)GG! "
]GG" #
[HH 	 
ProducesResponseTypeHH	 
(HH 
typeofHH $
(HH$ %!
JsonResponseContainerHH% :
[HH: ;
]HH; <
)HH< =
,HH= >
$numHH? B
)HHB C
]HHC D
[II 	 
ProducesResponseTypeII	 
(II 
typeofII $
(II$ %!
JsonResponseContainerII% :
)II: ;
,II; <
$numII= @
)II@ A
]IIA B
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
IActionResultJJ '
>JJ' (
ConfirmEmailJJ) 5
(JJ5 6
[JJ6 7
	FromQueryJJ7 @
]JJ@ A
ConfirmEmailModelJJB S
contentJJT [
)JJ[ \
{KK 	
varLL 
dtoLL 
=LL 
_mapperLL 
.LL 
MapLL !
<LL! "
ConfirmEmailDtoLL" 1
>LL1 2
(LL2 3
contentLL3 :
)LL: ;
;LL; <
awaitMM 
_accountServiceMM !
.MM! "
ConfirmEmailMM" .
(MM. /
dtoMM/ 2
)MM2 3
;MM3 4
returnPP 
RedirectPP 
(PP 
$strPP 0
)PP0 1
;PP1 2
}QQ 	
[XX 	
HttpPutXX	 
]XX 
[YY 	
	AuthorizeYY	 
(YY !
AuthenticationSchemesYY (
=YY) *
$strYY+ 3
)YY3 4
]YY4 5
[ZZ 	
RouteZZ	 
(ZZ 
$strZZ 
)ZZ 
]ZZ 
[[[ 	 
ProducesResponseType[[	 
([[ 
$num[[ !
)[[! "
][[" #
[\\ 	 
ProducesResponseType\\	 
(\\ 
$num\\ !
)\\! "
]\\" #
[]] 	 
ProducesResponseType]]	 
(]] 
typeof]] $
(]]$ %!
JsonResponseContainer]]% :
[]]: ;
]]]; <
)]]< =
,]]= >
$num]]? B
)]]B C
]]]C D
[^^ 	 
ProducesResponseType^^	 
(^^ 
typeof^^ $
(^^$ %!
JsonResponseContainer^^% :
)^^: ;
,^^; <
$num^^= @
)^^@ A
]^^A B
public__ 
async__ 
Task__ 
<__ 
IActionResult__ '
>__' ( 
RequestToChangeEmail__) =
(__= >
[__> ?
FromBody__? G
]__G H%
RequestToChangeEmailModel__I b
content__c j
)__j k
{`` 	
varaa 
dtoaa 
=aa 
_mapperaa 
.aa 
Mapaa !
<aa! "#
RequestToChangeEmailDtoaa" 9
>aa9 :
(aa: ;
contentaa; B
)aaB C
;aaC D
dtobb 
.bb 
ChangeEmailUrlbb 
=bb  
newbb! $
UrlInformationDtobb% 6
(bb6 7
_appConfigurationcc !
.cc! ""
BaseApplicationAddresscc" 8
,cc8 9
Routedd 
,dd 
$stree 
)ff 
;ff 
awaithh 
_accountServicehh !
.hh! " 
RequestToChangeEmailhh" 6
(hh6 7
dtohh7 :
,hh: ;
HttpContexthh< G
.hhG H
RequesthhH O
)hhO P
;hhP Q
returnii 
Okii 
(ii 
)ii 
;ii 
}jj 	
[qq 	
HttpPutqq	 
]qq 
[rr 	
AllowAnonymousrr	 
]rr 
[ss 	
Routess	 
(ss 
$strss  
)ss  !
]ss! "
[tt 	 
ProducesResponseTypett	 
(tt 
$numtt !
)tt! "
]tt" #
[uu 	 
ProducesResponseTypeuu	 
(uu 
typeofuu $
(uu$ %!
JsonResponseContaineruu% :
[uu: ;
]uu; <
)uu< =
,uu= >
$numuu? B
)uuB C
]uuC D
[vv 	 
ProducesResponseTypevv	 
(vv 
typeofvv $
(vv$ %!
JsonResponseContainervv% :
)vv: ;
,vv; <
$numvv= @
)vv@ A
]vvA B
publicww 
asyncww 
Taskww 
<ww 
IActionResultww '
>ww' ($
RequestToRestorePasswordww) A
(wwA B
[wwB C
FromBodywwC K
]wwK L%
RequestToRestorePassModelwwM f
contentwwg n
)wwn o
{xx 	
varyy 
dtoyy 
=yy 
_mapperyy 
.yy 
Mapyy !
<yy! "%
RequestRestorePasswordDtoyy" ;
>yy; <
(yy< =
contentyy= D
)yyD E
;yyE F
dtozz 
.zz 
RestorePasswordUrlzz "
=zz# $
newzz% (
UrlInformationDtozz) :
(zz: ;
_appConfiguration{{ !
.{{! ""
BaseApplicationAddress{{" 8
,{{8 9
Route|| 
,|| 
$str}} !
)~~ 
;~~ 
await
€€ 
_accountService
€€ !
.
€€! "$
RequestRestorePassword
€€" 8
(
€€8 9
dto
€€9 <
)
€€< =
;
€€= >
return
 
Redirect
 
(
 
$str
 0
)
0 1
;
1 2
}
‚‚ 	
[
ŠŠ 	
HttpGet
ŠŠ	 
]
ŠŠ 
[
‹‹ 	
AllowAnonymous
‹‹	 
]
‹‹ 
[
ŒŒ 	
Route
ŒŒ	 
(
ŒŒ 
$str
ŒŒ  
)
ŒŒ  !
]
ŒŒ! "
[
 	"
ProducesResponseType
	 
(
 
$num
 !
)
! "
]
" #
[
ŽŽ 	"
ProducesResponseType
ŽŽ	 
(
ŽŽ 
typeof
ŽŽ $
(
ŽŽ$ %#
JsonResponseContainer
ŽŽ% :
[
ŽŽ: ;
]
ŽŽ; <
)
ŽŽ< =
,
ŽŽ= >
$num
ŽŽ? B
)
ŽŽB C
]
ŽŽC D
[
 	"
ProducesResponseType
	 
(
 
typeof
 $
(
$ %#
JsonResponseContainer
% :
)
: ;
,
; <
$num
= @
)
@ A
]
A B
public
 
async
 
Task
 
<
 
IActionResult
 '
>
' (
RestorePassword
) 8
(
8 9
[
9 :
	FromQuery
: C
]
C D"
RestorePasswordModel
E Y
content
Z a
)
a b
{
‘‘ 	
var
’’ 
dto
’’ 
=
’’ 
_mapper
’’ 
.
’’ 
Map
’’ !
<
’’! " 
RestorePasswordDto
’’" 4
>
’’4 5
(
’’5 6
content
’’6 =
)
’’= >
;
’’> ?
await
““ 
_accountService
““ !
.
““! "
RestorePassword
““" 1
(
““1 2
dto
““2 5
)
““5 6
;
““6 7
return
”” 
Ok
”” 
(
”” 
)
”” 
;
”” 
}
•• 	
}
–– 
}—— ¢e
tC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\Fanfic\TagController.cs
	namespace

 	
FanPage


 
.

 
Api

 
.

 
Controllers

 !
.

! "
Fanfic

" (
;

( )
[ 
ApiController 
] 
[ 
Route 
( 
Route 
) 
] 
public 
class 
TagController 
: 
BaseController +
{ 
private 
const 
string 
Route 
=  
$str! )
;) *
private 
readonly 
ITag 
_tag 
; 
private 
readonly 
IMapper 
_mapper $
;$ %
public 

TagController 
( 
ITag 
tag !
,! "
IMapper# *
mapper+ 1
)1 2
{ 
_tag 
= 
tag 
; 
_mapper 
= 
mapper 
; 
} 
[   
HttpPost   
]   
[!! 
Route!! 

(!!
 
$str!! 
)!! 
]!! 
[""  
ProducesResponseType"" 
("" 
$num"" 
)"" 
]"" 
[##  
ProducesResponseType## 
(## 
$num## 
)## 
]## 
[$$  
ProducesResponseType$$ 
($$ 
typeof$$  
($$  !!
JsonResponseContainer$$! 6
<$$6 7
TagViewModel$$7 C
>$$C D
)$$D E
,$$E F
$num$$G J
)$$J K
]$$K L
[%%  
ProducesResponseType%% 
(%% 
typeof%%  
(%%  !!
JsonResponseContainer%%! 6
[%%6 7
]%%7 8
)%%8 9
,%%9 :
$num%%; >
)%%> ?
]%%? @
[&&  
ProducesResponseType&& 
(&& 
typeof&&  
(&&  !!
JsonResponseContainer&&! 6
)&&6 7
,&&7 8
$num&&9 <
)&&< =
]&&= >
['' 
	Authorize'' 
('' !
AuthenticationSchemes'' $
=''% &
$str''' /
)''/ 0
]''0 1
public(( 

async(( 
Task(( 
<(( 
IActionResult(( #
>((# $
	CreateTag((% .
(((. /
[((/ 0

FromHeader((0 :
]((: ;
int((< ?
fanficId((@ H
,((H I
[((J K
FromBody((K S
]((S T
TagModel((U ]
tagModel((^ f
)((f g
{)) 
var** 
tagDto** 
=** 
_mapper** 
.** 
Map**  
<**  !
TagDto**! '
>**' (
(**( )
tagModel**) 1
)**1 2
;**2 3
var++ 
	retrieval++ 
=++ 
await++ 
_tag++ "
.++" #
CreateTagAsync++# 1
(++1 2
fanficId++2 :
,++: ;
tagDto++< B
,++B C
HttpContext++D O
.++O P
Request++P W
)++W X
;++X Y
var,, 
response,, 
=,, 
_mapper,, 
.,, 
Map,, "
<,," #
TagViewModel,,# /
>,,/ 0
(,,0 1
	retrieval,,1 :
),,: ;
;,,; <
return-- 
Ok-- 
(-- 
response-- 
)-- 
;-- 
}.. 
[66 
HttpPut66 
]66 
[77 
Route77 

(77
 
$str77 
)77 
]77 
[88  
ProducesResponseType88 
(88 
$num88 
)88 
]88 
[99  
ProducesResponseType99 
(99 
$num99 
)99 
]99 
[::  
ProducesResponseType:: 
(:: 
typeof::  
(::  !!
JsonResponseContainer::! 6
<::6 7
TagViewModel::7 C
>::C D
)::D E
,::E F
$num::G J
)::J K
]::K L
[;;  
ProducesResponseType;; 
(;; 
typeof;;  
(;;  !!
JsonResponseContainer;;! 6
[;;6 7
];;7 8
);;8 9
,;;9 :
$num;;; >
);;> ?
];;? @
[<<  
ProducesResponseType<< 
(<< 
typeof<<  
(<<  !!
JsonResponseContainer<<! 6
)<<6 7
,<<7 8
$num<<9 <
)<<< =
]<<= >
[== 
	Authorize== 
(== !
AuthenticationSchemes== $
===% &
$str==' /
)==/ 0
]==0 1
public>> 

async>> 
Task>> 
<>> 
IActionResult>> #
>>># $
SetTag>>% +
(>>+ ,
[>>, -

FromHeader>>- 7
]>>7 8
int>>9 <
fanficId>>= E
,>>E F
[>>G H

FromHeader>>H R
]>>R S
string>>T Z
?>>Z [
nameTag>>\ c
)>>c d
{?? 
var@@ 
	retrieval@@ 
=@@ 
await@@ 
_tag@@ "
.@@" #
SetTagAsync@@# .
(@@. /
fanficId@@/ 7
,@@7 8
nameTag@@9 @
,@@@ A
HttpContext@@B M
.@@M N
Request@@N U
)@@U V
;@@V W
varAA 
responseAA 
=AA 
_mapperAA 
.AA 
MapAA "
<AA" #
TagViewModelAA# /
>AA/ 0
(AA0 1
	retrievalAA1 :
)AA: ;
;AA; <
returnBB 
OkBB 
(BB 
responseBB 
)BB 
;BB 
}CC 
[KK 

HttpDeleteKK 
]KK 
[LL 
RouteLL 

(LL
 
$strLL 
)LL 
]LL 
[MM  
ProducesResponseTypeMM 
(MM 
$numMM 
)MM 
]MM 
[NN  
ProducesResponseTypeNN 
(NN 
$numNN 
)NN 
]NN 
[OO  
ProducesResponseTypeOO 
(OO 
$numOO 
)OO 
]OO 
[PP  
ProducesResponseTypePP 
(PP 
typeofPP  
(PP  !!
JsonResponseContainerPP! 6
<PP6 7
TagViewModelPP7 C
>PPC D
)PPD E
,PPE F
$numPPG J
)PPJ K
]PPK L
[QQ  
ProducesResponseTypeQQ 
(QQ 
typeofQQ  
(QQ  !!
JsonResponseContainerQQ! 6
[QQ6 7
]QQ7 8
)QQ8 9
,QQ9 :
$numQQ; >
)QQ> ?
]QQ? @
[RR  
ProducesResponseTypeRR 
(RR 
typeofRR  
(RR  !!
JsonResponseContainerRR! 6
)RR6 7
,RR7 8
$numRR9 <
)RR< =
]RR= >
[SS 
	AuthorizeSS 
(SS !
AuthenticationSchemesSS $
=SS% &
$strSS' /
)SS/ 0
]SS0 1
publicTT 

asyncTT 
TaskTT 
<TT 
IActionResultTT #
>TT# $
	DeleteTagTT% .
(TT. /
[TT/ 0

FromHeaderTT0 :
]TT: ;
intTT< ?
fanficIdTT@ H
,TTH I
[TTJ K

FromHeaderTTK U
]TTU V
stringTTW ]
?TT] ^
tagNameTT_ f
)TTf g
{UU 
varVV 
	retrievalVV 
=VV 
awaitVV 
_tagVV "
.VV" # 
DeleteTagFanficAsyncVV# 7
(VV7 8
fanficIdVV8 @
,VV@ A
tagNameVVB I
,VVI J
HttpContextVVK V
.VVV W
RequestVVW ^
)VV^ _
;VV_ `
varWW 
responseWW 
=WW 
_mapperWW 
.WW 
MapWW "
<WW" #
TagViewModelWW# /
>WW/ 0
(WW0 1
	retrievalWW1 :
)WW: ;
;WW; <
returnXX 
OkXX 
(XX 
responseXX 
)XX 
;XX 
}YY 
[__ 
HttpGet__ 
]__ 
[`` 
Route`` 

(``
 
$str`` 
)`` 
]`` 
[aa  
ProducesResponseTypeaa 
(aa 
$numaa 
)aa 
]aa 
[bb  
ProducesResponseTypebb 
(bb 
typeofbb  
(bb  !!
JsonResponseContainerbb! 6
[bb6 7
]bb7 8
)bb8 9
,bb9 :
$numbb; >
)bb> ?
]bb? @
[cc  
ProducesResponseTypecc 
(cc 
typeofcc  
(cc  !!
JsonResponseContainercc! 6
)cc6 7
,cc7 8
$numcc9 <
)cc< =
]cc= >
[dd 
	Authorizedd 
(dd !
AuthenticationSchemesdd $
=dd% &
$strdd' /
)dd/ 0
]dd0 1
publicee 

asyncee 
Taskee 
<ee 
IActionResultee #
>ee# $
	GetAllTagee% .
(ee. /
)ee/ 0
{ff 
vargg 
tagsgg 
=gg 
awaitgg 
_taggg 
.gg 
GetAllTagAsyncgg ,
(gg, -
)gg- .
;gg. /
returnhh 
Okhh 
(hh 
tagshh 
)hh 
;hh 
}ii 
[kk 

HttpDeletekk 
]kk 
[ll 
Routell 

(ll
 
$strll 
)ll 
]ll 
[mm  
ProducesResponseTypemm 
(mm 
$nummm 
)mm 
]mm 
[nn  
ProducesResponseTypenn 
(nn 
$numnn 
)nn 
]nn 
[oo  
ProducesResponseTypeoo 
(oo 
typeofoo  
(oo  !!
JsonResponseContaineroo! 6
[oo6 7
]oo7 8
)oo8 9
,oo9 :
$numoo; >
)oo> ?
]oo? @
[pp  
ProducesResponseTypepp 
(pp 
typeofpp  
(pp  !!
JsonResponseContainerpp! 6
)pp6 7
,pp7 8
$numpp9 <
)pp< =
]pp= >
[qq 
	Authorizeqq 
(qq !
AuthenticationSchemesqq $
=qq% &
$strqq' /
)qq/ 0
]qq0 1
publicrr 

asyncrr 
Taskrr 
<rr 
IActionResultrr #
>rr# $
	DeleteTagrr% .
(rr. /
[rr/ 0

FromHeaderrr0 :
]rr: ;
intrr< ?
tagIdrr@ E
)rrE F
{ss 
awaittt 
_tagtt 
.tt 
DeleteTagAsynctt !
(tt! "
tagIdtt" '
,tt' (
HttpContexttt) 4
.tt4 5
Requesttt5 <
)tt< =
;tt= >
returnuu 
Okuu 
(uu 
)uu 
;uu 
}vv 
[}} 
HttpGet}} 
]}} 
[~~ 
Route~~ 

(~~
 
$str~~ 
)~~ 
]~~ 
[  
ProducesResponseType 
( 
$num 
) 
] 
[
€€ "
ProducesResponseType
€€ 
(
€€ 
typeof
€€  
(
€€  !#
JsonResponseContainer
€€! 6
[
€€6 7
]
€€7 8
)
€€8 9
,
€€9 :
$num
€€; >
)
€€> ?
]
€€? @
[
 "
ProducesResponseType
 
(
 
typeof
  
(
  !#
JsonResponseContainer
! 6
)
6 7
,
7 8
$num
9 <
)
< =
]
= >
[
‚‚ 
	Authorize
‚‚ 
(
‚‚ #
AuthenticationSchemes
‚‚ $
=
‚‚% &
$str
‚‚' /
)
‚‚/ 0
]
‚‚0 1
public
ƒƒ 

async
ƒƒ 
Task
ƒƒ 
<
ƒƒ 
IActionResult
ƒƒ #
>
ƒƒ# $
GetAllTagFanfic
ƒƒ% 4
(
ƒƒ4 5
[
ƒƒ5 6

FromHeader
ƒƒ6 @
]
ƒƒ@ A
int
ƒƒB E
fanficId
ƒƒF N
)
ƒƒN O
{
„„ 
var
…… 
tags
…… 
=
…… 
await
…… 
_tag
…… 
.
…… 
GetAllTagFanfic
…… -
(
……- .
fanficId
……. 6
)
……6 7
;
……7 8
return
†† 
Ok
†† 
(
†† 
tags
†† 
)
†† 
;
†† 
}
‡‡ 
}ˆˆ És
wC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\Fanfic\ReviewController.cs
	namespace

 	
FanPage


 
.

 
Api

 
.

 
Controllers

 !
.

! "
Fanfic

" (
;

( )
[ 
ApiController 
] 
[ 
Route 
( 
Route 
) 
] 
public 
class 
ReviewController 
: 
BaseController  .
{ 
private 
const 
string 
Route 
=  
$str! ,
;, -
private 
readonly 
IReview 
_review $
;$ %
private 
readonly 
IMapper 
_mapper $
;$ %
public 

ReviewController 
( 
IReview #
review$ *
,* +
IMapper, 3
mapper4 :
): ;
{ 
_review 
= 
review 
; 
_mapper 
= 
mapper 
; 
} 
[   
HttpPost   
]   
[!! 
Route!! 

(!!
 
$str!! 
)!! 
]!! 
[""  
ProducesResponseType"" 
("" 
$num"" 
)"" 
]"" 
[##  
ProducesResponseType## 
(## 
$num## 
)## 
]## 
[$$  
ProducesResponseType$$ 
($$ 
typeof$$  
($$  !!
JsonResponseContainer$$! 6
<$$6 7
ReviewViewModel$$7 F
>$$F G
)$$G H
,$$H I
$num$$J M
)$$M N
]$$N O
[%%  
ProducesResponseType%% 
(%% 
typeof%%  
(%%  !!
JsonResponseContainer%%! 6
[%%6 7
]%%7 8
)%%8 9
,%%9 :
$num%%; >
)%%> ?
]%%? @
[&&  
ProducesResponseType&& 
(&& 
typeof&&  
(&&  !!
JsonResponseContainer&&! 6
)&&6 7
,&&7 8
$num&&9 <
)&&< =
]&&= >
['' 
	Authorize'' 
('' !
AuthenticationSchemes'' $
=''% &
$str''' /
)''/ 0
]''0 1
public(( 

async(( 
Task(( 
<(( 
IActionResult(( #
>((# $
CreateReview((% 1
(((1 2
[((2 3

FromHeader((3 =
]((= >
int((? B
fanficId((C K
,((K L
[((M N
FromBody((N V
]((V W
ReviewModel((X c
reviewModel((d o
)((o p
{)) 
var** 
	reviewDto** 
=** 
_mapper** 
.**  
Map**  #
<**# $

ReviewsDto**$ .
>**. /
(**/ 0
reviewModel**0 ;
)**; <
;**< =
var++ 
	retrieval++ 
=++ 
await++ 
_review++ %
.++% &
CreateReviewAsync++& 7
(++7 8
fanficId++8 @
,++@ A
	reviewDto++B K
,++K L
HttpContext++M X
.++X Y
Request++Y `
)++` a
;++a b
var,, 
response,, 
=,, 
_mapper,, 
.,, 
Map,, "
<,," #
ReviewViewModel,,# 2
>,,2 3
(,,3 4
	retrieval,,4 =
),,= >
;,,> ?
return-- 
Ok-- 
(-- 
response-- 
)-- 
;-- 
}.. 
[77 
HttpPut77 
]77 
[88 
Route88 

(88
 
$str88 
)88 
]88 
[99  
ProducesResponseType99 
(99 
$num99 
)99 
]99 
[::  
ProducesResponseType:: 
(:: 
$num:: 
):: 
]:: 
[;;  
ProducesResponseType;; 
(;; 
typeof;;  
(;;  !!
JsonResponseContainer;;! 6
<;;6 7
ReviewViewModel;;7 F
>;;F G
);;G H
,;;H I
$num;;J M
);;M N
];;N O
[<<  
ProducesResponseType<< 
(<< 
typeof<<  
(<<  !!
JsonResponseContainer<<! 6
[<<6 7
]<<7 8
)<<8 9
,<<9 :
$num<<; >
)<<> ?
]<<? @
[==  
ProducesResponseType== 
(== 
typeof==  
(==  !!
JsonResponseContainer==! 6
)==6 7
,==7 8
$num==9 <
)==< =
]=== >
[>> 
	Authorize>> 
(>> !
AuthenticationSchemes>> $
=>>% &
$str>>' /
)>>/ 0
]>>0 1
public?? 

async?? 
Task?? 
<?? 
IActionResult?? #
>??# $
UpdateReview??% 1
(??1 2
[??2 3

FromHeader??3 =
]??= >
int??? B
fanficId??C K
,??K L
[??M N
FromBody??N V
]??V W
ReviewModel??X c
reviewModel??d o
)??o p
{@@ 
varAA 
	reviewDtoAA 
=AA 
_mapperAA 
.AA  
MapAA  #
<AA# $

ReviewsDtoAA$ .
>AA. /
(AA/ 0
reviewModelAA0 ;
)AA; <
;AA< =
varBB 
	retrievalBB 
=BB 
awaitBB 
_reviewBB %
.BB% &
UpdateReviewAsyncBB& 7
(BB7 8
fanficIdBB8 @
,BB@ A
	reviewDtoBBB K
,BBK L
HttpContextBBM X
.BBX Y
RequestBBY `
)BB` a
;BBa b
varCC 
responseCC 
=CC 
_mapperCC 
.CC 
MapCC "
<CC" #
ReviewViewModelCC# 2
>CC2 3
(CC3 4
	retrievalCC4 =
)CC= >
;CC> ?
returnDD 
OkDD 
(DD 
responseDD 
)DD 
;DD 
}EE 
[LL 

HttpDeleteLL 
]LL 
[MM 
RouteMM 

(MM
 
$strMM 
)MM 
]MM 
[NN  
ProducesResponseTypeNN 
(NN 
$numNN 
)NN 
]NN 
[OO  
ProducesResponseTypeOO 
(OO 
$numOO 
)OO 
]OO 
[PP  
ProducesResponseTypePP 
(PP 
typeofPP  
(PP  !!
JsonResponseContainerPP! 6
<PP6 7
ReviewViewModelPP7 F
>PPF G
)PPG H
,PPH I
$numPPJ M
)PPM N
]PPN O
[QQ  
ProducesResponseTypeQQ 
(QQ 
typeofQQ  
(QQ  !!
JsonResponseContainerQQ! 6
[QQ6 7
]QQ7 8
)QQ8 9
,QQ9 :
$numQQ; >
)QQ> ?
]QQ? @
[RR  
ProducesResponseTypeRR 
(RR 
typeofRR  
(RR  !!
JsonResponseContainerRR! 6
)RR6 7
,RR7 8
$numRR9 <
)RR< =
]RR= >
[SS 
	AuthorizeSS 
(SS !
AuthenticationSchemesSS $
=SS% &
$strSS' /
)SS/ 0
]SS0 1
[TT 
	AuthorizeTT 
(TT 
RolesTT 
=TT 
$strTT 
)TT 
]TT  
publicUU 

asyncUU 
TaskUU 
<UU 
IActionResultUU #
>UU# $
DeleteReviewUU% 1
(UU1 2
[UU2 3

FromHeaderUU3 =
]UU= >
intUU? B
fanficIdUUC K
)UUK L
{VV 
awaitWW 
_reviewWW 
.WW 
DeleteReviewAsyncWW '
(WW' (
fanficIdWW( 0
,WW0 1
HttpContextWW2 =
.WW= >
RequestWW> E
)WWE F
;WWF G
returnXX 
OkXX 
(XX 
)XX 
;XX 
}YY 
[__ 
HttpGet__ 
]__ 
[`` 
Route`` 

(``
 
$str`` 
)`` 
]`` 
[aa  
ProducesResponseTypeaa 
(aa 
$numaa 
)aa 
]aa 
[bb  
ProducesResponseTypebb 
(bb 
$numbb 
)bb 
]bb 
[cc  
ProducesResponseTypecc 
(cc 
typeofcc  
(cc  !!
JsonResponseContainercc! 6
<cc6 7
ReviewViewModelcc7 F
>ccF G
)ccG H
,ccH I
$numccJ M
)ccM N
]ccN O
[dd  
ProducesResponseTypedd 
(dd 
typeofdd  
(dd  !!
JsonResponseContainerdd! 6
[dd6 7
]dd7 8
)dd8 9
,dd9 :
$numdd; >
)dd> ?
]dd? @
[ee  
ProducesResponseTypeee 
(ee 
typeofee  
(ee  !!
JsonResponseContaineree! 6
)ee6 7
,ee7 8
$numee9 <
)ee< =
]ee= >
[ff 
	Authorizeff 
(ff !
AuthenticationSchemesff $
=ff% &
$strff' /
)ff/ 0
]ff0 1
publicgg 

asyncgg 
Taskgg 
<gg 
IActionResultgg #
>gg# $
GetAllReviewgg% 1
(gg1 2
)gg2 3
{hh 
varii 
	retrievalii 
=ii 
awaitii 
_reviewii %
.ii% &
GetAllReviewii& 2
(ii2 3
)ii3 4
;ii4 5
varjj 
responsejj 
=jj 
_mapperjj 
.jj 
Mapjj "
<jj" #
Listjj# '
<jj' (
ReviewViewModeljj( 7
>jj7 8
>jj8 9
(jj9 :
	retrievaljj: C
)jjC D
;jjD E
returnkk 
Okkk 
(kk 
responsekk 
)kk 
;kk 
}ll 
[tt 
HttpGettt 
(tt 
$strtt 
)tt 
]tt 
[uu  
ProducesResponseTypeuu 
(uu 
$numuu 
)uu 
]uu 
[vv  
ProducesResponseTypevv 
(vv 
$numvv 
)vv 
]vv 
[ww  
ProducesResponseTypeww 
(ww 
typeofww  
(ww  !!
JsonResponseContainerww! 6
<ww6 7
ReviewViewModelww7 F
>wwF G
)wwG H
,wwH I
$numwwJ M
)wwM N
]wwN O
[xx  
ProducesResponseTypexx 
(xx 
typeofxx  
(xx  !!
JsonResponseContainerxx! 6
[xx6 7
]xx7 8
)xx8 9
,xx9 :
$numxx; >
)xx> ?
]xx? @
[yy  
ProducesResponseTypeyy 
(yy 
typeofyy  
(yy  !!
JsonResponseContaineryy! 6
)yy6 7
,yy7 8
$numyy9 <
)yy< =
]yy= >
[zz 
	Authorizezz 
(zz !
AuthenticationSchemeszz $
=zz% &
$strzz' /
)zz/ 0
]zz0 1
public{{ 

async{{ 
Task{{ 
<{{ 
IActionResult{{ #
>{{# $"
GetAllReviewByUserName{{% ;
({{; <
[{{< =

FromHeader{{= G
]{{G H
string{{I O
userName{{P X
){{X Y
{|| 
var}} 
	retrieval}} 
=}} 
await}} 
_review}} %
.}}% &'
GetAllReviewByUserNameAsync}}& A
(}}A B
userName}}B J
)}}J K
;}}K L
var~~ 
response~~ 
=~~ 
_mapper~~ 
.~~ 
Map~~ "
<~~" #
List~~# '
<~~' (
ReviewViewModel~~( 7
>~~7 8
>~~8 9
(~~9 :
	retrieval~~: C
)~~C D
;~~D E
return 
Ok 
( 
response 
) 
; 
}
€€ 
[
‡‡ 
HttpGet
‡‡ 
(
‡‡ 
$str
‡‡ 
)
‡‡ 
]
‡‡  
[
ˆˆ "
ProducesResponseType
ˆˆ 
(
ˆˆ 
$num
ˆˆ 
)
ˆˆ 
]
ˆˆ 
[
‰‰ "
ProducesResponseType
‰‰ 
(
‰‰ 
$num
‰‰ 
)
‰‰ 
]
‰‰ 
[
ŠŠ "
ProducesResponseType
ŠŠ 
(
ŠŠ 
typeof
ŠŠ  
(
ŠŠ  !#
JsonResponseContainer
ŠŠ! 6
<
ŠŠ6 7
ReviewViewModel
ŠŠ7 F
>
ŠŠF G
)
ŠŠG H
,
ŠŠH I
$num
ŠŠJ M
)
ŠŠM N
]
ŠŠN O
[
‹‹ "
ProducesResponseType
‹‹ 
(
‹‹ 
typeof
‹‹  
(
‹‹  !#
JsonResponseContainer
‹‹! 6
[
‹‹6 7
]
‹‹7 8
)
‹‹8 9
,
‹‹9 :
$num
‹‹; >
)
‹‹> ?
]
‹‹? @
[
ŒŒ "
ProducesResponseType
ŒŒ 
(
ŒŒ 
typeof
ŒŒ  
(
ŒŒ  !#
JsonResponseContainer
ŒŒ! 6
)
ŒŒ6 7
,
ŒŒ7 8
$num
ŒŒ9 <
)
ŒŒ< =
]
ŒŒ= >
[
 
	Authorize
 
(
 #
AuthenticationSchemes
 $
=
% &
$str
' /
)
/ 0
]
0 1
public
ŽŽ 

async
ŽŽ 
Task
ŽŽ 
<
ŽŽ 
IActionResult
ŽŽ #
>
ŽŽ# $$
GetAllReviewByFanficId
ŽŽ% ;
(
ŽŽ; <
[
ŽŽ< =

FromHeader
ŽŽ= G
]
ŽŽG H
int
ŽŽI L
fanficId
ŽŽM U
)
ŽŽU V
{
 
var
 
	retrieval
 
=
 
await
 
_review
 %
.
% &)
GetAllReviewByFanficIdAsync
& A
(
A B
fanficId
B J
)
J K
;
K L
var
‘‘ 
response
‘‘ 
=
‘‘ 
_mapper
‘‘ 
.
‘‘ 
Map
‘‘ "
<
‘‘" #
List
‘‘# '
<
‘‘' (
ReviewViewModel
‘‘( 7
>
‘‘7 8
>
‘‘8 9
(
‘‘9 :
	retrieval
‘‘: C
)
‘‘C D
;
‘‘D E
return
’’ 
Ok
’’ 
(
’’ 
response
’’ 
)
’’ 
;
’’ 
}
““ 
}”” ÎX
}C:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\Fanfic\FanficDetailController.cs
	namespace 	
FanPage
 
. 
Api 
. 
Controllers !
.! "
Fanfic" (
;( )
[		 
ApiController		 
]		 
[

 
Route

 
(

 
Route

 
)

 
]

 
public 
class "
FanficDetailController #
:$ %
BaseController& 4
{ 
private 
const 
string 
Route 
=  
$str! ,
;, -
private 
readonly 
IFanficDetail "
_fanficDetail# 0
;0 1
private 
readonly 
IMapper 
_mapper $
;$ %
public 
"
FanficDetailController !
(! "
IFanficDetail" /
fanfic0 6
,6 7
IMapper8 ?
mapper@ F
)F G
{ 
_fanficDetail 
= 
fanfic 
; 
_mapper 
= 
mapper 
; 
} 
[ 
HttpGet 
] 
[ 
Route 

(
 
$str $
)$ %
]% &
[    
ProducesResponseType   
(   
$num   
)   
]   
[!!  
ProducesResponseType!! 
(!! 
typeof!!  
(!!  !!
JsonResponseContainer!!! 6
[!!6 7
]!!7 8
)!!8 9
,!!9 :
$num!!; >
)!!> ?
]!!? @
[""  
ProducesResponseType"" 
("" 
typeof""  
(""  !!
JsonResponseContainer""! 6
)""6 7
,""7 8
$num""9 <
)""< =
]""= >
public## 

async## 
Task## 
<## 
IActionResult## #
>### $&
GetLastCreationDateFanfics##% ?
(##? @
[##@ A

FromHeader##A K
]##K L
int##M P
count##Q V
)##V W
{$$ 
var%% 
fanfic%% 
=%% 
await%% 
_fanficDetail%% (
.%%( )+
GetLastCreationDateFanficsAsync%%) H
(%%H I
count%%I N
,%%N O
HttpContext%%P [
.%%[ \
Request%%\ c
)%%c d
;%%d e
return&& 
Ok&& 
(&& 
fanfic&& 
)&& 
;&& 
}'' 
[// 
HttpGet// 
]// 
[00 
Route00 

(00
 
$str00 
)00 
]00 
[11  
ProducesResponseType11 
(11 
$num11 
)11 
]11 
[22  
ProducesResponseType22 
(22 
typeof22  
(22  !!
JsonResponseContainer22! 6
[226 7
]227 8
)228 9
,229 :
$num22; >
)22> ?
]22? @
[33  
ProducesResponseType33 
(33 
typeof33  
(33  !!
JsonResponseContainer33! 6
)336 7
,337 8
$num339 <
)33< =
]33= >
public44 

async44 
Task44 
<44 
IActionResult44 #
>44# $
GetTopRatingFanfics44% 8
(448 9
[449 :

FromHeader44: D
]44D E
int44F I
count44J O
)44O P
{55 
var66 
fanfic66 
=66 
await66 
_fanficDetail66 (
.66( )$
GetTopRatingFanficsAsync66) A
(66A B
count66B G
,66G H
HttpContext66I T
.66T U
Request66U \
)66\ ]
;66] ^
return77 
Ok77 
(77 
fanfic77 
)77 
;77 
}88 
[@@ 
HttpGet@@ 
]@@ 
[AA 
RouteAA 

(AA
 
$strAA 
)AA 
]AA 
[BB  
ProducesResponseTypeBB 
(BB 
$numBB 
)BB 
]BB 
[CC  
ProducesResponseTypeCC 
(CC 
typeofCC  
(CC  !!
JsonResponseContainerCC! 6
[CC6 7
]CC7 8
)CC8 9
,CC9 :
$numCC; >
)CC> ?
]CC? @
[DD  
ProducesResponseTypeDD 
(DD 
typeofDD  
(DD  !!
JsonResponseContainerDD! 6
)DD6 7
,DD7 8
$numDD9 <
)DD< =
]DD= >
publicEE 

asyncEE 
TaskEE 
<EE 
IActionResultEE #
>EE# $
GetAverageRatingEE% 5
(EE5 6
[EE6 7

FromHeaderEE7 A
]EEA B
intEEC F
fanficIdEEG O
)EEO P
{FF 
varGG 
ratingGG 
=GG 
awaitGG 
_fanficDetailGG (
.GG( )!
GetAverageRatingAsyncGG) >
(GG> ?
fanficIdGG? G
)GGG H
;GGH I
returnHH 
OkHH 
(HH 
ratingHH 
)HH 
;HH 
}II 
[OO 
HttpGetOO 
]OO 
[PP 
RoutePP 

(PP
 
$strPP 
)PP 
]PP 
[QQ  
ProducesResponseTypeQQ 
(QQ 
$numQQ 
)QQ 
]QQ 
[RR  
ProducesResponseTypeRR 
(RR 
typeofRR  
(RR  !!
JsonResponseContainerRR! 6
[RR6 7
]RR7 8
)RR8 9
,RR9 :
$numRR; >
)RR> ?
]RR? @
[SS  
ProducesResponseTypeSS 
(SS 
typeofSS  
(SS  !!
JsonResponseContainerSS! 6
)SS6 7
,SS7 8
$numSS9 <
)SS< =
]SS= >
publicTT 

asyncTT 
TaskTT 
<TT 
IActionResultTT #
>TT# $
GetAllTT% +
(TT+ ,
intTT, /
offsetTT0 6
)TT6 7
{UU 
varVV 
fanficVV 
=VV 
awaitVV 
_fanficDetailVV (
.VV( )
GetAllAsyncVV) 4
(VV4 5
offsetVV5 ;
)VV; <
;VV< =
returnWW 
OkWW 
(WW 
fanficWW 
)WW 
;WW 
}XX 
[__ 
HttpGet__ 
]__ 
[`` 
Route`` 

(``
 
$str`` 
)`` 
]`` 
[aa  
ProducesResponseTypeaa 
(aa 
$numaa 
)aa 
]aa 
[bb  
ProducesResponseTypebb 
(bb 
typeofbb  
(bb  !!
JsonResponseContainerbb! 6
[bb6 7
]bb7 8
)bb8 9
,bb9 :
$numbb; >
)bb> ?
]bb? @
[cc  
ProducesResponseTypecc 
(cc 
typeofcc  
(cc  !!
JsonResponseContainercc! 6
)cc6 7
,cc7 8
$numcc9 <
)cc< =
]cc= >
[dd 
	Authorizedd 
(dd !
AuthenticationSchemesdd $
=dd% &
$strdd' /
)dd/ 0
]dd0 1
publicee 

asyncee 
Taskee 
<ee 
IActionResultee #
>ee# $
GetByIdee% ,
(ee, -
[ee- .

FromHeaderee. 8
]ee8 9
intee: =
idee> @
)ee@ A
{ff 
vargg 
fanficgg 
=gg 
awaitgg 
_fanficDetailgg (
.gg( )
GetByIdAsyncgg) 5
(gg5 6
idgg6 8
)gg8 9
;gg9 :
returnhh 
Okhh 
(hh 
fanfichh 
)hh 
;hh 
}ii 
[pp 
HttpGetpp 
]pp 
[qq 
Routeqq 

(qq
 
$strqq 
)qq 
]qq 
[rr  
ProducesResponseTyperr 
(rr 
$numrr 
)rr 
]rr 
[ss  
ProducesResponseTypess 
(ss 
typeofss  
(ss  !!
JsonResponseContainerss! 6
[ss6 7
]ss7 8
)ss8 9
,ss9 :
$numss; >
)ss> ?
]ss? @
[tt  
ProducesResponseTypett 
(tt 
typeoftt  
(tt  !!
JsonResponseContainertt! 6
)tt6 7
,tt7 8
$numtt9 <
)tt< =
]tt= >
[uu 
	Authorizeuu 
(uu !
AuthenticationSchemesuu $
=uu% &
$struu' /
)uu/ 0
]uu0 1
publicvv 

asyncvv 
Taskvv 
<vv 
IActionResultvv #
>vv# $
GetByAuthorNamevv% 4
(vv4 5
[vv5 6

FromHeadervv6 @
]vv@ A
stringvvB H

authorNamevvI S
,vvS T
intvvT W
offsetvvX ^
)vv^ _
{ww 
varxx 
fanficxx 
=xx 
awaitxx 
_fanficDetailxx (
.xx( ) 
GetByAuthorNameAsyncxx) =
(xx= >

authorNamexx> H
,xxH I
offsetxxI O
)xxO P
;xxP Q
returnyy 
Okyy 
(yy 
fanficyy 
)yy 
;yy 
}zz 
[
ƒƒ 
HttpGet
ƒƒ 
]
ƒƒ 
[
„„ 
Route
„„ 

(
„„
 
$str
„„ 
)
„„ 
]
„„ 
[
…… "
ProducesResponseType
…… 
(
…… 
$num
…… 
)
…… 
]
…… 
[
†† "
ProducesResponseType
†† 
(
†† 
typeof
††  
(
††  !#
JsonResponseContainer
††! 6
[
††6 7
]
††7 8
)
††8 9
,
††9 :
$num
††; >
)
††> ?
]
††? @
[
‡‡ "
ProducesResponseType
‡‡ 
(
‡‡ 
typeof
‡‡  
(
‡‡  !#
JsonResponseContainer
‡‡! 6
)
‡‡6 7
,
‡‡7 8
$num
‡‡9 <
)
‡‡< =
]
‡‡= >
public
ˆˆ 

async
ˆˆ 
Task
ˆˆ 
<
ˆˆ 
IActionResult
ˆˆ #
>
ˆˆ# $
Search
ˆˆ% +
(
ˆˆ+ ,
[
ˆˆ, -
	FromQuery
ˆˆ- 6
]
ˆˆ6 7
string
ˆˆ8 >
searchString
ˆˆ? K
,
ˆˆK L
[
ˆˆM N
	FromQuery
ˆˆN W
]
ˆˆW X
bool
ˆˆY ]
originalFandom
ˆˆ^ l
)
ˆˆl m
{
‰‰ 
var
ŠŠ 
fanfics
ŠŠ 
=
ŠŠ 
await
ŠŠ 
_fanficDetail
ŠŠ )
.
ŠŠ) *
SearchAsync
ŠŠ* 5
(
ŠŠ5 6
searchString
ŠŠ6 B
,
ŠŠB C
originalFandom
ŠŠD R
)
ŠŠR S
;
ŠŠS T
return
‹‹ 
Ok
‹‹ 
(
‹‹ 
fanfics
‹‹ 
)
‹‹ 
;
‹‹ 
}
ŒŒ 
} ª<
wC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\Fanfic\FanficController.cs
	namespace

 	
FanPage


 
.

 
Api

 
.

 
Controllers

 !
.

! "
Fanfic

" (
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
Route 
) 
] 
public 

class 
FanficController !
:" #
BaseController$ 2
{ 
private 
const 
string 
Route "
=# $
$str% 0
;0 1
private 
readonly 
IFanfic  
_fanfic! (
;( )
private 
readonly 
IMapper  
_mapper! (
;( )
public 
FanficController 
(  
IFanfic  '
fanfic( .
,. /
IMapper0 7
mapper8 >
)> ?
{ 	
_fanfic 
= 
fanfic 
; 
_mapper 
= 
mapper 
; 
} 	
["" 	
HttpPost""	 
]"" 
[## 	
Route##	 
(## 
$str## 
)## 
]## 
[$$ 	 
ProducesResponseType$$	 
($$ 
$num$$ !
)$$! "
]$$" #
[%% 	 
ProducesResponseType%%	 
(%% 
$num%% !
)%%! "
]%%" #
[&& 	 
ProducesResponseType&&	 
(&& 
typeof&& $
(&&$ %!
JsonResponseContainer&&% :
<&&: ;
FanficViewModel&&; J
>&&J K
)&&K L
,&&L M
$num&&N Q
)&&Q R
]&&R S
['' 	 
ProducesResponseType''	 
('' 
typeof'' $
(''$ %!
JsonResponseContainer''% :
['': ;
]''; <
)''< =
,''= >
$num''? B
)''B C
]''C D
[(( 	 
ProducesResponseType((	 
((( 
typeof(( $
((($ %!
JsonResponseContainer((% :
)((: ;
,((; <
$num((= @
)((@ A
]((A B
[)) 	
	Authorize))	 
()) !
AuthenticationSchemes)) (
=))) *
$str))+ 3
)))3 4
]))4 5
public** 
async** 
Task** 
<** 
IActionResult** '
>**' (
Create**) /
(**/ 0
[**0 1
FromBody**1 9
]**9 :
CreateModel**; F
createModel**G R
)**R S
{++ 	
var,, 
dto,, 
=,, 
_mapper,, 
.,, 
Map,, !
<,,! "
	CreateDto,," +
>,,+ ,
(,,, -
createModel,,- 8
),,8 9
;,,9 :
var-- 
	retrieval-- 
=-- 
await-- !
_fanfic--" )
.--) *
CreateAsync--* 5
(--5 6
dto--6 9
,--9 :
HttpContext--; F
.--F G
Request--G N
)--N O
;--O P
var.. 
response.. 
=.. 
_mapper.. "
..." #
Map..# &
<..& '
FanficViewModel..' 6
>..6 7
(..7 8
	retrieval..8 A
)..A B
;..B C
return// 
Ok// 
(// 
response// 
)// 
;//  
}00 	
[88 	
HttpPut88	 
]88 
[99 	
Route99	 
(99 
$str99 
)99 
]99 
[:: 	 
ProducesResponseType::	 
(:: 
$num:: !
)::! "
]::" #
[;; 	 
ProducesResponseType;;	 
(;; 
$num;; !
);;! "
];;" #
[<< 	 
ProducesResponseType<<	 
(<< 
typeof<< $
(<<$ %!
JsonResponseContainer<<% :
<<<: ;
FanficViewModel<<; J
><<J K
)<<K L
,<<L M
$num<<N Q
)<<Q R
]<<R S
[== 	 
ProducesResponseType==	 
(== 
typeof== $
(==$ %!
JsonResponseContainer==% :
[==: ;
]==; <
)==< =
,=== >
$num==? B
)==B C
]==C D
[>> 	 
ProducesResponseType>>	 
(>> 
typeof>> $
(>>$ %!
JsonResponseContainer>>% :
)>>: ;
,>>; <
$num>>= @
)>>@ A
]>>A B
[?? 	
	Authorize??	 
(?? !
AuthenticationSchemes?? (
=??) *
$str??+ 3
)??3 4
]??4 5
public@@ 
async@@ 
Task@@ 
<@@ 
IActionResult@@ '
>@@' (
Update@@) /
(@@/ 0
[@@0 1
FromBody@@1 9
]@@9 :
UpdateModel@@; F
updateFanfic@@G S
,@@S T
[@@U V

FromHeader@@V `
]@@` a
int@@b e
id@@f h
)@@h i
{AA 	
varBB 
dtoBB 
=BB 
_mapperBB 
.BB 
MapBB !
<BB! "
	UpdateDtoBB" +
>BB+ ,
(BB, -
updateFanficBB- 9
)BB9 :
;BB: ;
varCC 
	retrievalCC 
=CC 
awaitCC !
_fanficCC" )
.CC) *
UpdateAsyncCC* 5
(CC5 6
idCC6 8
,CC8 9
dtoCC: =
,CC= >
HttpContextCC? J
.CCJ K
RequestCCK R
)CCR S
;CCS T
varDD 
responseDD 
=DD 
_mapperDD "
.DD" #
MapDD# &
<DD& '
FanficViewModelDD' 6
>DD6 7
(DD7 8
	retrievalDD8 A
)DDA B
;DDB C
returnEE 
OkEE 
(EE 
responseEE 
)EE 
;EE  
}FF 	
[NN 	

HttpDeleteNN	 
]NN 
[OO 	
RouteOO	 
(OO 
$strOO 
)OO 
]OO 
[PP 	 
ProducesResponseTypePP	 
(PP 
$numPP !
)PP! "
]PP" #
[QQ 	 
ProducesResponseTypeQQ	 
(QQ 
$numQQ !
)QQ! "
]QQ" #
[RR 	 
ProducesResponseTypeRR	 
(RR 
typeofRR $
(RR$ %!
JsonResponseContainerRR% :
[RR: ;
]RR; <
)RR< =
,RR= >
$numRR? B
)RRB C
]RRC D
[SS 	 
ProducesResponseTypeSS	 
(SS 
typeofSS $
(SS$ %!
JsonResponseContainerSS% :
)SS: ;
,SS; <
$numSS= @
)SS@ A
]SSA B
[TT 	
	AuthorizeTT	 
(TT !
AuthenticationSchemesTT (
=TT) *
$strTT+ 3
)TT3 4
]TT4 5
publicUU 
asyncUU 
TaskUU 
<UU 
IActionResultUU '
>UU' (
DeleteUU) /
(UU/ 0
[UU0 1

FromHeaderUU1 ;
]UU; <
intUU= @
idUUA C
)UUC D
{VV 	
awaitWW 
_fanficWW 
.WW 
DeleteAsyncWW %
(WW% &
idWW& (
,WW( )
HttpContextWW* 5
.WW5 6
RequestWW6 =
)WW= >
;WW> ?
returnXX 
OkXX 
(XX 
)XX 
;XX 
}YY 	
}ZZ 
}[[ õl
xC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\Fanfic\ChapterController.cs
	namespace

 	
FanPage


 
.

 
Api

 
.

 
Controllers

 !
.

! "
Fanfic

" (
;

( )
[ 
ApiController 
] 
[ 
Route 
( 
Route 
) 
] 
public 
class 
ChapterController 
:  
BaseController! /
{ 
private 
const 
string 
Route 
=  
$str! -
;- .
private 
readonly 
IChapter 
_chapter &
;& '
private 
readonly 
IMapper 
_mapper $
;$ %
public 

ChapterController 
( 
IChapter %
fanficDetail& 2
,2 3
IMapper4 ;
mapper< B
)B C
{ 
_chapter 
= 
fanficDetail 
;  
_mapper 
= 
mapper 
; 
} 
[   
HttpPost   
]   
[!! 
Route!! 

(!!
 
$str!! 
)!! 
]!! 
[""  
ProducesResponseType"" 
("" 
$num"" 
)"" 
]"" 
[##  
ProducesResponseType## 
(## 
$num## 
)## 
]## 
[$$  
ProducesResponseType$$ 
($$ 
typeof$$  
($$  !!
JsonResponseContainer$$! 6
<$$6 7
ChapterViewModel$$7 G
>$$G H
)$$H I
,$$I J
$num$$K N
)$$N O
]$$O P
[%%  
ProducesResponseType%% 
(%% 
typeof%%  
(%%  !!
JsonResponseContainer%%! 6
[%%6 7
]%%7 8
)%%8 9
,%%9 :
$num%%; >
)%%> ?
]%%? @
[&&  
ProducesResponseType&& 
(&& 
typeof&&  
(&&  !!
JsonResponseContainer&&! 6
)&&6 7
,&&7 8
$num&&9 <
)&&< =
]&&= >
['' 
	Authorize'' 
('' !
AuthenticationSchemes'' $
=''% &
$str''' /
)''/ 0
]''0 1
public(( 

async(( 
Task(( 
<(( 
IActionResult(( #
>((# $
CreateChapter((% 2
(((2 3
[((3 4
FromBody((4 <
]((< =
ChapterModel((> J
chapterModel((K W
)((W X
{)) 
var** 

chapterDto** 
=** 
_mapper**  
.**  !
Map**! $
<**$ %

ChapterDto**% /
>**/ 0
(**0 1
chapterModel**1 =
)**= >
;**> ?
var++ 
	retrieval++ 
=++ 
await++ 
_chapter++ &
.++& '
CreateChapterAsync++' 9
(++9 :

chapterDto++: D
,++D E
HttpContext++F Q
.++Q R
Request++R Y
)++Y Z
;++Z [
var,, 
response,, 
=,, 
_mapper,, 
.,, 
Map,, "
<,," #
ChapterViewModel,,# 3
>,,3 4
(,,4 5
	retrieval,,5 >
),,> ?
;,,? @
return-- 
Ok-- 
(-- 
response-- 
)-- 
;-- 
}.. 
[66 
HttpPut66 
]66 
[77 
Route77 

(77
 
$str77 
)77 
]77 
[88  
ProducesResponseType88 
(88 
$num88 
)88 
]88 
[99  
ProducesResponseType99 
(99 
$num99 
)99 
]99 
[::  
ProducesResponseType:: 
(:: 
typeof::  
(::  !!
JsonResponseContainer::! 6
<::6 7
ChapterViewModel::7 G
>::G H
)::H I
,::I J
$num::K N
)::N O
]::O P
[;;  
ProducesResponseType;; 
(;; 
typeof;;  
(;;  !!
JsonResponseContainer;;! 6
[;;6 7
];;7 8
);;8 9
,;;9 :
$num;;; >
);;> ?
];;? @
[<<  
ProducesResponseType<< 
(<< 
typeof<<  
(<<  !!
JsonResponseContainer<<! 6
)<<6 7
,<<7 8
$num<<9 <
)<<< =
]<<= >
[== 
	Authorize== 
(== !
AuthenticationSchemes== $
===% &
$str==' /
)==/ 0
]==0 1
public>> 

async>> 
Task>> 
<>> 
IActionResult>> #
>>># $
UpdateChapter>>% 2
(>>2 3
[>>3 4
FromBody>>4 <
]>>< =
ChapterModel>>> J
chapterModel>>K W
,>>W X
[>>Y Z

FromHeader>>Z d
]>>d e
int>>f i
	chapterId>>j s
)>>s t
{?? 
var@@ 

chapterDto@@ 
=@@ 
_mapper@@  
.@@  !
Map@@! $
<@@$ %

ChapterDto@@% /
>@@/ 0
(@@0 1
chapterModel@@1 =
)@@= >
;@@> ?
varAA 
	retrievalAA 
=AA 
awaitAA 
_chapterAA &
.AA& '
UpdateChapterAsyncAA' 9
(AA9 :
	chapterIdAA: C
,AAC D

chapterDtoAAE O
,AAO P
HttpContextAAQ \
.AA\ ]
RequestAA] d
)AAd e
;AAe f
varBB 
responseBB 
=BB 
_mapperBB 
.BB 
MapBB "
<BB" #
ChapterViewModelBB# 3
>BB3 4
(BB4 5
	retrievalBB5 >
)BB> ?
;BB? @
returnDD 
OkDD 
(DD 
responseDD 
)DD 
;DD 
}EE 
[LL 

HttpDeleteLL 
]LL 
[MM 
RouteMM 

(MM
 
$strMM 
)MM 
]MM 
[NN  
ProducesResponseTypeNN 
(NN 
$numNN 
)NN 
]NN 
[OO  
ProducesResponseTypeOO 
(OO 
$numOO 
)OO 
]OO 
[PP  
ProducesResponseTypePP 
(PP 
$numPP 
)PP 
]PP 
[QQ  
ProducesResponseTypeQQ 
(QQ 
typeofQQ  
(QQ  !!
JsonResponseContainerQQ! 6
[QQ6 7
]QQ7 8
)QQ8 9
,QQ9 :
$numQQ; >
)QQ> ?
]QQ? @
[RR  
ProducesResponseTypeRR 
(RR 
typeofRR  
(RR  !!
JsonResponseContainerRR! 6
)RR6 7
,RR7 8
$numRR9 <
)RR< =
]RR= >
[SS 
	AuthorizeSS 
(SS !
AuthenticationSchemesSS $
=SS% &
$strSS' /
)SS/ 0
]SS0 1
publicTT 

asyncTT 
TaskTT 
<TT 
IActionResultTT #
>TT# $
DeleteChapterTT% 2
(TT2 3
[TT3 4

FromHeaderTT4 >
]TT> ?
intTT@ C
idTTD F
)TTF G
{UU 
awaitVV 
_chapterVV 
.VV 
DeleteChapterAsyncVV )
(VV) *
idVV* ,
,VV, -
HttpContextVV. 9
.VV9 :
RequestVV: A
)VVA B
;VVB C
returnWW 
OkWW 
(WW 
)WW 
;WW 
}XX 
[^^ 
HttpGet^^ 
]^^ 
[__ 
Route__ 

(__
 
$str__ 
)__ 
]__ 
[``  
ProducesResponseType`` 
(`` 
$num`` 
)`` 
]`` 
[aa  
ProducesResponseTypeaa 
(aa 
$numaa 
)aa 
]aa 
[bb  
ProducesResponseTypebb 
(bb 
typeofbb  
(bb  !!
JsonResponseContainerbb! 6
<bb6 7
ChapterViewModelbb7 G
>bbG H
)bbH I
,bbI J
$numbbK N
)bbN O
]bbO P
[cc  
ProducesResponseTypecc 
(cc 
typeofcc  
(cc  !!
JsonResponseContainercc! 6
[cc6 7
]cc7 8
)cc8 9
,cc9 :
$numcc; >
)cc> ?
]cc? @
[dd  
ProducesResponseTypedd 
(dd 
typeofdd  
(dd  !!
JsonResponseContainerdd! 6
)dd6 7
,dd7 8
$numdd9 <
)dd< =
]dd= >
publicee 

asyncee 
Taskee 
<ee 
IActionResultee #
>ee# $

GetChapteree% /
(ee/ 0
)ee0 1
{ff 
vargg 
	retrievalgg 
=gg 
awaitgg 
_chaptergg &
.gg& '
GetAllChaptersAsyncgg' :
(gg: ;
)gg; <
;gg< =
varhh 
responsehh 
=hh 
_mapperhh 
.hh 
Maphh "
<hh" #
Listhh# '
<hh' (
ChapterViewModelhh( 8
>hh8 9
>hh9 :
(hh: ;
	retrievalhh; D
)hhD E
;hhE F
returnii 
Okii 
(ii 
responseii 
)ii 
;ii 
}jj 
[ll 
HttpGetll 
]ll 
[mm 
Routemm 

(mm
 
$strmm 
)mm 
]mm 
[nn  
ProducesResponseTypenn 
(nn 
$numnn 
)nn 
]nn 
[oo  
ProducesResponseTypeoo 
(oo 
$numoo 
)oo 
]oo 
[pp  
ProducesResponseTypepp 
(pp 
typeofpp  
(pp  !!
JsonResponseContainerpp! 6
<pp6 7
ChapterViewModelpp7 G
>ppG H
)ppH I
,ppI J
$numppK N
)ppN O
]ppO P
[qq  
ProducesResponseTypeqq 
(qq 
typeofqq  
(qq  !!
JsonResponseContainerqq! 6
[qq6 7
]qq7 8
)qq8 9
,qq9 :
$numqq; >
)qq> ?
]qq? @
[rr  
ProducesResponseTyperr 
(rr 
typeofrr  
(rr  !!
JsonResponseContainerrr! 6
)rr6 7
,rr7 8
$numrr9 <
)rr< =
]rr= >
publicss 

asyncss 
Taskss 
<ss 
IActionResultss #
>ss# $
GetChapterByIdss% 3
(ss3 4
[ss4 5

FromHeaderss5 ?
]ss? @
intssA D
idssE G
)ssG H
{tt 
varuu 
	retrievaluu 
=uu 
awaituu 
_chapteruu &
.uu& '
GetByIdAsyncuu' 3
(uu3 4
iduu4 6
)uu6 7
;uu7 8
varvv 
responsevv 
=vv 
_mappervv 
.vv 
Mapvv "
<vv" #
ChapterViewModelvv# 3
>vv3 4
(vv4 5
	retrievalvv5 >
)vv> ?
;vv? @
returnww 
Okww 
(ww 
responseww 
)ww 
;ww 
}xx 
[ 
HttpGet 
] 
[
€€ 
Route
€€ 

(
€€
 
$str
€€ 
)
€€ 
]
€€ 
[
 "
ProducesResponseType
 
(
 
$num
 
)
 
]
 
[
‚‚ "
ProducesResponseType
‚‚ 
(
‚‚ 
$num
‚‚ 
)
‚‚ 
]
‚‚ 
[
ƒƒ "
ProducesResponseType
ƒƒ 
(
ƒƒ 
typeof
ƒƒ  
(
ƒƒ  !#
JsonResponseContainer
ƒƒ! 6
<
ƒƒ6 7
ChapterViewModel
ƒƒ7 G
>
ƒƒG H
)
ƒƒH I
,
ƒƒI J
$num
ƒƒK N
)
ƒƒN O
]
ƒƒO P
[
„„ "
ProducesResponseType
„„ 
(
„„ 
typeof
„„  
(
„„  !#
JsonResponseContainer
„„! 6
[
„„6 7
]
„„7 8
)
„„8 9
,
„„9 :
$num
„„; >
)
„„> ?
]
„„? @
[
…… "
ProducesResponseType
…… 
(
…… 
typeof
……  
(
……  !#
JsonResponseContainer
……! 6
)
……6 7
,
……7 8
$num
……9 <
)
……< =
]
……= >
public
†† 

async
†† 
Task
†† 
<
†† 
IActionResult
†† #
>
††# $"
GetChapterByFanficId
††% 9
(
††9 :
[
††: ;

FromHeader
††; E
]
††E F
int
††G J
fanficId
††K S
)
††S T
{
‡‡ 
var
ˆˆ 
	retrieval
ˆˆ 
=
ˆˆ 
await
ˆˆ 
_chapter
ˆˆ &
.
ˆˆ& '+
GetAllChaptersByFanficIdAsync
ˆˆ' D
(
ˆˆD E
fanficId
ˆˆE M
)
ˆˆM N
;
ˆˆN O
var
‰‰ 
response
‰‰ 
=
‰‰ 
_mapper
‰‰ 
.
‰‰ 
Map
‰‰ "
<
‰‰" #
List
‰‰# '
<
‰‰' (
ChapterViewModel
‰‰( 8
>
‰‰8 9
>
‰‰9 :
(
‰‰: ;
	retrieval
‰‰; D
)
‰‰D E
;
‰‰E F
return
ŠŠ 
Ok
ŠŠ 
(
ŠŠ 
response
ŠŠ 
)
ŠŠ 
;
ŠŠ 
}
‹‹ 
}ŒŒ ‚6
yC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\Fanfic\CategoryController.cs
	namespace 	
FanPage
 
. 
Api 
. 
Controllers !
.! "
Fanfic" (
;( )
[

 
ApiController

 
]

 
[ 
Route 
( 
Route 
) 
] 
public 
class 
CategoryController 
:  !
BaseController" 0
{ 
private 
const 
string 
Route 
=  
$str! .
;. /
private 
readonly 
	ICategory 
	_category (
;( )
private 
readonly 
IMapper 
_mapper $
;$ %
public 

CategoryController 
( 
	ICategory '
category( 0
,0 1
IMapper2 9
mapper: @
)@ A
{ 
	_category 
= 
category 
; 
_mapper 
= 
mapper 
; 
} 
[ 
HttpPut 
] 
[ 
Route 

(
 
$str 
) 
] 
[    
ProducesResponseType   
(   
$num   
)   
]   
[!!  
ProducesResponseType!! 
(!! 
$num!! 
)!! 
]!! 
[""  
ProducesResponseType"" 
("" 
typeof""  
(""  !!
JsonResponseContainer""! 6
<""6 7
CategoryViewModel""7 H
>""H I
)""I J
,""J K
$num""L O
)""O P
]""P Q
[##  
ProducesResponseType## 
(## 
typeof##  
(##  !!
JsonResponseContainer##! 6
[##6 7
]##7 8
)##8 9
,##9 :
$num##; >
)##> ?
]##? @
[$$  
ProducesResponseType$$ 
($$ 
typeof$$  
($$  !!
JsonResponseContainer$$! 6
)$$6 7
,$$7 8
$num$$9 <
)$$< =
]$$= >
[%% 
	Authorize%% 
(%% !
AuthenticationSchemes%% $
=%%% &
$str%%' /
)%%/ 0
]%%0 1
public&& 

async&& 
Task&& 
<&& 
IActionResult&& #
>&&# $
UpdateCategory&&% 3
(&&3 4
[&&4 5

FromHeader&&5 ?
]&&? @
int&&A D
fanficId&&E M
,&&M N
[&&O P

FromHeader&&P Z
]&&Z [
string&&\ b
categoryName&&c o
)&&o p
{'' 
var(( 
	retrieval(( 
=(( 
await(( 
	_category(( '
.((' (
SetCategoryAsync((( 8
(((8 9
fanficId((9 A
,((A B
categoryName((C O
,((O P
HttpContext((Q \
.((\ ]
Request((] d
)((d e
;((e f
var)) 
response)) 
=)) 
_mapper)) 
.)) 
Map)) "
<))" #
CategoryViewModel))# 4
>))4 5
())5 6
	retrieval))6 ?
)))? @
;))@ A
return** 
Ok** 
(** 
response** 
)** 
;** 
}++ 
[44 

HttpDelete44 
]44 
[55 
Route55 

(55
 
$str55 
)55 
]55 
[66  
ProducesResponseType66 
(66 
$num66 
)66 
]66 
[77  
ProducesResponseType77 
(77 
$num77 
)77 
]77 
[88  
ProducesResponseType88 
(88 
$num88 
)88 
]88 
[99  
ProducesResponseType99 
(99 
typeof99  
(99  !!
JsonResponseContainer99! 6
[996 7
]997 8
)998 9
,999 :
$num99; >
)99> ?
]99? @
[::  
ProducesResponseType:: 
(:: 
typeof::  
(::  !!
JsonResponseContainer::! 6
)::6 7
,::7 8
$num::9 <
)::< =
]::= >
[;; 
	Authorize;; 
(;; !
AuthenticationSchemes;; $
=;;% &
$str;;' /
);;/ 0
];;0 1
public<< 

async<< 
Task<< 
<<< 
IActionResult<< #
><<# $
DeleteCategory<<% 3
(<<3 4
[<<4 5

FromHeader<<5 ?
]<<? @
int<<A D
fanficId<<E M
,<<M N
[<<O P

FromHeader<<P Z
]<<Z [
int<<\ _

categoryId<<` j
)<<j k
{== 
await>> 
	_category>> 
.>> 
DeleteCategoryAsync>> +
(>>+ ,
fanficId>>, 4
,>>4 5

categoryId>>6 @
,>>@ A
HttpContext>>B M
.>>M N
Request>>N U
)>>U V
;>>V W
return?? 
Ok?? 
(?? 
)?? 
;?? 
}@@ 
[GG 
HttpGetGG 
]GG 
[HH 
RouteHH 

(HH
 
$strHH 
)HH 
]HH 
[II  
ProducesResponseTypeII 
(II 
$numII 
)II 
]II 
[JJ  
ProducesResponseTypeJJ 
(JJ 
typeofJJ  
(JJ  !!
JsonResponseContainerJJ! 6
[JJ6 7
]JJ7 8
)JJ8 9
,JJ9 :
$numJJ; >
)JJ> ?
]JJ? @
[KK  
ProducesResponseTypeKK 
(KK 
typeofKK  
(KK  !!
JsonResponseContainerKK! 6
)KK6 7
,KK7 8
$numKK9 <
)KK< =
]KK= >
[LL 
	AuthorizeLL 
(LL !
AuthenticationSchemesLL $
=LL% &
$strLL' /
)LL/ 0
]LL0 1
publicMM 

asyncMM 
TaskMM 
<MM 
IActionResultMM #
>MM# $ 
GetAllCategoryFanficMM% 9
(MM9 :
[MM: ;

FromHeaderMM; E
]MME F
intMMG J
fanficIdMMK S
)MMS T
{NN 
varOO 
tagsOO 
=OO 
awaitOO 
	_categoryOO "
.OO" # 
GetAllCategoryFanficOO# 7
(OO7 8
fanficIdOO8 @
)OO@ A
;OOA B
returnPP 
OkPP 
(PP 
tagsPP 
)PP 
;PP 
}QQ 
}RR ˆ
nC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Controllers\BaseController.cs
	namespace 	
FanPage
 
. 
Api 
. 
Controllers !
{ 
public 

class 
BaseController 
:  !
ControllerBase" 0
{ 
[ 	
HttpGet	 
] 
public 
string 
? 
	GetUserId  
(  !
)! "
{		 	
return

 
User

 
.

 
Claims

 
.

 
FirstOrDefault

 -
(

- .
c

. /
=>

0 2
c

3 4
.

4 5
Type

5 9
==

: <
$str

= E
)

E F
?

F G
.

G H
Value

H M
;

M N
} 	
} 
} ›á
yC:\Users\pavlo\source\repos\NonamePoc\FanPage\server\FanPage.Backend\FanPage.Api\Configure\ServiceCollectionExtensions.cs
	namespace&& 	
FanPage&&
 
.&& 
Api&& 
.&& 
	Configure&& 
{'' 
public(( 

static(( 
class(( '
ServiceCollectionExtensions(( 3
{)) 
public** 
static** 
IServiceCollection** (
DataBase**) 1
(**1 2
this**2 6
IServiceCollection**7 I
services**J R
,**R S
IConfiguration**T b
configuration**c p
)**p q
{++ 	
services,, 
.,, 
AddSingleton,, !
(,,! "
configuration,," /
.,,/ 0

GetSection,,0 :
(,,: ;
$str,,; U
),,U V
.,,V W
Get,,W Z
<,,Z [$
DefaultUserConfiguration,,[ s
>,,s t
(,,t u
),,u v
),,v w
;,,w x
services-- 
.-- 
AddSingleton-- !
(--! "
configuration--" /
.--/ 0

GetSection--0 :
(--: ;
$str--; U
)--U V
.--V W
Get--W Z
<--Z [$
DefaultUserConfiguration--[ s
>--s t
(--t u
)--u v
)--v w
;--w x
services// 
.// 
AddDbContext// !
<//! "
UserContext//" -
>//- .
(//. /
optionsAction/// <
=>//= ?
{00 
optionsAction11 
.11 
	UseNpgsql11 '
(11' (
configuration11( 5
.115 6
GetConnectionString116 I
(11I J
$str11J [
)11[ \
)11\ ]
.22 
UseLoggerFactory22 %
(22% &
new22& )
LoggerFactory22* 7
(227 8
)228 9
)229 :
;22: ;
}33 
)33 
;33 
services55 
.55 
AddIdentity55  
<55  !
User55! %
,55% &
IdentityRole55' 3
>553 4
(554 5
options555 <
=>55= ?
{55@ A
}55B C
)55C D
.66 $
AddEntityFrameworkStores66 )
<66) *
UserContext66* 5
>665 6
(666 7
)667 8
.77 $
AddDefaultTokenProviders77 )
(77) *
)77* +
;77+ ,
services99 
.99 
AddDbContext99 !
<99! "
FanficContext99" /
>99/ 0
(990 1
optionsAction991 >
=>99? A
optionsAction99B O
.:: 
	UseNpgsql:: 
(:: 
configuration:: (
.::( )
GetConnectionString::) <
(::< =
$str::= P
)::P Q
)::Q R
)::R S
;::S T
services<< 
.<< 
AddDbContext<< !
<<<! "
ChatContext<<" -
><<- .
(<<. /
optionsAction<</ <
=><<= ?
optionsAction<<@ M
.== 
	UseNpgsql== 
(== 
configuration== (
.==( )
GetConnectionString==) <
(==< =
$str=== N
)==N O
)==O P
)==P Q
;==Q R
services?? 
.?? 
	AddScoped?? 
<?? 
IdentityUserManager?? 2
>??2 3
(??3 4
)??4 5
;??5 6
servicesAA 
.AA 
AddIdentityCoreAA $
<AA$ %
UserAA% )
>AA) *
(AA* +
optsAA+ /
=>AA0 2
{BB 
optsCC 
.CC 
PasswordCC !
.CC! "
RequireDigitCC" .
=CC/ 0
trueCC1 5
;CC5 6
optsDD 
.DD 
PasswordDD !
.DD! "
RequireLowercaseDD" 2
=DD3 4
trueDD5 9
;DD9 :
optsEE 
.EE 
PasswordEE !
.EE! "
RequireUppercaseEE" 2
=EE3 4
trueEE5 9
;EE9 :
optsFF 
.FF 
PasswordFF !
.FF! ""
RequireNonAlphanumericFF" 8
=FF9 :
trueFF; ?
;FF? @
optsGG 
.GG 
UserGG 
.GG 
RequireUniqueEmailGG 0
=GG1 2
trueGG3 7
;GG7 8
optsHH 
.HH 
UserHH 
.HH %
AllowedUserNameCharactersHH 7
=HH8 9
nullHH: >
;HH> ?
}II 
)II 
.JJ 
AddRolesJJ 
<JJ 
IdentityRoleJJ &
>JJ& '
(JJ' (
)JJ( )
.KK 
AddSignInManagerKK !
(KK! "
)KK" #
.LL $
AddDefaultTokenProvidersLL )
(LL) *
)LL* +
.MM $
AddEntityFrameworkStoresMM )
<MM) *
UserContextMM* 5
>MM5 6
(MM6 7
)MM7 8
;MM8 9
returnOO 
servicesOO 
;OO 
}PP 	
publicRR 
staticRR 
IServiceCollectionRR (
ConfigureRepositoryRR) <
(RR< =
thisRR= A
IServiceCollectionRRB T
servicesRRU ]
)RR] ^
{SS 	
servicesTT 
.TT 
	AddScopedTT 
<TT 
IFanficRepositoryTT 0
,TT0 1
FanficRepositoryTT2 B
>TTB C
(TTC D
)TTD E
;TTE F
servicesUU 
.UU 
	AddScopedUU 
<UU 
ICategoryRepositoryUU 2
,UU2 3
CategoryRepositoryUU4 F
>UUF G
(UUG H
)UUH I
;UUI J
servicesVV 
.VV 
	AddScopedVV 
<VV 
ITagRepositoryVV -
,VV- .
TagRepositoryVV/ <
>VV< =
(VV= >
)VV> ?
;VV? @
servicesWW 
.WW 
	AddScopedWW 
<WW "
IFanficPhotoRepositoryWW 5
,WW5 6!
FanficPhotoRepositoryWW7 L
>WWL M
(WWM N
)WWN O
;WWO P
servicesXX 
.XX 
	AddScopedXX 
<XX #
ICommentPhotoRepositoryXX 6
,XX6 7"
CommentPhotoRepositoryXX8 N
>XXN O
(XXO P
)XXP Q
;XXQ R
servicesYY 
.YY 
	AddScopedYY 
<YY  
IUserPhotoRepositoryYY 3
,YY3 4
UserPhotoRepositoryYY5 H
>YYH I
(YYI J
)YYJ K
;YYK L
servicesZZ 
.ZZ 
	AddScopedZZ 
<ZZ 
IChapterRepositoryZZ 1
,ZZ1 2
ChapterRepositoryZZ3 D
>ZZD E
(ZZE F
)ZZF G
;ZZG H
services[[ 
.[[ 
	AddScoped[[ 
<[[ 
ICommentRepository[[ 1
,[[1 2
CommentRepository[[3 D
>[[D E
([[E F
)[[F G
;[[G H
services\\ 
.\\ 
	AddScoped\\ 
<\\ 
IChatRepository\\ .
,\\. /
ChatRepository\\0 >
>\\> ?
(\\? @
)\\@ A
;\\A B
services]] 
.]] 
	AddScoped]] 
<]] 
IFriendRepository]] 0
,]]0 1
FriendRepository]]2 B
>]]B C
(]]C D
)]]D E
;]]E F
services^^ 
.^^ 
	AddScoped^^ 
<^^ 
IFollowerRepository^^ 2
,^^2 3
FollowerRepository^^4 F
>^^F G
(^^G H
)^^H I
;^^I J
services__ 
.__ 
	AddScoped__ 
<__ 
IBookmarkRepository__ 2
,__2 3
BookmarksRepository__4 G
>__G H
(__H I
)__I J
;__J K
services`` 
.`` 
	AddScoped`` 
<`` ,
 ICustomizationSettingsRepository`` ?
,``? @+
CustomizationSettingsRepository``A `
>``` a
(``a b
)``b c
;``c d
returnaa 
servicesaa 
;aa 
}bb 	
publicdd 
staticdd 
IServiceCollectiondd (
Loggerdd) /
(dd/ 0
thisdd0 4
IServiceCollectiondd5 G
servicesddH P
,ddP Q
IConfigurationddR `
configurationdda n
)ddn o
{ee 	
servicesff 
.ff 
	Configureff 
<ff  
LoggingConfigurationff 3
>ff3 4
(ff4 5
configurationff5 B
.ffB C

GetSectionffC M
(ffM N
$strffN W
)ffW X
)ffX Y
;ffY Z
servicesgg 
.gg 
	AddScopedgg 
<gg 
LoggingServicegg -
>gg- .
(gg. /
)gg/ 0
;gg0 1
returnhh 
serviceshh 
;hh 
}ii 	
publickk 
statickk 
IApplicationBuilderkk )
UseApiLoggingkk* 7
(kk7 8
thiskk8 <
IApplicationBuilderkk= P
appkkQ T
)kkT U
{ll 	
appmm 
.mm 
Usemm 
(mm 
asyncmm 
(mm 
contextmm "
,mm" #
nextmm$ (
)mm( )
=>mm* ,
{nn 
varoo 
loggingServiceoo "
=oo# $
contextoo% ,
.oo, -
RequestServicesoo- <
.oo< =
GetRequiredServiceoo= O
<ooO P
LoggingServiceooP ^
>oo^ _
(oo_ `
)oo` a
;ooa b
loggingServicepp 
.pp 
LogApiRequestpp ,
(pp, -
contextpp- 4
)pp4 5
;pp5 6
awaitqq 
nextqq 
(qq 
)qq 
;qq 
loggingServicerr 
.rr 
LogApiResponserr -
(rr- .
contextrr. 5
)rr5 6
;rr6 7
}ss 
)ss 
;ss 
returnuu 
appuu 
;uu 
}vv 	
publicxx 
staticxx 
IServiceCollectionxx (#
ConfigureAuthenticationxx) @
(xx@ A
thisxxA E
IServiceCollectionxxF X
servicesxxY a
,xxa b
IConfigurationyy 
configurationyy (
)yy( )
{zz 	
var{{ 
	jwtConfig{{ 
={{ 
configuration{{ )
.{{) *

GetSection{{* 4
({{4 5
$str{{5 G
){{G H
.{{H I
Get{{I L
<{{L M
JwtConfiguration{{M ]
>{{] ^
({{^ _
){{_ `
;{{` a
var|| 
googleConfig|| 
=|| 
configuration|| ,
.||, -

GetSection||- 7
(||7 8
$str||8 M
)||M N
.||N O
Get||O R
<||R S
GoogleConfiguration||S f
>||f g
(||g h
)||h i
;||i j
services~~ 
.~~ 
AddSingleton~~ !
<~~! "
IPasswordSettings~~" 3
>~~3 4
(~~4 5
s~~5 6
=>~~7 9
new  
UserPasswordSettings (
(( )
true) -
,- .
true/ 3
,3 4
true5 9
,9 :
true; ?
,? @
$numA C
,C D
intE H
.H I
MaxValueI Q
,Q R
falseS X
)X Y
)Y Z
;Z [
services
€€ 
.
€€ 
AddSingleton
€€ !
<
€€! "
IPasswordManager
€€" 2
,
€€2 3
PasswordManager
€€4 C
>
€€C D
(
€€D E
)
€€E F
;
€€F G
services
‚‚ 
.
‚‚ 
AddSingleton
‚‚ !
(
‚‚! "
	jwtConfig
‚‚" +
)
‚‚+ ,
;
‚‚, -
services
ƒƒ 
.
ƒƒ 
AddSingleton
ƒƒ !
<
ƒƒ! "%
JwtSecurityTokenHandler
ƒƒ" 9
>
ƒƒ9 :
(
ƒƒ: ;
)
ƒƒ; <
;
ƒƒ< =
services
…… 
.
…… 
	AddScoped
…… 
<
…… %
JwtValidationMiddleware
…… 6
>
……6 7
(
……7 8
)
……8 9
;
……9 :
services
†† 
.
†† 
	AddScoped
†† 
<
†† 
IJwtGenerator
†† ,
,
††, -
JwtGenerator
††. :
>
††: ;
(
††; <
)
††< =
;
††= >
services
‡‡ 
.
‡‡ 
	AddScoped
‡‡ 
<
‡‡ 
IJwtTokenManager
‡‡ /
,
‡‡/ 0
JwtTokenManager
‡‡1 @
>
‡‡@ A
(
‡‡A B
)
‡‡B C
;
‡‡C D
services
‰‰ 
.
‰‰ 
	AddScoped
‰‰ 
<
‰‰ *
CustomizationSettingsService
‰‰ ;
>
‰‰; <
(
‰‰< =
)
‰‰= >
;
‰‰> ?
var
‹‹ 
key
‹‹ 
=
‹‹ 
new
‹‹ "
SymmetricSecurityKey
‹‹ .
(
‹‹. /
Encoding
‹‹/ 7
.
‹‹7 8
UTF8
‹‹8 <
.
‹‹< =
GetBytes
‹‹= E
(
‹‹E F
	jwtConfig
‹‹F O
.
‹‹O P
Key
‹‹P S
)
‹‹S T
)
‹‹T U
;
‹‹U V
services
ŒŒ 
.
ŒŒ 
AddAuthentication
ŒŒ &
(
ŒŒ& '
JwtBearerDefaults
ŒŒ' 8
.
ŒŒ8 9"
AuthenticationScheme
ŒŒ9 M
)
ŒŒM N
.
 
	AddGoogle
 
(
 
options
 "
=>
# %
{
ŽŽ 
options
 
.
 
ClientId
 $
=
% &
googleConfig
' 3
.
3 4
GoogleClientId
4 B
;
B C
options
 
.
 
ClientSecret
 (
=
) *
googleConfig
+ 7
.
7 8 
GoogleClientSecret
8 J
;
J K
}
‘‘ 
)
‘‘ 
.
’’ 
AddJwtBearer
’’ 
(
’’ 
opt
““ 
=>
““ 
{
”” 
opt
•• 
.
•• '
TokenValidationParameters
•• 5
=
••6 7
new
••8 ;'
TokenValidationParameters
••< U
{
–– &
ValidateIssuerSigningKey
—— 4
=
——5 6
true
——7 ;
,
——; <
IssuerSigningKey
˜˜ ,
=
˜˜- .
key
˜˜/ 2
,
˜˜2 3
ValidateAudience
™™ ,
=
™™- .
false
™™/ 4
,
™™4 5
ValidateIssuer
šš *
=
šš+ ,
false
šš- 2
,
šš2 3
	ClockSkew
›› %
=
››& '
TimeSpan
››( 0
.
››0 1
Zero
››1 5
}
œœ 
;
œœ 
opt
žž 
.
žž 
Events
žž "
=
žž# $
new
žž% (
JwtBearerEvents
žž) 8
{
ŸŸ $
OnAuthenticationFailed
   2
=
  3 4
context
  5 <
=>
  = ?
{
¡¡ 
if
¢¢  "
(
¢¢# $
context
¢¢$ +
.
¢¢+ ,
	Exception
¢¢, 5
.
¢¢5 6
GetType
¢¢6 =
(
¢¢= >
)
¢¢> ?
==
¢¢@ B
typeof
¢¢C I
(
¢¢I J+
SecurityTokenExpiredException
¢¢J g
)
¢¢g h
)
¢¢h i
context
££$ +
.
££+ ,
Response
££, 4
.
££4 5
Headers
££5 <
.
££< =
Add
££= @
(
££@ A
$str
££A P
,
££P Q
$str
££R X
)
££X Y
;
££Y Z
return
¥¥  &
Task
¥¥' +
.
¥¥+ ,
CompletedTask
¥¥, 9
;
¥¥9 :
}
¦¦ 
}
§§ 
;
§§ 
}
¨¨ 
)
¨¨ 
;
¨¨ 
return
ªª 
services
ªª 
;
ªª 
}
«« 	
public
­­ 
static
­­  
IServiceCollection
­­ (
ConfigureMapper
­­) 8
(
­­8 9
this
­­9 = 
IServiceCollection
­­> P
services
­­Q Y
)
­­Y Z
{
®® 	
services
¯¯ 
.
¯¯ 
AddSingleton
¯¯ !
(
¯¯! "
new
¯¯" %!
MapperConfiguration
¯¯& 9
(
¯¯9 :
mc
¯¯: <
=>
¯¯= ?
{
°° 
mc
±± 
.
±± 
AddProfiles
±± "
(
±±" #
new
±±# &
Profile
±±' .
[
±±. /
]
±±/ 0
{
²² 
new
³³ '
OutputModelsMapperProfile
³³ 5
(
³³5 6
)
³³6 7
,
³³7 8
}
´´ 
)
´´ 
;
´´ 
}
µµ 
)
µµ 
.
¶¶ 
CreateMapper
¶¶ 
(
¶¶ 
)
¶¶ 
)
¶¶  
;
¶¶  !
return
¸¸ 
services
¸¸ 
;
¸¸ 
}
¹¹ 	
public
»» 
static
»»  
IServiceCollection
»» ('
ConfigureBusinessServices
»») B
(
»»B C
this
»»C G 
IServiceCollection
»»H Z
services
»»[ c
)
»»c d
{
¼¼ 	
services
½½ 
.
½½ 
	AddScoped
½½ 
<
½½ 
IAccount
½½ '
,
½½' (
AccountServiÑe
½½) 7
>
½½7 8
(
½½8 9
)
½½9 :
;
½½: ;
services
¾¾ 
.
¾¾ 
	AddScoped
¾¾ 
<
¾¾ 
IAuth
¾¾ $
,
¾¾$ %
AuthService
¾¾& 1
>
¾¾1 2
(
¾¾2 3
)
¾¾3 4
;
¾¾4 5
services
¿¿ 
.
¿¿ 
	AddScoped
¿¿ 
<
¿¿ 
IAdmin
¿¿ %
,
¿¿% &
AdminService
¿¿' 3
>
¿¿3 4
(
¿¿4 5
)
¿¿5 6
;
¿¿6 7
services
ÀÀ 
.
ÀÀ 
	AddScoped
ÀÀ 
<
ÀÀ 
IFanfic
ÀÀ &
,
ÀÀ& '
FanficService
ÀÀ( 5
>
ÀÀ5 6
(
ÀÀ6 7
)
ÀÀ7 8
;
ÀÀ8 9
services
ÁÁ 
.
ÁÁ 
	AddScoped
ÁÁ 
<
ÁÁ 
IFanficDetail
ÁÁ ,
,
ÁÁ, -!
FanficDetailService
ÁÁ. A
>
ÁÁA B
(
ÁÁB C
)
ÁÁC D
;
ÁÁD E
services
ÂÂ 
.
ÂÂ 
	AddScoped
ÂÂ 
<
ÂÂ 
	ICategory
ÂÂ (
,
ÂÂ( )
CategoryService
ÂÂ* 9
>
ÂÂ9 :
(
ÂÂ: ;
)
ÂÂ; <
;
ÂÂ< =
services
ÃÃ 
.
ÃÃ 
	AddScoped
ÃÃ 
<
ÃÃ 
ITag
ÃÃ #
,
ÃÃ# $

TagService
ÃÃ% /
>
ÃÃ/ 0
(
ÃÃ0 1
)
ÃÃ1 2
;
ÃÃ2 3
services
ÄÄ 
.
ÄÄ 
	AddScoped
ÄÄ 
<
ÄÄ 
IChapter
ÄÄ '
,
ÄÄ' (
ChapterService
ÄÄ) 7
>
ÄÄ7 8
(
ÄÄ8 9
)
ÄÄ9 :
;
ÄÄ: ;
services
ÅÅ 
.
ÅÅ 
	AddScoped
ÅÅ 
<
ÅÅ 
IReview
ÅÅ &
,
ÅÅ& '
ReviewService
ÅÅ( 5
>
ÅÅ5 6
(
ÅÅ6 7
)
ÅÅ7 8
;
ÅÅ8 9
services
ÆÆ 
.
ÆÆ 
	AddScoped
ÆÆ 
<
ÆÆ 
IComment
ÆÆ '
,
ÆÆ' (
CommentService
ÆÆ) 7
>
ÆÆ7 8
(
ÆÆ8 9
)
ÆÆ9 :
;
ÆÆ: ;
services
ÇÇ 
.
ÇÇ 
	AddScoped
ÇÇ 
<
ÇÇ 
IChat
ÇÇ $
,
ÇÇ$ %
ChatService
ÇÇ& 1
>
ÇÇ1 2
(
ÇÇ2 3
)
ÇÇ3 4
;
ÇÇ4 5
services
ÈÈ 
.
ÈÈ 
	AddScoped
ÈÈ 
<
ÈÈ 
IFriend
ÈÈ &
,
ÈÈ& '
FriendService
ÈÈ( 5
>
ÈÈ5 6
(
ÈÈ6 7
)
ÈÈ7 8
;
ÈÈ8 9
services
ÉÉ 
.
ÉÉ 
	AddScoped
ÉÉ 
<
ÉÉ 
	IFollower
ÉÉ (
,
ÉÉ( )
FollowerService
ÉÉ* 9
>
ÉÉ9 :
(
ÉÉ: ;
)
ÉÉ; <
;
ÉÉ< =
services
ÊÊ 
.
ÊÊ 
	AddScoped
ÊÊ 
<
ÊÊ 
	IBookmark
ÊÊ (
,
ÊÊ( )
BookmarkService
ÊÊ* 9
>
ÊÊ9 :
(
ÊÊ: ;
)
ÊÊ; <
;
ÊÊ< =
services
ËË 
.
ËË 
	AddScoped
ËË 
<
ËË $
ICustomizationSettings
ËË 5
,
ËË5 6*
CustomizationSettingsService
ËË7 S
>
ËËS T
(
ËËT U
)
ËËU V
;
ËËV W
return
ÌÌ 
services
ÌÌ 
;
ÌÌ 
}
ÍÍ 	
public
ÏÏ 
static
ÏÏ  
IServiceCollection
ÏÏ ("
ConfigureApplication
ÏÏ) =
(
ÏÏ= >
this
ÏÏ> B 
IServiceCollection
ÏÏC U
services
ÏÏV ^
,
ÏÏ^ _
IConfiguration
ÐÐ 
configuration
ÐÐ (
)
ÐÐ( )
{
ÑÑ 	
services
ÒÒ 
.
ÒÒ 
AddSingleton
ÒÒ !
(
ÒÒ! "
configuration
ÒÒ" /
.
ÒÒ/ 0

GetSection
ÒÒ0 :
(
ÒÒ: ;
$str
ÒÒ; U
)
ÒÒU V
.
ÒÒV W
Get
ÒÒW Z
<
ÒÒZ [&
ApplicationConfiguration
ÒÒ[ s
>
ÒÒs t
(
ÒÒt u
)
ÒÒu v
)
ÒÒv w
;
ÒÒw x
return
ÓÓ 
services
ÓÓ 
;
ÓÓ 
}
ÔÔ 	
public
ÖÖ 
static
ÖÖ  
IServiceCollection
ÖÖ (
ConfigureSmtp
ÖÖ) 6
(
ÖÖ6 7
this
ÖÖ7 ; 
IServiceCollection
ÖÖ< N
services
ÖÖO W
,
ÖÖW X
IConfiguration
×× 
configuration
×× (
)
××( )
{
ØØ 	
services
ÙÙ 
.
ÙÙ 
AddSingleton
ÙÙ !
(
ÙÙ! "
configuration
ÙÙ" /
.
ÙÙ/ 0

GetSection
ÙÙ0 :
(
ÙÙ: ;
$str
ÙÙ; N
)
ÙÙN O
.
ÙÙO P
Get
ÙÙP S
<
ÙÙS T
SmtpConfiguration
ÙÙT e
>
ÙÙe f
(
ÙÙf g
)
ÙÙg h
)
ÙÙh i
;
ÙÙi j
services
ÚÚ 
.
ÚÚ 
AddSingleton
ÚÚ !
<
ÚÚ! "
IEmailService
ÚÚ" /
,
ÚÚ/ 0
FanPage
ÚÚ1 8
.
ÚÚ8 9
EmailService
ÚÚ9 E
.
ÚÚE F
Implementations
ÚÚF U
.
ÚÚU V
EmailService
ÚÚV b
>
ÚÚb c
(
ÚÚc d
)
ÚÚd e
;
ÚÚe f
return
ÜÜ 
services
ÜÜ 
;
ÜÜ 
}
ÝÝ 	
public
ßß 
static
ßß  
IServiceCollection
ßß (
ConfigureSwagger
ßß) 9
(
ßß9 :
this
àà  
IServiceCollection
àà #
services
àà$ ,
,
àà, -
IConfiguration
áá 
configuration
áá (
,
áá( )
OpenApiInfo
ââ 
info
ââ 
)
ââ 
{
ãã 	
services
ää 
.
ää 
AddSwaggerGen
ää "
(
ää" #
c
ää# $
=>
ää% '
{
åå 
c
ææ 
.
ææ 

SwaggerDoc
ææ 
(
ææ 
info
ææ !
.
ææ! "
Version
ææ" )
,
ææ) *
info
ææ+ /
)
ææ/ 0
;
ææ0 1
c
çç 
.
çç 
DocumentFilter
çç  
<
çç  !#
EnumDescriptionFilter
çç! 6
>
çç6 7
(
çç7 8
)
çç8 9
;
çç9 :
c
èè 
.
èè #
AddSecurityDefinition
èè '
(
èè' (
$str
èè( 0
,
èè0 1
new
èè2 5#
OpenApiSecurityScheme
èè6 K
{
éé 
Name
êê 
=
êê 
$str
êê *
,
êê* +
Type
ëë 
=
ëë  
SecuritySchemeType
ëë -
.
ëë- .
ApiKey
ëë. 4
,
ëë4 5
Scheme
ìì 
=
ìì 
$str
ìì %
,
ìì% &
BearerFormat
íí  
=
íí! "
$str
íí# (
,
íí( )
In
îî 
=
îî 
ParameterLocation
îî *
.
îî* +
Header
îî+ 1
,
îî1 2
Description
ïï 
=
ïï  !
$str
ïï" u
,
ïïu v
}
ðð 
)
ðð 
;
ðð 
c
òò 
.
òò 
OperationFilter
òò !
<
òò! "!
AuthOperationFilter
òò" 5
>
òò5 6
(
òò6 7
)
òò7 8
;
òò8 9
}
óó 
)
óó 
;
óó 
services
õõ 
.
õõ 
	Configure
õõ 
<
õõ 
SwaggerConfig
õõ ,
>
õõ, -
(
õõ- .
configuration
õõ. ;
)
õõ; <
;
õõ< =
return
öö 
services
öö 
;
öö 
}
÷÷ 	
public
ùù 
static
ùù 
void
ùù 
SeedIdentity
ùù '
(
ùù' (
this
ùù( ,!
IApplicationBuilder
ùù- @
app
ùùA D
)
ùùD E
{
úú 	
using
ûû 
var
ûû 
scope
ûû 
=
ûû 
app
ûû !
.
ûû! "!
ApplicationServices
ûû" 5
.
ûû5 6
CreateScope
ûû6 A
(
ûûA B
)
ûûB C
;
ûûC D
var
üü 
serviceProvider
üü 
=
üü  !
scope
üü" '
.
üü' (
ServiceProvider
üü( 7
;
üü7 8
var
þþ 
roleManager
þþ 
=
þþ 
serviceProvider
þþ -
.
þþ- . 
GetRequiredService
þþ. @
<
þþ@ A
RoleManager
þþA L
<
þþL M
IdentityRole
þþM Y
>
þþY Z
>
þþZ [
(
þþ[ \
)
þþ\ ]
;
þþ] ^
foreach
€€ 
(
€€ 
var
€€ 
roleName
€€ !
in
€€" $
Enum
€€% )
.
€€) *
GetNames
€€* 2
(
€€2 3
typeof
€€3 9
(
€€9 :
UserRole
€€: B
)
€€B C
)
€€C D
)
€€D E
if
 
(
 
!
 
roleManager
  
.
  !
RoleExistsAsync
! 0
(
0 1
roleName
1 9
)
9 :
.
: ;

GetAwaiter
; E
(
E F
)
F G
.
G H
	GetResult
H Q
(
Q R
)
R S
)
S T
roleManager
‚‚ 
.
‚‚  
CreateAsync
‚‚  +
(
‚‚+ ,
new
‚‚, /
IdentityRole
‚‚0 <
(
‚‚< =
roleName
‚‚= E
)
‚‚E F
)
‚‚F G
.
‚‚G H

GetAwaiter
‚‚H R
(
‚‚R S
)
‚‚S T
.
‚‚T U
	GetResult
‚‚U ^
(
‚‚^ _
)
‚‚_ `
;
‚‚` a
var
„„ 
userManager
„„ 
=
„„ 
serviceProvider
„„ -
.
„„- . 
GetRequiredService
„„. @
<
„„@ A!
IdentityUserManager
„„A T
>
„„T U
(
„„U V
)
„„V W
;
„„W X
if
†† 
(
†† 
userManager
†† 
.
†† 
Users
†† !
.
††! "
Any
††" %
(
††% &
)
††& '
)
††' (
return
‡‡ 
;
‡‡ 
var
‰‰ 
configuration
‰‰ 
=
‰‰ 
serviceProvider
‰‰  /
.
‰‰/ 0 
GetRequiredService
‰‰0 B
<
‰‰B C&
DefaultUserConfiguration
‰‰C [
>
‰‰[ \
(
‰‰\ ]
)
‰‰] ^
;
‰‰^ _
var
‹‹ 
user
‹‹ 
=
‹‹ 
new
‹‹ 
User
‹‹ 
{
ŒŒ 
Email
 
=
 
configuration
 %
.
% &
Email
& +
,
+ ,
UserName
ŽŽ 
=
ŽŽ 
configuration
ŽŽ (
.
ŽŽ( )
UserName
ŽŽ) 1
,
ŽŽ1 2
EmailConfirmed
 
=
  
true
! %
}
 
;
 
userManager
’’ 
.
’’ 
CreateAsync
’’ #
(
’’# $
user
’’$ (
,
’’( )
configuration
’’* 7
.
’’7 8
Password
’’8 @
)
’’@ A
.
’’A B

GetAwaiter
’’B L
(
’’L M
)
’’M N
.
’’N O
	GetResult
’’O X
(
’’X Y
)
’’Y Z
;
’’Z [
userManager
”” 
.
”” 
AddToRoleAsync
”” &
(
””& '
user
””' +
,
””+ ,
nameof
””- 3
(
””3 4
UserRole
””4 <
.
””< =
User
””= A
)
””A B
)
””B C
.
””C D

GetAwaiter
””D N
(
””N O
)
””O P
.
””P Q
	GetResult
””Q Z
(
””Z [
)
””[ \
;
””\ ]
}
•• 	
}
–– 
}—— 
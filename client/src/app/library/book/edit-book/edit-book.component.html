<h1 class='text-lg lg:text-2xl font-semibold md:mb-4'>Tell us more about your story</h1>

<form [formGroup]="bookForm" (ngSubmit)='onSubmit()'>
    <div class='grid md:grid-cols-3 gap-10 bg-neutral-100 rounded py-5 px-4'>
        <div class='grid grid-cols-[auto_1fr] gap-2 relative'>
            <span class="material-symbols-rounded text-3xl text-blue-600 font-semibold">
                title
            </span>
            <div class='mt-1'>
                <h2 class='text-xl font-medium mb-2'>Title</h2>
                <input formControlName='title' placeholder="My story"
                    class='p-2 rounded-md border border-slate-300 w-full bg-slate-200 focus:border-blue-300 transition duration-200' />
                <div [ngClass]="{'opacity-100': bookForm.get('title')?.invalid && bookForm.get('title')?.touched}"
                    class="opacity-0 cursor-default transition duration-300 absolute text-sm bg-red-200 rounded px-2">
                    <span *ngIf="bookForm.get('title')?.errors?.['required']">Title cannot be empty</span>
                    <span *ngIf="bookForm.get('title')?.errors?.['minlength']">
                        Title must be at least 2 characters long
                    </span>
                    <span *ngIf="bookForm.get('title')?.errors?.['maxlength']">
                        Title cannot be longer than 20 characters
                    </span>
                </div>
                <p class='text-sm text-stone-700 mt-2'>
                    Provide the accurate and complete name of the book to
                    ensure proper identification and
                    cataloging.
                </p>
            </div>
        </div>

        <div class='grid grid-cols-[auto_1fr] gap-2'>
            <span class="material-symbols-rounded text-3xl text-blue-600 font-semibold">
                signature
            </span>
            <div class='mt-1 relative'>
                <h2 class='text-xl font-medium mb-2'>Description</h2>
                <textarea formControlName='description' rows="4" placeholder='My book is about a ...'
                    class='resize-none py-1 px-2 rounded-md border border-slate-300 w-full bg-slate-200 focus:border-blue-300 transition duration-200'></textarea>
                <div [ngClass]="{'opacity-100': bookForm.get('description')?.invalid && bookForm.get('description')?.touched}"
                    class="opacity-0 cursor-default transition duration-300 absolute text-sm bg-red-200 rounded px-2">
                    <span *ngIf="bookForm.get('description')?.errors?.['required']">Description cannot be empty</span>
                    <span *ngIf="bookForm.get('description')?.errors?.['minlength']">
                        Description must be at least 2 characters long
                    </span>
                    <span *ngIf="bookForm.get('description')?.errors?.['maxlength']">
                        Description cannot be longer than 300 characters
                    </span>
                </div>
                <p class='text-sm text-stone-700 mt-2'>
                    Please provide a brief yet comprehensive description of the book. Summarize the key
                    themes, plot, and any unique
                    elements that make the book noteworthy.
                </p>
            </div>
        </div>

        <div class='grid grid-cols-[auto_1fr] gap-2'>
            <span class="material-symbols-rounded text-3xl text-blue-600 font-semibold">
                translate
            </span>
            <div class='mt-1'>
                <h2 class='text-xl font-medium mb-2'>Language</h2>
                <app-language-selector formControlName='language'></app-language-selector>
                <p class='text-sm text-stone-700 mt-2'>
                    Select the primary language in which the book is written. Choose the language that
                    represents the main text and
                    communication within the book.
                </p>
            </div>
        </div>
    </div>

    <hr>

    <div class='grid md:grid-cols-3 gap-10 bg-neutral-100 py-5 px-3'>

        <div class='grid grid-cols-[auto_1fr] gap-2'>
            <span class="material-symbols-rounded text-3xl text-blue-600 font-semibold">
                wallpaper
            </span>
            <div class='mt-1'>
                <h2 class='mt-1 text-xl font-medium mb-2'>Cover</h2>
                <div
                    class='relative object-cover h-48 flex flex-col items-center justify-center rounded-md border border-slate-300 w-full bg-slate-200 hover:border-blue-300 transition duration-200'>
                    <p *ngIf="!bookForm.get('cover')?.value" class='text-sm text-stone-700 text-center px-5'>
                        Choose a high-quality image that accurately
                        reflects the aesthetics and essence
                        of the book.
                    </p>
                    <span class="material-symbols-rounded text-3xl text-blue-600">
                        cloud_upload
                    </span>
                    <input (change)='selectImage($event)' type="file" accept='image/*'
                        class='cursor-pointer opacity-0 absolute h-full w-full z-20' />
                    <img *ngIf="bookForm.get('cover')?.value" [src]="preview" alt="Cover Preview"
                        class='absolute h-full w-full object-contain opacity-100 hover:opacity-100 transition duration-200 cursor-pointer -z-index-20'>
                </div>
            </div>
        </div>

        <div class='grid grid-cols-[auto_1fr] gap-2'>
            <span class="material-symbols-rounded text-3xl text-blue-600 font-semibold">
                category
            </span>
            <div class='mt-1'>
                <h2 class='text-xl font-medium mb-2'>Categories</h2>
                <app-category-selector formControlName="categories"></app-category-selector>
                <p class='text-sm text-stone-700 mt-2'>
                    Select the appropriate categories or genres that best describe the book. Choose from a
                    predefined list of categories
                    that encompass the main themes and topics of the book.
                </p>
            </div>
        </div>

        <div class='grid grid-cols-[auto_1fr] gap-2'>
            <span class="material-symbols-rounded text-3xl text-blue-600 font-semibold">
                tag
            </span>
            <div class='mt-1'>
                <h2 class='text-xl font-medium mb-2'>Tags</h2>
                <app-tag-input formControlName='tags'></app-tag-input>
                <p class='text-sm text-stone-700 mt-2'>
                    Enter relevant keywords or phrases that act as tags for the book. These tags help in
                    enhancing searchability and
                    categorization.
                </p>
            </div>
        </div>
    </div>

    <hr>

    <div class='grid md:grid-cols-3 gap-10 bg-neutral-100 rounded py-5 px-3'>

        <div class='grid grid-cols-[auto_1fr] gap-2'>
            <span class="material-symbols-rounded text-3xl text-blue-600 font-semibold">
                attractions
            </span>
            <div class='mt-1'>
                <h2 class='text-xl font-medium mb-2'>Origin or Inspiration</h2>
                <div class='flex items-center gap-2'>
                    <input formControlName='origin' type="checkbox" id="origin" class='rounded-md h-4 w-4 p-2' />
                    <label for="origin" class='text-center text-sm'>It's original</label>
                </div>
                <p class='text-sm text-stone-700 mt-2'>
                    Indicate whether the book is an original work or if it is a derivative, such as a
                    translation, adaptation, or
                    compilation of existing content.
                </p>
            </div>
        </div>

        <div class='grid grid-cols-[auto_1fr] gap-2'>
            <span [ngClass]="{'text-slate-400': !editMode, 'text-blue-600': editMode}"
                class="material-symbols-rounded text-3xl font-semibold">
                published_with_changes
            </span>
            <div class='mt-1'>
                <h2 class='text-xl font-medium mb-2'>Progress</h2>
                <select formControlName='stage'
                    class='p-2 rounded-md border border-slate-300 w-full bg-slate-200 focus:border-blue-300 transition duration-200'>
                    <option *ngFor='let stage of stages' [value]="stage"> {{stage}} </option>
                </select>
                <p class='text-sm text-stone-700 mt-2'>
                    Select the current status of the book â€“ whether it is still in progress or if it has
                    been completed.
                </p>
                <p *ngIf="!editMode" class='text-sm text-rose-600 mt-2'>
                    The field is disabled during the book creation process.
                </p>
            </div>
        </div>
    </div>
    <div class='my-3 flex items-center gap-4 justify-end'>
        <a routerLink="/" class='text-sm text-stone-800 hover:text-stone-600 transition duration-200'>Cancel</a>
        <button type='submit'
            class='px-4 py-2 text-neutral-200 bg-blue-700 hover:bg-blue-600 transition duration-200 rounded-md font-medium flex items-center gap-1'>
            Save & go write
            <span class="material-symbols-rounded">
                edit_square
            </span>
        </button>
    </div>
</form>
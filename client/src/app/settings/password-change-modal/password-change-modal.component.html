<app-modal modalId="changePasswordModal" title="Changing password..."
    description="Please enter the password you want to go with">
    <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
        <div class='my-2'>
            <input formControlName='password' type='password' placeholder="Current Password"
                autocomplete='current-password'
                class='p-2 rounded-md border border-slate-300 w-full bg-slate-200 focus:border-blue-300 dark:bg-neutral-900 dark:border-neutral-700 dark:focus:border-blue-700 transition duration-200' />
            <div [ngClass]="{'opacity-100 z-10': passwordForm.get('password')?.invalid && passwordForm.get('password')?.touched}"
                class="opacity-0 cursor-default transition duration-300 text-sm text-red-500 rounded px-2">
                <span>
                    Please enter your current password
                </span>
            </div>
        </div>

        <div class='my-2'>
            <input formControlName='newPassword' type='password' placeholder="New password" autocomplete='new-password'
                class='p-2 rounded-md border border-slate-300 w-full bg-slate-200 focus:border-blue-300 dark:bg-neutral-900 dark:border-neutral-700 dark:focus:border-blue-700 transition duration-200' />
            <div [ngClass]="{'opacity-100 z-10': passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched}"
                class="opacity-0 cursor-default transition duration-300 text-sm text-red-500 rounded px-2 flex flex-col">
                <span>
                    {{
                    passwordForm.get('newPassword')?.errors?.['required'] ?
                    'Password cannot be empty' :
                    'Password must be at least 8 characters long'
                    }}
                </span>
            </div>
        </div>

        <div class='my-2'>
            <input formControlName='newConfirmPassword' type='password' placeholder="Confirm new password"
                autocomplete='new-password'
                class='p-2 rounded-md border border-slate-300 w-full bg-slate-200 focus:border-blue-300 dark:bg-neutral-900 dark:border-neutral-700 dark:focus:border-blue-700 transition duration-200' />
            <div [ngClass]="{'opacity-100 z-10': passwordForm.get('newConfirmPassword')?.invalid && passwordForm.get('newConfirmPassword')?.touched}"
                class="opacity-0 cursor-default transition duration-300 text-sm text-red-500 rounded px-2">
                <span>
                    {{
                    passwordForm.get('newConfirmPassword')?.errors?.['required'] ?
                    'Password cannot be empty' :
                    'Password must be at least 8 characters long'
                    }}
                </span>
            </div>
        </div>

        <div class='flex justify-end'>
            <button type='submit' [disabled]='passwordForm.invalid' [ngClass]="{'opacity-50': passwordForm.invalid}"
                class='bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition duration-200'>
                Save Changes
            </button>
        </div>
    </form>